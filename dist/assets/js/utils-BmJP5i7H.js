var e=Object.defineProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t,r)=>i(e,"symbol"!=typeof t?t+"":t,r),o=(e,t,r)=>new Promise((n,i)=>{var s=e=>{try{a(r.next(e))}catch(t){i(t)}},o=e=>{try{a(r.throw(e))}catch(t){i(t)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(s,o);a((r=r.apply(e,t)).next())});import{z as a}from"./vendor-D7MsIful.js";const l={},E=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),i=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));n=e(t.map(e=>{if((e=function(e){return"/"+e}(e))in l)return;l[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,i&&n.setAttribute("nonce",i),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};const u=new class{constructor(){s(this,"logBuffer",[]),s(this,"maxBufferSize",100)}get isDevelopment(){return!1}shouldLog(e){return!!this.isDevelopment||("warn"===e||"error"===e)}formatMessage(e,t,r,n){return`${`[${(new Date).toISOString()}] [${e.toUpperCase()}]`}${n?` [${n}]`:""}: ${t}${r?` ${JSON.stringify(r,null,2)}`:""}`}addToBuffer(e){this.logBuffer.push(e),this.logBuffer.length>this.maxBufferSize&&this.logBuffer.shift()}debug(e,t,r){if(!this.shouldLog("debug"))return;const n={level:"debug",message:e,data:t,timestamp:(new Date).toISOString(),source:r};this.addToBuffer(n),this.isDevelopment}info(e,t,r){if(!this.shouldLog("info"))return;const n={level:"info",message:e,data:t,timestamp:(new Date).toISOString(),source:r};this.addToBuffer(n),this.isDevelopment}warn(e,t,r){if(!this.shouldLog("warn"))return;const n={level:"warn",message:e,data:t,timestamp:(new Date).toISOString(),source:r};this.addToBuffer(n)}error(e,t,r){if(!this.shouldLog("error"))return;const n={level:"error",message:e,data:t,timestamp:(new Date).toISOString(),source:r};this.addToBuffer(n),this.isDevelopment}getLogs(){return[...this.logBuffer]}clearLogs(){this.logBuffer=[]}getLogsSince(e){return this.logBuffer.filter(t=>t.timestamp>=e)}exportLogs(){return JSON.stringify(this.logBuffer,null,2)}};new class{constructor(){s(this,"deferredPrompt",null),s(this,"isInstalled",!1),s(this,"isOffline",!1),this.initialize()}initialize(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.deferredPrompt=null}),window.addEventListener("online",()=>{this.isOffline=!1}),window.addEventListener("offline",()=>{this.isOffline=!0}),this.checkInstallStatus()}checkInstallStatus(){window.matchMedia("(display-mode: standalone)").matches&&(this.isInstalled=!0),this.isOffline=!navigator.onLine}promptInstall(){return o(this,null,function*(){if(!this.deferredPrompt)return!1;try{yield this.deferredPrompt.prompt();const{outcome:e}=yield this.deferredPrompt.userChoice;return"accepted"===e&&(this.isInstalled=!0),this.deferredPrompt=null,"accepted"===e}catch(e){return!1}})}getInstallStatus(){return o(this,null,function*(){return"serviceWorker"in navigator?this.isInstalled?"installed":this.deferredPrompt?"installable":this.isOffline?"offline":"not-supported":"not-supported"})}getPWAStatus(){return{isInstallable:!!this.deferredPrompt,isInstalled:this.isInstalled,isOffline:this.isOffline}}isSupported(){return"serviceWorker"in navigator}isStandalone(){return window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone}registerServiceWorker(e="/sw.js"){return o(this,null,function*(){if(!this.isSupported())return null;try{return yield navigator.serviceWorker.register(e)}catch(t){return null}})}unregisterServiceWorker(){return o(this,null,function*(){if(!this.isSupported())return!1;try{const e=yield navigator.serviceWorker.ready;return yield e.unregister()}catch(e){return!1}})}optimizeForMobile(){const e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"),document.body.classList.add("mobile-optimized"),this.isStandalone()&&document.body.classList.add("standalone-mode")}requestNotificationPermission(){return o(this,null,function*(){return"Notification"in window?"default"===Notification.permission?yield Notification.requestPermission():Notification.permission:"denied"})}canShowNotifications(){return"Notification"in window&&"granted"===Notification.permission}showNotification(e,s){this.canShowNotifications()&&new Notification(e,((e,s)=>{for(var o in s||(s={}))r.call(s,o)&&i(e,o,s[o]);if(t)for(var o of t(s))n.call(s,o)&&i(e,o,s[o]);return e})({icon:"/icon-192.png",badge:"/badge-72.png"},s))}};const _={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ALLOW_ANONYMOUS:"true",VITE_API_BASE_URL:"/.netlify/functions",VITE_API_URL:"/.netlify/functions",VITE_APP_VERSION:"1.0.0",VITE_AUTH0_AUDIENCE:"http://localhost:3000/api",VITE_AUTH0_CALLBACK_URL:"http://localhost:3000/callback",VITE_AUTH0_CLIENT_ID:"uGv7ns4HVxnKn5ofBdnaKqCKue1JUvZG",VITE_AUTH0_DOMAIN:"dev-ac3ajs327vs5vzhk.us.auth0.com",VITE_AUTH_OPTIONAL:"true",VITE_CRISIS_HOTLINE:"988",VITE_CRISIS_TEXT_LINE:"741741",VITE_DEBUG_MODE:"false",VITE_ENABLE_AI_CHAT:"true",VITE_ENABLE_INSTALL_PROMPT:"true",VITE_ENABLE_OFFLINE_ANALYTICS:"true",VITE_ENABLE_OFFLINE_MODE:"true",VITE_ENABLE_PUSH_NOTIFICATIONS:"false",VITE_ENABLE_SHARE_TARGET:"true",VITE_ENABLE_VIDEO_CHAT:"false",VITE_GA_TRACKING_ID:"",VITE_INSTALL_PROMPT_DELAY:"5000",VITE_INSTALL_PROMPT_FREQUENCY:"7",VITE_OFFLINE_CRISIS_PAGE:"/offline-crisis.html",VITE_OFFLINE_FALLBACK_PAGE:"/offline.html",VITE_OTEL_API_KEY:"",VITE_OTEL_ENABLED:"false",VITE_OTEL_ENDPOINT:"",VITE_PWA_BACKGROUND_COLOR:"",VITE_PWA_DESCRIPTION:"Anonymous peer-to-peer mental health support platform with offline crisis resources",VITE_PWA_DISPLAY:"standalone",VITE_PWA_NAME:"Astral Core - Mental Health Support",VITE_PWA_ORIENTATION:"portrait",VITE_PWA_SCOPE:"/",VITE_PWA_SHORT_NAME:"Astral Core",VITE_PWA_START_URL:"/",VITE_PWA_THEME_COLOR:"",VITE_SENTRY_DSN:"",VITE_SHARE_TARGET_URL:"/share",VITE_SHOW_DEV_TOOLS:"false",VITE_SW_CACHE_NAME:"astral-core",VITE_SW_ENABLE_BACKGROUND_SYNC:"true",VITE_SW_ENABLE_PUSH_SYNC:"false",VITE_SW_UPDATE_INTERVAL:"60000",VITE_USER_NODE_ENV:"production",VITE_VAPID_PUBLIC_KEY:"development-vapid-public-key-placeholder",VITE_WEBSOCKET_URL:"ws://localhost:3000"},f=a.object({VITE_API_URL:a.string().url().default("http://localhost:3001"),VITE_SUPABASE_URL:a.string().url().optional(),VITE_SUPABASE_ANON_KEY:a.string().optional(),VITE_ENABLE_ANALYTICS:a.string().transform(e=>"true"===e).default("false"),VITE_ENABLE_PWA:a.string().transform(e=>"true"===e).default("true"),VITE_ENVIRONMENT:a.enum(["development","staging","production"]).default("development"),VITE_PWA_NAME:a.string().default("CoreV2 - Mental Health Support"),VITE_PWA_SHORT_NAME:a.string().default("CoreV2"),VITE_PWA_THEME_COLOR:a.string().default("#2563eb"),VITE_PWA_BACKGROUND_COLOR:a.string().default("#ffffff"),VITE_PWA_DISPLAY:a.enum(["standalone","fullscreen","minimal-ui","browser"]).default("standalone"),VITE_ENABLE_CRISIS_DETECTION:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_AI_CHAT:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_VIDEO_CHAT:a.string().transform(e=>"true"===e).default("false"),VITE_ENABLE_GROUP_SESSIONS:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_PEER_SUPPORT:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_CSP:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_HTTPS_ONLY:a.string().transform(e=>"true"===e).default("false"),VITE_ENABLE_SERVICE_WORKER:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_OFFLINE_MODE:a.string().transform(e=>"true"===e).default("true"),VITE_CACHE_MAX_AGE:a.string().transform(e=>parseInt(e)||3600).default("3600"),VITE_LOG_LEVEL:a.enum(["debug","info","warn","error"]).default("info"),VITE_ENABLE_ERROR_TRACKING:a.string().transform(e=>"true"===e).default("true"),VITE_SENTRY_DSN:a.string().optional(),VITE_GOOGLE_ANALYTICS_ID:a.string().optional(),VITE_HOTJAR_ID:a.string().optional(),VITE_CRISP_WEBSITE_ID:a.string().optional(),VITE_CRISIS_HOTLINE:a.string().default("988"),VITE_CRISIS_TEXT_LINE:a.string().default("741741"),VITE_EMERGENCY_NUMBER:a.string().default("911"),VITE_ENABLE_HIGH_CONTRAST:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_SCREEN_READER:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_KEYBOARD_NAV:a.string().transform(e=>"true"===e).default("true"),VITE_ENABLE_DEVTOOLS:a.string().transform(e=>"true"===e).default("false"),VITE_ENABLE_DEBUG_MODE:a.string().transform(e=>"true"===e).default("false")});const d=function(){try{const e=_||{};return f.parse(e)}catch(e){return f.parse({})}}(),I=()=>{try{return d}catch(e){throw new Error("Failed to load and validate environment variables")}};export{E as _,I as a,u as l};
