const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/react-vendor-IorqdeNj.js","assets/js/vendor-BRFUAJck.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,l=(e,s)=>{for(var t in s||(s={}))n.call(s,t)&&r(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&r(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),c=(e,s)=>{var t={};for(var r in e)n.call(e,r)&&s.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&a)for(var r of a(e))s.indexOf(r)<0&&i.call(e,r)&&(t[r]=e[r]);return t},d=(e,s,t)=>r(e,"symbol"!=typeof s?s+"":s,t),u=(e,s,t)=>new Promise((a,n)=>{var i=e=>{try{l(t.next(e))}catch(s){n(s)}},r=e=>{try{l(t.throw(e))}catch(s){n(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,r);l((t=t.apply(e,s)).next())});import{r as h,j as m,R as p,u as g,i as v,a as x,b as f,c as y}from"./react-vendor-IorqdeNj.js";import{W as b,A as j,l as N,a as w,T as C,b as S,s as k,p as I,c as A,f as M,d as L}from"./utils-D6DFWjeA.js";import{i as z,B as E}from"./vendor-BRFUAJck.js";import{u as D}from"./stores-ClzP1JB8.js";import{C as _}from"./crisis-core-DtfOKt0v.js";const T={},R=function(e,s,t){let a=Promise.resolve();if(s&&s.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),n=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));a=e(s.map(e=>{if((e=function(e){return"/"+e}(e))in T)return;T[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":"modulepreload",s||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),s?new Promise((s,t)=>{a.addEventListener("load",s),a.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return a.then(s=>{for(const e of s||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},O=()=>m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),H=()=>m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("polyline",{points:"23 4 23 10 17 10"}),m.jsx("polyline",{points:"1 20 1 14 7 14"}),m.jsx("path",{d:"m3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),P=()=>m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[m.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),m.jsx("polyline",{points:"9,22 9,12 15,12 15,22"})]}),V=()=>m.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),$=({size:e=48})=>m.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})});class B extends h.Component{constructor(e){super(e),d(this,"retryTimeouts",[]),d(this,"resetErrorBoundary",()=>{var e,s;null==(s=(e=this.props).onRetry)||s.call(e,this.state.retryCount),this.setState({hasError:!1,error:null,errorInfo:null,errorId:""})}),this.state={hasError:!1,error:null,errorInfo:null,errorId:"",retryCount:0,severity:"low",category:"unknown",timestamp:new Date}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,severity:B.determineSeverity(e),category:B.categorizeError(e),timestamp:new Date}}componentDidCatch(e,s){var t,a;this.setState({errorInfo:s}),!1!==this.props.reportErrors&&this.reportError(e,s),this.props.isDevelopment||this.props.logToConsole,null==(a=(t=this.props).onError)||a.call(t,e,s,this.state.errorId),this.props.autoRetry&&this.state.retryCount<(this.props.maxRetries||3)&&this.scheduleRetry(),this.props.isCrisisContext&&this.handleCrisisError(e,s)}componentWillUnmount(){this.retryTimeouts.forEach(e=>clearTimeout(e))}static determineSeverity(e){var s;const t=e.message.toLowerCase(),a=(null==(s=e.stack)?void 0:s.toLowerCase())||"";return t.includes("crisis")||t.includes("emergency")||t.includes("suicide")||a.includes("crisis")?"critical":"ChunkLoadError"===e.name||t.includes("network")||t.includes("fetch")||t.includes("authentication")||t.includes("unauthorized")?"high":t.includes("validation")||t.includes("parse")||t.includes("timeout")||"TypeError"===e.name?"medium":"low"}static categorizeError(e){const s=e.message.toLowerCase(),t=e.name.toLowerCase();return s.includes("crisis")||s.includes("emergency")?"crisis-intervention":t.includes("chunkerror")||s.includes("loading")?"network":s.includes("unauthorized")||s.includes("forbidden")?"authentication":s.includes("validation")||s.includes("schema")?"validation":s.includes("serviceworker")||s.includes("sw")?"service-worker":t.includes("typeerror")||s.includes("render")?"ui-rendering":s.includes("corrupt")||s.includes("malformed")?"data-corruption":"unknown"}generateErrorReport(e,s){return{id:this.state.errorId,timestamp:this.state.timestamp,error:{name:e.name,message:e.message,stack:this.props.includeStackTrace?e.stack:void 0},errorInfo:this.props.includeErrorInfo?s:void 0,severity:this.state.severity,category:this.state.category,userAgent:navigator.userAgent,url:window.location.href,retryCount:this.state.retryCount,context:{isCrisisContext:this.props.isCrisisContext||!1,route:window.location.pathname,userState:this.props.isDevelopment?{localStorage:Object.keys(localStorage).length,sessionStorage:Object.keys(sessionStorage).length,online:navigator.onLine}:void 0}}}reportError(e,s){return u(this,null,function*(){var t,a;try{const n=this.generateErrorReport(e,s);null==(a=(t=this.props).onReport)||a.call(t,n),this.props.reportingUrl&&(yield fetch(this.props.reportingUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));const i=JSON.parse(localStorage.getItem("error_reports")||"[]");i.push(n),localStorage.setItem("error_reports",JSON.stringify(i.slice(-10)))}catch(n){}})}handleCrisisError(e,s){localStorage.setItem("crisis_error",JSON.stringify({error:e.message,timestamp:(new Date).toISOString(),context:"crisis_intervention"})),this.props.crisisContactInfo&&window.dispatchEvent(new CustomEvent("crisis-error",{detail:this.props.crisisContactInfo}))}scheduleRetry(){const e=this.props.retryDelay||1e3*Math.pow(2,this.state.retryCount),s=setTimeout(()=>{this.setState(e=>({retryCount:e.retryCount+1})),this.resetErrorBoundary()},e);this.retryTimeouts.push(s)}redirectToSafeRoute(){const e=this.props.redirectOnError||"/";window.location.href=e}render(){if(this.state.hasError&&this.state.error){if(this.props.fallback){const e={error:this.state.error,errorInfo:this.state.errorInfo,resetErrorBoundary:this.resetErrorBoundary,severity:this.state.severity,category:this.state.category,config:this.props,retryCount:this.state.retryCount};if("function"==typeof this.props.fallback){return(0,this.props.fallback)(this.state.error,this.state.errorInfo)}{const s=this.props.fallback;return m.jsx(s,l({},e))}}return this.renderDefaultFallback()}return this.props.children}renderDefaultFallback(){const{error:e,severity:s,category:t,retryCount:a}=this.state,{enableRetry:n,maxRetries:i=3,isCrisisContext:r,crisisContactInfo:l}=this.props;return r||"crisis-intervention"===t?m.jsx(F,{error:e,onRetry:n?this.resetErrorBoundary:void 0,retryCount:a,maxRetries:i,crisisContactInfo:l}):"critical"===s||"high"===s?m.jsx(W,{category:t,onRetry:n?this.resetErrorBoundary:void 0,onRedirect:this.redirectToSafeRoute,retryCount:a,maxRetries:i}):m.jsx(U,{error:e,severity:s,category:t,onRetry:n?this.resetErrorBoundary:void 0,onDismiss:this.props.allowErrorDismiss?this.resetErrorBoundary:void 0,retryCount:a,maxRetries:i,showDetails:this.props.showErrorDetails})}}const F=({error:e,onRetry:s,retryCount:t,maxRetries:a,crisisContactInfo:n})=>m.jsx("div",{className:"crisis-error-fallback",role:"alert","aria-live":"assertive",children:m.jsxs("div",{className:"crisis-error-container",children:[m.jsxs("div",{className:"crisis-error-header",children:[m.jsx($,{size:48}),m.jsx("h1",{children:"We're Here to Help"}),m.jsx("p",{children:"We're experiencing a technical issue, but your safety is our priority. You can still access crisis support resources."})]}),n&&m.jsxs("div",{className:"crisis-contacts",children:[m.jsx("h2",{children:"Immediate Support Available"}),m.jsxs("div",{className:"contact-options",children:[m.jsxs("a",{href:`tel:${n.phone}`,className:"contact-button phone",children:[m.jsx(V,{}),"Call ",n.phone]}),m.jsxs("a",{href:`sms:${n.text}`,className:"contact-button text",children:[m.jsx(O,{}),"Text ",n.text]}),m.jsxs("a",{href:n.chat,className:"contact-button chat",children:[m.jsx($,{size:20}),"Online Chat"]})]})]}),m.jsxs("div",{className:"crisis-error-actions",children:[s&&t<a&&m.jsxs("button",{onClick:s,className:"retry-button",children:[m.jsx(H,{}),"Try Again (",a-t," attempts remaining)"]}),m.jsx("button",{onClick:()=>window.location.href="/crisis",className:"crisis-resources-button",children:"View Crisis Resources"})]}),!1]})}),W=({category:e,onRetry:s,onRedirect:t,retryCount:a,maxRetries:n})=>m.jsx("div",{className:"high-severity-error-fallback",role:"alert",children:m.jsxs("div",{className:"error-container",children:[m.jsx(O,{}),m.jsx("h1",{children:"Something Went Wrong"}),m.jsxs("p",{children:["network"===e&&"We're having trouble connecting to our servers.","authentication"===e&&"There was an issue with your session.","service-worker"===e&&"The app needs to refresh to work properly.","unknown"===e&&"An unexpected error occurred."]}),m.jsxs("div",{className:"error-actions",children:[s&&a<n&&m.jsxs("button",{onClick:s,className:"retry-button primary",children:[m.jsx(H,{}),"Try Again"]}),m.jsxs("button",{onClick:t,className:"home-button secondary",children:[m.jsx(P,{}),"Go to Home"]})]}),"      ",m.jsx("div",{className:"error-help",children:m.jsx("p",{children:"If this problem persists, please contact support."})})]})}),U=({error:e,severity:s,category:t,onRetry:a,onDismiss:n,retryCount:i,maxRetries:r,showDetails:l})=>m.jsxs("div",{className:"standard-error-fallback",role:"alert",children:[m.jsxs("div",{className:"error-banner",children:[m.jsx(O,{}),m.jsxs("div",{className:"error-content",children:[m.jsx("h3",{children:"medium"===s?"Minor Issue":"Small Problem"}),m.jsxs("p",{children:["validation"===t&&"Please check your input and try again.","ui-rendering"===t&&"This section couldn't load properly.","unknown"===t&&"Something didn't work as expected."]})]}),m.jsxs("div",{className:"error-actions",children:[a&&i<r&&m.jsxs("button",{onClick:a,className:"retry-button-small",children:[m.jsx(H,{}),"Retry"]}),n&&m.jsx("button",{onClick:n,className:"dismiss-button",children:"×"})]})]}),"    ",l&&m.jsxs("details",{className:"error-details-small",children:[m.jsx("summary",{children:"Technical Details"}),m.jsx("code",{children:e.message})]})]}),q=h.createContext(void 0),G=({children:e})=>{const[s,t]=h.useState([]),[a,n]=h.useState(null),i=h.useCallback((e,s="success")=>{const a=crypto.randomUUID();t(t=>[...t,{id:a,message:e,type:s}])},[]),r=h.useCallback(e=>{t(s=>s.filter(s=>s.id!==e))},[]),l=h.useCallback(e=>{n(e)},[]),o=h.useCallback(()=>{(null==a?void 0:a.onCancel)&&a.onCancel(),n(null)},[a]),c=h.useMemo(()=>({toasts:s,addToast:i,removeToast:r,confirmationModal:a,showConfirmationModal:l,hideConfirmationModal:o}),[s,i,r,a,l,o]);return m.jsx(q.Provider,{value:c,children:e})},Y=()=>{const e=h.useContext(q);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e},J="uGv7ns4HVxnKn5ofBdnaKqCKue1JUvZG",Q=b.makeRedirectUri(),K={isAuthenticated:!1,isAnonymous:!0,user:null,helperProfile:null,userToken:null,anonymousId:null},X=h.createContext(void 0),Z=e=>{try{const s=e.split(".")[1];if(!s)return N.error("Invalid JWT: Missing payload part.",void 0,"OptionalAuthContext"),null;const t=s.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(a)}catch(s){return N.error("Failed to decode JWT",s,"OptionalAuthContext"),null}},ee=({children:e})=>{const[s,t]=h.useState(null),[a,n]=h.useState(null),[i,r]=h.useState(!1),[c,d]=h.useState(!0),[p,g]=h.useState(null),[v,x]=h.useState(null),[f,y]=h.useState(!0),{addToast:C}=Y(),S=b.useAutoDiscovery("https://dev-ac3ajs327vs5vzhk.us.auth0.com"),[k,I,A]=b.useAuthRequest({clientId:J,redirectUri:Q,responseType:b.ResponseType.Token,scopes:["openid","profile","email"],extraParams:{audience:"http://localhost:3000/api"}},!0),M=h.useCallback(e=>u(null,null,function*(){if(e)try{const s=yield j.helpers.getProfile(e);s?(n(s),r(!1)):(n(null),r(!0))}catch(s){N.error("Failed to fetch helper profile",s,"OptionalAuthContext"),n(null),r(!0)}}),[]),L=h.useCallback(e=>u(null,null,function*(){if(e){sessionStorage.setItem("accessToken",e);const s=Z(e);s&&t(o(l({},s),{id:s.sub,email:s.email||""})),y(!1),(null==s?void 0:s.sub)&&(yield M(s.sub))}else sessionStorage.removeItem("accessToken"),t(null),n(null),r(!1),y(!0)}),[M]);h.useEffect(()=>{let e=w.getAnonymousId();e||(e=crypto.randomUUID(),w.setAnonymousId(e)),x(e);let s=localStorage.getItem("userToken");s||(s=crypto.randomUUID(),localStorage.setItem("userToken",s)),g(s)},[]);const z=h.useCallback(()=>u(null,null,function*(){d(!0);if(localStorage.getItem("demo_user")&&(localStorage.removeItem("demo_user"),localStorage.removeItem("demo_token")),yield L(null),y(!0),K.isAuthenticated=!1,K.isAnonymous=!0,K.user=null,K.helperProfile=null,d(!1),(null==S?void 0:S.endSessionEndpoint)&&!f){const e=`${S.endSessionEndpoint}?client_id=${J}&returnTo=${encodeURIComponent(window.location.origin)}`;window.location.assign(e)}}),[S,L,f]);h.useEffect(()=>{u(null,null,function*(){N.debug("Starting token load",void 0,"OptionalAuthContext"),d(!0);try{const e=localStorage.getItem("demo_user"),s=localStorage.getItem("demo_token");if(e&&s){N.debug("Loading demo user",void 0,"OptionalAuthContext");const a=JSON.parse(e);return t(o(l({},a),{sub:a.id,exp:Math.floor(Date.now()/1e3)+86400,email:a.email})),g(s),y(!1),a.helperProfile?(n(a.helperProfile),r(!1)):(n(null),r("helper"===a.userType)),K.isAuthenticated=!0,K.isAnonymous=!1,K.user=o(l({},a),{sub:a.id,exp:Math.floor(Date.now()/1e3)+86400,email:a.email}),K.helperProfile=a.helperProfile||null,K.userToken=s,void d(!1)}const a=sessionStorage.getItem("accessToken");if(a){const e=Z(a);e&&1e3*e.exp>Date.now()?(yield L(a),y(!1)):yield L(null)}N.debug("No authentication found, using anonymous mode",void 0,"OptionalAuthContext")}catch(e){N.error("Error during token loading:",e,"OptionalAuthContext"),yield L(null)}finally{N.debug("Token load complete",void 0,"OptionalAuthContext"),d(!1)}})},[L]),h.useEffect(()=>{var e;"success"===(null==I?void 0:I.type)?L(I.params.access_token):"error"===(null==I?void 0:I.type)&&(C("Authentication error: "+(I.params.error_description||(null==(e=I.error)?void 0:e.message)),"error"),N.error("Authentication error",I.error,"OptionalAuthContext"))},[I,L,C]);const E=h.useCallback(()=>u(null,null,function*(){if(!k){const e="Authentication service is not configured correctly.";return N.error(e,void 0,"OptionalAuthContext"),void C(e,"error")}yield null==A?void 0:A()}),[k,A,C]),D=h.useCallback(()=>u(null,null,function*(){yield E()}),[E,C]),_=h.useCallback(()=>u(null,null,function*(){s&&"object"==typeof s&&"sub"in s&&s.sub&&(yield M(s.sub))}),[s,M]),T=h.useCallback(e=>{n(e)},[]),R=h.useMemo(()=>({isAuthenticated:!!s&&!f,isAnonymous:f,user:s,helperProfile:a,isNewUser:i,isLoading:c,login:E,logout:z,register:D,reloadProfile:_,updateHelperProfile:T,userToken:p,anonymousId:v,authState:{isAuthenticated:!!s&&!f,isAnonymous:f,user:s,helperProfile:a,userToken:p,anonymousId:v}}),[s,f,a,i,c,E,z,D,_,T,p,v]);return h.useEffect(()=>{K.isAuthenticated=R.isAuthenticated,K.isAnonymous=R.isAnonymous,K.user=R.user,K.helperProfile=R.helperProfile,K.userToken=R.userToken,K.anonymousId=R.anonymousId},[R]),m.jsx(X.Provider,{value:R,children:e})},se=({size:e="medium",message:s,className:t})=>m.jsxs("div",{className:`loading-spinner-container glass-card smooth-transition animate-float ${t||""}`,"aria-live":"polite",children:[m.jsxs("div",{className:`loading-spinner ${{small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[e]}`,children:[m.jsx("span",{className:"loading-dot"}),m.jsx("span",{className:"loading-dot"}),m.jsx("span",{className:"loading-dot"})]}),s&&m.jsxs("p",{className:"loading-message gradient-text animate-gradient",children:[m.jsx("span",{className:"sr-only",children:"Loading: "}),s]})]}),{useState:te,useEffect:ae,useCallback:ne,useMemo:ie}=p,re=({children:e,storageKey:s="astral-theme-preferences",defaultTheme:t="calm-sanctuary",enableSystemDetection:a=!0,enableColorPsychologyRecommendations:n=!0})=>{const i={therapeuticTheme:t,colorMode:"auto",intensity:"balanced",accessibilityLevel:"AA",reduceMotion:!1,highContrast:!1,fontSize:"medium",spacing:"comfortable"},[r,c]=te(i),[d,u]=te("light");ae(()=>{try{const e=localStorage.getItem(s);if(e){const s=JSON.parse(e);c(l(l({},i),s))}}catch(e){}},[s]),ae(()=>{try{localStorage.setItem(s,JSON.stringify(r))}catch(e){}},[r,s]),ae(()=>{if(!a)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),s=e=>{u(e.matches?"dark":"light")};return u(e.matches?"dark":"light"),e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[a]),ae(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)"),s=e=>{e.matches&&c(e=>o(l({},e),{reduceMotion:!0}))};return e.matches&&c(e=>o(l({},e),{reduceMotion:!0})),e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]),ae(()=>{const e=window.matchMedia("(prefers-contrast: high)"),s=e=>{e.matches&&c(e=>o(l({},e),{highContrast:!0}))};return e.matches&&c(e=>o(l({},e),{highContrast:!0})),e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[]);const h=ie(()=>{let e=r.therapeuticTheme;return r.highContrast&&(e="high-contrast"),C[e]},[r.therapeuticTheme,r.highContrast]),p=ie(()=>"auto"===r.colorMode?d:"dark"===r.colorMode?"dark":"light",[r.colorMode,d]),g=ie(()=>{const e=((e,s)=>{if(1===s)return e;const t=l({},e);return["primary","primaryLight","secondary","secondaryLight","calm","hope","support","growth"].forEach(a=>{const n=e[a];if(n&&"string"==typeof n){const e=n.substring(1),i=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),l=parseInt(e.substring(4,6),16),o=Math.min(255,Math.floor(i*s)),c=Math.min(255,Math.floor(r*s)),d=Math.min(255,Math.floor(l*s));t[a]=`#${o.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`}}),t})(h.colors[p],(e=>{switch(e){case"subtle":return.7;case"balanced":default:return 1;case"vibrant":return 1.3}})(r.intensity));return l(l({},e),r.colorOverrides)},[h,p,r.intensity,r.colorOverrides]);ae(()=>{const e=document.documentElement;Object.entries(g).forEach(([s,t])=>{var a;e.style.setProperty(`--color-${a=s,a.replace(/([A-Z])/g,"-$1").toLowerCase()}`,t)});const s=(e=>{let s=1;return"compact"===e?s=.75:"spacious"===e&&(s=1.25),Object.fromEntries(Object.entries({xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem","3xl":"4rem"}).map(([e,t])=>[e,parseFloat(t)*s+"rem"]))})(r.spacing);Object.entries(s).forEach(([s,t])=>{e.style.setProperty(`--spacing-${s}`,t)});const t={small:{base:"14px",sm:"12px",md:"14px",lg:"16px",xl:"18px","2xl":"20px"},medium:{base:"16px",sm:"14px",md:"16px",lg:"18px",xl:"20px","2xl":"24px"},large:{base:"18px",sm:"16px",md:"18px",lg:"20px",xl:"24px","2xl":"28px"},"extra-large":{base:"20px",sm:"18px",md:"20px",lg:"24px",xl:"28px","2xl":"32px"}}[r.fontSize];Object.entries(t).forEach(([s,t])=>{e.style.setProperty(`--font-size-${s}`,t)});let a="200ms";r.reduceMotion?a="0.01ms":r.customAnimationDuration&&(a=`${r.customAnimationDuration}ms`),e.style.setProperty("--animation-duration",a),document.body.className=document.body.className.replace(/theme-\w+/g,"").replace(/mode-\w+/g,"").trim(),document.body.classList.add(`theme-${h.id}`,`mode-${p}`),r.highContrast&&document.body.classList.add("high-contrast"),r.reduceMotion&&document.body.classList.add("reduce-motion")},[g,h.id,p,r]);const v=ne((e,s)=>{const t=e=>{const s=e.replace("#",""),t=parseInt(s.substring(0,2),16)/255,a=parseInt(s.substring(2,4),16)/255,n=parseInt(s.substring(4,6),16)/255,i=e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);return.2126*i(t)+.7152*i(a)+.0722*i(n)},a=t(e),n=t(s);return(Math.max(a,n)+.05)/(Math.min(a,n)+.05)},[]),x=ne((e,s)=>v(e,s)>=("AAA"===r.accessibilityLevel?7:4.5),[v,r.accessibilityLevel]),f=ne(e=>{c(s=>o(l({},s),{therapeuticTheme:e}))},[]),y=ne(e=>{c(s=>o(l({},s),{colorMode:e}))},[]),b=ne(e=>{c(s=>o(l({},s),{intensity:e}))},[]),j=ne(e=>{c(s=>o(l({},s),{accessibilityLevel:e}))},[]),N=ne((e,s)=>{c(t=>o(l({},t),{colorOverrides:o(l({},t.colorOverrides),{[e]:s})}))},[]),w=ne(()=>{c(e=>o(l({},e),{colorOverrides:void 0,intensity:"balanced",customAnimationDuration:void 0}))},[]),k=ne(()=>JSON.stringify({preferences:r,currentTheme:h.id,version:"1.0.0",exportDate:(new Date).toISOString()},null,2),[r,h.id]),I=ne(e=>{try{const s=JSON.parse(e);return!(!s.preferences||!s.version)&&(c(l(l({},i),s.preferences)),!0)}catch(s){return!1}},[]),A=ne(e=>({anxious:{primary:g.calm,background:g.backgroundSecondary},depressed:{primary:g.hope,secondary:g.support},stressed:{background:g.calm,surface:g.surfaceSecondary},energetic:{primary:g.growth,secondary:g.hope},peaceful:{primary:g.calm,background:g.background},motivated:{primary:g.growth,secondary:g.hope}}[e.toLowerCase()]||{}),[g]),M=ne(()=>C["crisis-safe"].colors[p],[p]),L=ne(e=>{var s,t,a,i,r;if(!n)return[];const l=["calm-sanctuary","nature-healing"];return(null==(s=null==e?void 0:e.conditions)?void 0:s.includes("anxiety"))&&l.unshift("calm-sanctuary"),(null==(t=null==e?void 0:e.conditions)?void 0:t.includes("depression"))&&l.unshift("warm-embrace"),(null==(a=null==e?void 0:e.conditions)?void 0:a.includes("adhd"))&&l.unshift("minimal-zen","gentle-focus"),(null==(i=null==e?void 0:e.accessibility)?void 0:i.visualImpairment)&&l.unshift("high-contrast"),(null==(r=null==e?void 0:e.preferences)?void 0:r.highEnergy)&&l.push("energizing-hope"),[...new Set(l)].slice(0,5)},[n]),z=ie(()=>({currentTheme:h,currentColors:g,preferences:r,setTherapeuticTheme:f,setColorMode:y,setIntensity:b,setAccessibilityLevel:j,setColorOverride:N,resetCustomizations:w,getContrastRatio:v,isAccessibilityCompliant:x,exportTheme:k,importTheme:I,getMoodBasedColors:A,getCrisisSafeColors:M,getTherapeuticRecommendations:L}),[h,g,r,f,y,b,j,N,w,v,x,k,I,A,M,L]);return m.jsx(S.Provider,{value:z,children:e})},le={isOnline:navigator.onLine,isServiceWorkerSupported:"serviceWorker"in navigator,isServiceWorkerRegistered:!1,serviceWorkerStatus:"not_registered",lastSync:null,crisisResourcesAvailable:!1,offlineCapabilities:[],connectionQuality:"offline"},oe=[{feature:"Crisis Resources",available:!1,description:"Emergency contacts and crisis intervention resources",fallbackAction:"Access cached crisis resources"},{feature:"Safety Plan",available:!1,description:"Personal safety planning tools",fallbackAction:"Use offline safety plan template"},{feature:"Coping Strategies",available:!1,description:"Self-help and coping technique resources",fallbackAction:"Browse cached coping strategies"},{feature:"Community Posts",available:!1,description:"View and create community posts",fallbackAction:"Queue posts for when online"},{feature:"AI Assistant",available:!1,description:"AI-powered mental health support",fallbackAction:"Use offline guidance resources"},{feature:"Helper Chat",available:!1,description:"Real-time chat with certified helpers",fallbackAction:"Queue messages for when online"}],ce=h.createContext(void 0),de=({children:e})=>{const{connectionStatus:s,updateCrisisResources:t,forceCacheUpdate:a,sendMessageToServiceWorker:n}=(()=>{const[e,s]=h.useState(le),[t,a]=h.useState(null),n=h.useCallback(()=>{if(!navigator.onLine)return"offline";const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const{effectiveType:s,downlink:t}=e;return"4g"===s?"excellent":"3g"===s?"good":"poor"}return"good"},[]),i=h.useCallback(()=>u(null,null,function*(){if(!("caches"in window))return!1;try{const e=yield caches.open("astral-core-crisis-v1"),s=yield e.keys(),t=["/crisis-resources.json","/emergency-contacts.json","/offline-coping-strategies.json"],a=s.map(e=>new URL(e.url).pathname);return t.every(e=>a.some(s=>s.includes(e)))}catch(e){return!1}}),[]),r=h.useCallback((e,t)=>u(null,null,function*(){const a=oe.map(s=>{switch(s.feature){case"Crisis Mode":return o(l({},s),{available:e});case"Message Queue":return o(l({},s),{available:t});case"Real-time Chat":return o(l({},s),{available:!1});default:return s}});s(e=>o(l({},e),{offlineCapabilities:a}))}),[]),c=h.useCallback(e=>{const{type:t,data:a,timestamp:n}=e.data;switch(t){case"crisis-resources-cached":s(e=>o(l({},e),{crisisResourcesAvailable:!0,lastSync:new Date(n)}));break;case"offline-capabilities-updated":(null==a?void 0:a.capabilities)&&s(e=>o(l({},e),{offlineCapabilities:a.capabilities}));break;case"sync-completed":s(e=>o(l({},e),{lastSync:new Date(n)}));break;case"cache-updated":i().then(e=>{s(s=>o(l({},s),{crisisResourcesAvailable:e}))})}},[i]);h.useEffect(()=>{if("serviceWorker"in navigator)return u(null,null,function*(){try{const e=yield navigator.serviceWorker.getRegistration();if(e){a(e);const t=e=>{e&&s(s=>o(l({},s),{isServiceWorkerRegistered:!0,serviceWorkerStatus:e.state}))};e.installing?(t(e.installing),e.installing.addEventListener("statechange",()=>t(e.installing))):e.waiting?(t(e.waiting),e.waiting.addEventListener("statechange",()=>t(e.waiting))):e.active&&(t(e.active),e.active.addEventListener("statechange",()=>t(e.active))),navigator.serviceWorker.addEventListener("message",c)}}catch(e){}}),()=>{navigator.serviceWorker.removeEventListener("message",c)}},[c]),h.useEffect(()=>{const e=()=>{s(e=>o(l({},e),{isOnline:!0,connectionQuality:n()}))},t=()=>{s(e=>o(l({},e),{isOnline:!1,connectionQuality:"offline"}))};return window.addEventListener("online",e),window.addEventListener("offline",t),s(e=>o(l({},e),{connectionQuality:n()})),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[n]),h.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e){const t=()=>{s(e=>o(l({},e),{connectionQuality:n()}))};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}},[n]),h.useEffect(()=>{i().then(e=>{s(s=>{const t=o(l({},s),{crisisResourcesAvailable:e});return r(e,s.isServiceWorkerRegistered),t})})},[i,r]);const d=h.useCallback(e=>u(null,null,function*(){if(!(null==t?void 0:t.active))return!1;try{return t.active.postMessage(e),!0}catch(s){return!1}}),[t]);return{connectionStatus:e,updateCrisisResources:h.useCallback(()=>u(null,null,function*(){return d({type:"update-crisis-resources",timestamp:Date.now()})}),[d]),forceCacheUpdate:h.useCallback(()=>u(null,null,function*(){return d({type:"force-cache-update",timestamp:Date.now()})}),[d]),sendMessageToServiceWorker:d}})(),i=e=>{if(s.isOnline)return!0;const t=s.offlineCapabilities.find(s=>s.feature.toLowerCase()===e.toLowerCase());return(null==t?void 0:t.available)||!1},r=e=>s.offlineCapabilities.find(s=>s.feature.toLowerCase()===e.toLowerCase()),c=h.useMemo(()=>({connectionStatus:s,updateCrisisResources:t,forceCacheUpdate:a,sendMessageToServiceWorker:n,isFeatureAvailable:i,getOfflineCapability:r}),[s,t,a,n,i,r]);return m.jsx(ce.Provider,{value:c,children:e})},ue=(e={})=>{const s=h.useRef(null),{attachListeners:t,detachListeners:a,isTracking:n}=((e={})=>{const{threshold:s=50,velocityThreshold:t=.3,preventDefaultTouchMove:a=!1,onSwipeLeft:n,onSwipeRight:i,onSwipeUp:r,onSwipeDown:l,onSwipe:o}=e,c=h.useRef(null),d=h.useRef(null),u=h.useRef(0),m=h.useRef(!1),[p,g]=h.useState(!1),v=e=>{if(1!==e.touches.length)return;const s=e.touches[0];c.current={x:s.clientX,y:s.clientY},d.current=null,u.current=Date.now(),m.current=!0,g(!0)},x=e=>{if(!m.current||!c.current||1!==e.touches.length)return;a&&e.preventDefault();const s=e.touches[0];d.current={x:s.clientX,y:s.clientY}},f=()=>{if(!c.current||!m.current)return m.current=!1,g(!1),c.current=null,void(d.current=null);const e=d.current||c.current,a=e.x-c.current.x,h=e.y-c.current.y,p=Math.sqrt(a*a+h*h),v=Date.now()-u.current,x=v>0?p/v:0;if(m.current=!1,g(!1),c.current=null,d.current=null,p<s||x<t)return;let f=null;f=Math.abs(a)>Math.abs(h)?a>0?"right":"left":h>0?"down":"up";const y={direction:f,distance:p,velocity:x,duration:v};switch(null==o||o(y),f){case"left":null==n||n(y);break;case"right":null==i||i(y);break;case"up":null==r||r(y);break;case"down":null==l||l(y)}};return{attachListeners:e=>{e.addEventListener("touchstart",v,{passive:!0}),e.addEventListener("touchmove",x,{passive:!a}),e.addEventListener("touchend",f,{passive:!0})},detachListeners:e=>{e.removeEventListener("touchstart",v),e.removeEventListener("touchmove",x),e.removeEventListener("touchend",f)},isTracking:p}})(e);return h.useEffect(()=>{const e=s.current;if(e)return t(e),()=>{a(e)}},[t,a]),{ref:s,isTracking:n}},he=(e,s={})=>{const{threshold:t=80,resistance:a=.5,enabled:n=!0}=s,[i,r]=h.useState(!1),[l,o]=h.useState(0),[c,d]=h.useState(!1),m=h.useRef(null),p=h.useRef(null),g=h.useRef(null),v=h.useRef(0),x=h.useRef(!1);return h.useEffect(()=>{const s=m.current;if(!s||!n)return;const i=e=>{if(1!==e.touches.length||x.current)return;const t=e.touches[0],a=s.scrollTop||window.scrollY;a<=0&&(p.current={x:t.clientX,y:t.clientY,scrollTop:a})},l=e=>{if(!p.current||x.current||1!==e.touches.length)return;const n=e.touches[0];g.current={x:n.clientX,y:n.clientY};const i=n.clientY-p.current.y;if((s.scrollTop||window.scrollY)<=0&&i>0){const s=Math.min(i*a,1.5*t);v.current=s,o(s),r(s>10),s>20&&e.preventDefault()}},c=()=>u(null,null,function*(){if(p.current&&g.current&&!x.current)if(v.current>=t&&!x.current){x.current=!0,d(!0);try{yield e()}finally{x.current=!1,d(!1),h()}}else h();else h()}),h=()=>{v.current=0,o(0),r(!1),p.current=null,g.current=null};return s.addEventListener("touchstart",i,{passive:!0}),s.addEventListener("touchmove",l,{passive:!1}),s.addEventListener("touchend",c,{passive:!0}),s.addEventListener("touchcancel",h,{passive:!0}),()=>{s.removeEventListener("touchstart",i),s.removeEventListener("touchmove",l),s.removeEventListener("touchend",c),s.removeEventListener("touchcancel",h)}},[n,t,a,e]),{ref:m,isPulling:i,pullDistance:l,isRefreshing:c,pullProgress:Math.min(l/t,1)}},me=h.memo(({path:e,className:s,size:t=24,style:a})=>m.jsx("svg",{className:s,width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:a,"aria-hidden":"true",children:m.jsx("path",{d:e})}));me.displayName="Icon";const pe=(e,s)=>{const t=h.memo(s=>m.jsx(me,l({path:e},s)));return t.displayName=s,t},ge=(e,s)=>{const t=h.lazy(()=>u(null,null,function*(){const{default:s}=yield e();return{default:e=>m.jsx(me,l({path:s},e))}})),a=h.memo(e=>m.jsx(h.Suspense,{fallback:m.jsx("div",{style:{width:e.size||24,height:e.size||24}}),children:m.jsx(t,l({},e))}));return a.displayName=s,a},ve=pe("M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z","HeartIcon"),xe=pe("M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z","CloseIcon"),fe=pe("M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z","BackIcon"),ye=pe("M24 2l-4 14.5-7.5-3.5L8 20l-6-8 14.5-4L24 2z","SendIcon"),be=pe("M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z","CheckIcon"),je=pe("M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z","AlertIcon"),Ne=pe("M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z","PhoneIcon"),we=pe("M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.7L16.2,16.2Z","Clock"),Ce=we,Se=pe("M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z","X"),ke=pe("M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z","XCircleIcon"),Ie=pe("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z","CheckCircleIcon"),Ae=pe("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z","AlertCircleIcon"),Me=pe("M22 12h-4l-3 9L9 3l-3 9H2","ActivityIcon"),Le=pe("M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71","LinkIcon"),ze=pe("M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z","Phone"),Ee=pe("M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z","MessageCircle"),De=pe("M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6m4-3h6v6m-11 5L18 3","ExternalLink"),_e=pe("M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z","AlertTriangle"),Te=pe("M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5z","LogoutIcon"),Re=pe("M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z","CertifiedIcon"),Oe=pe("M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z","PostsIcon"),He=pe("M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z","GuidelinesIcon"),Pe=pe("M12 3l1.09 3.26L16 9l-2.91 2.74L14.18 15 12 13.27 9.82 15l1.09-3.26L8 9l2.91-2.74L12 3z","LegalIcon"),Ve=pe("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z","HelperIcon"),$e=pe("M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z","MyPostsIcon"),Be=pe("M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z","QuietSpaceIcon"),Fe=pe("M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z","LockIcon"),We=pe("M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z","SearchIcon"),Ue=pe("M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z","BellIcon"),qe=pe("M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z","ThumbsUpIcon"),Ge=pe("M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z","KudosIcon");pe("M5 16L3 5l5.5 4L12 4l3.5 5L21 5l-2 11H5zm2.7-2h8.6l.9-5.4-2.1 1.7L12 8l-3.1 2.3-2.1-1.7L7.7 14z","AchievementsIcon");const Ye=pe("M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z","MessageCircleIcon"),Je=pe("M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z","StarIcon"),Qe=pe("M8 5v14l11-7z","PlayIcon"),Ke=pe("M6 19h4V5H6v14zm8-14v14h4V5h-4z","PauseIcon");pe("M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z","MicOnIcon");const Xe=pe("M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28zm-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18l5.98 5.99zM4.27 3L3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73 4.27 3z","MicOffIcon");pe("M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z","VideoOnIcon"),pe("M21 6.5l-4 4V7c0-.55-.45-1-1-1H9.82l-2-2H16c.55 0 1 .45 1 1v.5l4-4v11l-2.61-2.61L21 6.5zM3.27 2L2 3.27 4.73 6H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.21 0 .39-.08.55-.18L19.73 21 21 19.73 3.27 2zM15 16H5V8h1.73l8 8H15z","VideoOffIcon"),pe("M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.68.28-.53 0-.96-.43-.96-.96V9.72C2.21 6.27 6.82 3.5 12 3.5s9.79 2.77 10.46 6.22v5.17c0 .53-.43.96-.96.96-.25 0-.5-.09-.68-.28-.79-.73-1.68-1.36-2.66-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z","HangUpIcon");const Ze=pe("M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z","VolumeIcon"),es=pe("M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z","CommentIcon"),ss=pe("M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z","PlusIcon");pe("M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z","MusicIcon"),pe("M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z","MenuIcon");const ts=pe("M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z","UsersIcon"),as=pe("M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.44,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z","SettingsIcon"),ns=pe("M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z","ChatIcon"),is=pe("M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z","VideoIcon"),rs=pe("M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z","ShareIcon"),ls=pe("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.41 14.59L12 13.17l-3.41 3.42-1.41-1.41L10.59 12 7.17 8.59l1.41-1.41L12 10.83l3.41-3.42 1.41 1.41L13.41 12l3.42 3.41-1.42 1.18z","AICompanionIcon"),os=pe("M9 11H7v3h2v-3zm4 0h-2v3h2v-3zm4 0h-2v3h2v-3zm-4-1V7h-2v3h2zm4 0V7h-2v3h2zm-8 0V7H7v3h2z","SparkleIcon"),cs=pe("M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z","WellnessIcon"),ds=pe("M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z","CrisisIcon"),us=pe("M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z","SafetyPlanIcon"),hs=pe("M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1Z","ShieldIcon"),ms=pe("M2 12l2-2v5h4l2-2V8l3 3v4h3l2-2V8l2 2","TrendingUpIcon"),ps=pe("M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z","RefreshIcon"),gs=pe("M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z","DownloadIcon"),vs=pe("M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z","UploadIcon"),xs=pe("M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z","SunIcon");pe("M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z","MoonIcon"),pe("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zm4 0c-.28 0-.5-.22-.5-.5s.22-.5.5-.5.5.22.5.5-.22.5-.5.5zm1.5-4.5H8.5c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h7c.28 0 .5.22.5.5s-.22.5-.5.5z","SmileIcon"),pe("M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z","CloudIcon"),pe("M7.5 5.6L10 7 8.6 4.5C8.2 3.9 7.5 3.9 7.1 4.5L5.5 7l2.5-1.4zm4.5 5.9L8.6 12l2.4-2.4c.6-.6.6-1.5 0-2.1-.6-.6-1.5-.6-2.1 0L6.5 10 9 7.6l3.4 3.4z","TagIcon");const fs=pe("M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z","UserIcon"),ys=pe("M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z","HomeIcon");pe("M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z","HistoryIcon"),pe("M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z","TrashIcon"),pe("M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z","FilterIcon"),pe("M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z","ChevronRightIcon"),pe("M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z","WarningIcon"),pe("M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z","MoreIcon"),pe("M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z","MessageIcon"),pe("M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z","CalendarIcon");const bs=ge(()=>R(()=>Promise.resolve().then(()=>_t),void 0),"BookIcon"),js=ge(()=>R(()=>Promise.resolve().then(()=>Tt),void 0),"BookmarkIcon"),Ns=ge(()=>R(()=>Promise.resolve().then(()=>Rt),void 0),"ClipboardCheckIcon");ge(()=>R(()=>Promise.resolve().then(()=>Ot),void 0),"CopyIcon");const ws=ge(()=>R(()=>Promise.resolve().then(()=>Ht),void 0),"DashboardIcon"),Cs=ge(()=>R(()=>Promise.resolve().then(()=>Pt),void 0),"FeedIcon");ge(()=>R(()=>Promise.resolve().then(()=>Vt),void 0),"GoogleIcon"),ge(()=>R(()=>Promise.resolve().then(()=>$t),void 0),"AppleIcon");const Ss=({value:e,duration:s=500,formatter:t=e=>e.toString(),className:a=""})=>{const[n,i]=h.useState(e),[r,l]=h.useState(!1);return h.useEffect(()=>{if(n===e)return;l(!0);const t=n,a=e-t,r=Date.now(),o=()=>{const e=Date.now()-r,n=Math.min(e/s,1),c=1-Math.pow(1-n,3),d=Math.round(t+a*c);i(d),n<1?requestAnimationFrame(o):l(!1)};requestAnimationFrame(o)},[e,s,n]),m.jsx("output",{className:`animated-number${r?" animating":""} ${a}`,"aria-live":"polite","aria-label":`Current value: ${t(n)}`,children:t(n)})};Ss.displayName="AnimatedNumber";const ks=({view:e,icon:s,label:t,hasNotification:a,onClick:n,activeView:i,setActiveView:r,isMobile:l=!1})=>m.jsx("li",{className:"nav-item",children:m.jsxs("button",{onClick:s=>{s.preventDefault(),n?n():r({view:e})},onKeyDown:s=>{"Enter"===s.key&&(s.preventDefault(),n?n():r({view:e}))},className:`nav-link touch-optimized ${i.view===e?"active":""} ${l?"mobile-nav-link":""}`,"aria-current":i.view===e?"page":void 0,type:"button",children:[m.jsx("span",{className:"nav-icon","aria-hidden":"true",children:s}),m.jsx("span",{className:"nav-label",children:t}),a&&m.jsx("output",{className:"notification-dot","aria-label":"Has new notifications"})]})});ks.displayName="NavItem";const Is=({activeView:e,setActiveView:s,userToken:t,onlineHelperCount:a,isMobile:n=!1,onNavigation:i})=>{const{t:r}=g(),{hasUnreadNotifications:c}=D(),d=e=>{s(e),n&&i&&i()},u=s=>m.jsx(ks,o(l({},s),{activeView:e,setActiveView:d,isMobile:n}));return m.jsxs("div",{className:"seeker-sidebar",children:[m.jsx("nav",{className:"sidebar-nav-container",role:"navigation","aria-label":"Main navigation",children:m.jsxs("ul",{className:"sidebar-nav",children:[m.jsx("li",{className:"nav-section-header","aria-hidden":"true",children:m.jsx("span",{className:"section-title",children:"My Dashboard"})}),u({view:"starkeeper-dashboard",icon:m.jsx(as,{}),label:"My Wellness Dashboard"}),m.jsx("li",{className:"nav-section-header","aria-hidden":", true",children:m.jsx("span",{className:"section-title",children:"My Tools"})}),u({view:"share",icon:m.jsx(rs,{}),label:r("navigation.share")}),u({view:"my-activity",icon:m.jsx($e,{}),label:r("navigation.my_activity")}),u({view:"ai-chat",icon:m.jsx(AICompanionIcon,{}),label:r("navigation.ai_chat")}),u({view:"safety-plan",icon:m.jsx(us,{}),label:r("navigation.my_safety_plan")}),u({view:"wellness-tracking",icon:m.jsx(cs,{}),label:"My Wellness"}),u({view:"tether",icon:m.jsx(ve,{}),label:"Astral Tether"}),u({view:"assessments",icon:m.jsx(Ns,{}),label:"Assessments"}),m.jsx("li",{className:"nav-section-header","aria-hidden":", true",children:m.jsx("span",{className:"section-title",children:"Community"})}),u({view:"feed",icon:m.jsx(Cs,{}),label:r("navigation.community_feed"),hasNotification:c}),u({view:"reflections",icon:m.jsx(os,{}),label:r("navigation.reflections")}),m.jsx("li",{className:"nav-section-header","aria-hidden":"true",children:m.jsx("span",{className:"section-title",children:"Resources"})}),u({view:"wellness-videos",icon:m.jsx(is,{}),label:r("navigation.wellness_videos")}),u({view:"crisis",icon:m.jsx(ds,{}),label:r("navigation.get_help_now")}),u({view:"quiet-space",icon:m.jsx(Be,{}),label:r("navigation.quiet_space")}),u({view:"donation",icon:m.jsx(ve,{}),label:r("navigation.donate")}),m.jsx("li",{className:"nav-separator","aria-hidden":"true"}),t&&u({view:"moderation-history",icon:m.jsx(Pe,{}),label:r("navigation.moderation_history")}),u({view:"guidelines",icon:m.jsx(He,{}),label:r("navigation.guidelines")}),u({view:"legal",icon:m.jsx(Pe,{}),label:r("navigation.legal")}),u({view:"login",icon:m.jsx(Ve,{}),label:r("navigation.helper_login")}),u({view:"settings",icon:m.jsx(as,{}),label:r("navigation.settings")})]})}),m.jsxs("div",{className:"sidebar-footer",children:[m.jsxs("output",{className:"online-status","aria-live":"polite",children:[m.jsx(ts,{"aria-hidden":"true"}),m.jsxs("span",{className:"online-status-text",children:[m.jsx(Ss,{value:a}),m.jsx("span",{className:"sr-only",children:"helpers"}),m.jsxs("span",{"aria-hidden":"true",children:[" Helper",1!==a?"s":""]}),m.jsx("span",{children:" Online"})]})]}),n&&m.jsx("div",{className:"mobile-sidebar-hint",children:m.jsx("span",{className:"hint-text",children:"Swipe left or tap outside to close"})})]})]})};Is.displayName="SeekerSidebar";const As={en:{rtl:!1,mentalHealthStigma:"medium",familyInvolvement:"medium",communitySupport:"medium",religiousContext:"mixed",crisisEscalationPreference:"professional",preferredCommunicationStyle:"direct"},es:{rtl:!1,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"high",religiousContext:"christian",crisisEscalationPreference:"family",preferredCommunicationStyle:"familial"},"pt-BR":{rtl:!1,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"high",religiousContext:"christian",crisisEscalationPreference:"community",preferredCommunicationStyle:"indirect"},"pt-PT":{rtl:!1,mentalHealthStigma:"medium",familyInvolvement:"medium",communitySupport:"medium",religiousContext:"christian",crisisEscalationPreference:"professional",preferredCommunicationStyle:"formal"},ar:{rtl:!0,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"high",religiousContext:"islamic",crisisEscalationPreference:"family",preferredCommunicationStyle:"indirect"},zh:{rtl:!1,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"medium",religiousContext:"mixed",crisisEscalationPreference:"family",preferredCommunicationStyle:"indirect"},vi:{rtl:!1,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"high",religiousContext:"buddhist",crisisEscalationPreference:"community",preferredCommunicationStyle:"indirect"},tl:{rtl:!1,mentalHealthStigma:"high",familyInvolvement:"high",communitySupport:"high",religiousContext:"christian",crisisEscalationPreference:"family",preferredCommunicationStyle:"familial"}},Ms=(e,s)=>u(null,null,function*(){try{return(yield((e,s,t)=>{const a=e[s];return a?"function"==typeof a?a():Promise.resolve(a):new Promise((e,a)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+s+(s.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"./locales/ar/common.json":()=>R(()=>import("./common-DKFTM35m.js"),[]),"./locales/ar/crisis.json":()=>R(()=>import("./crisis-BiyP1DTw.js"),[]),"./locales/en/analytics.json":()=>R(()=>import("./analytics-CaRf5C7Q.js"),[]),"./locales/en/common.json":()=>R(()=>import("./common-DEMkF5t1.js"),[]),"./locales/en/crisis.json":()=>R(()=>import("./crisis-BGs72Qx5.js"),[]),"./locales/es/common.json":()=>R(()=>import("./common-BrZeGmZg.js"),[]),"./locales/es/crisis.json":()=>R(()=>import("./crisis-QPAR2coK.js"),[]),"./locales/pt/common.json":()=>R(()=>import("./common-OZ5K9vL3.js"),[]),"./locales/pt/crisis.json":()=>R(()=>import("./crisis-CDthWAAC.js"),[]),"./locales/tl/common.json":()=>R(()=>import("./common-BayeSpY8.js"),[]),"./locales/tl/crisis.json":()=>R(()=>import("./crisis-CglBvZ1P.js"),[]),"./locales/vi/common.json":()=>R(()=>import("./common-D7AnflGw.js"),[]),"./locales/vi/crisis.json":()=>R(()=>import("./crisis-Bw2az5gW.js"),[]),"./locales/zh/common.json":()=>R(()=>import("./common-BnX3_-w0.js"),[]),"./locales/zh/crisis.json":()=>R(()=>import("./crisis-Dl-I-nMI.js"),[])}),`./locales/${e}/${s}.json`,4)).default}catch(t){return{}}});z.use(E).use(v).init({fallbackLng:"en",debug:!1,detection:{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"astral_language",lookupLocalStorage:"astral_language",lookupSessionStorage:"astral_language",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"],checkWhitelist:!0},interpolation:{escapeValue:!1},defaultNS:"common",ns:["common","crisis"],react:{useSuspense:!1,bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","em"]},supportedLngs:["en","es","pt-BR","pt-PT","ar","zh","vi","tl"],load:"languageOnly",preload:["en","es"],returnEmptyString:!1,returnObjects:!1,saveMissing:!1,missingKeyHandler:(e,s,t)=>{},resources:{en:{common:{navigation:{share:"Share",my_activity:"My Activity",ai_chat:"AI Chat",my_safety_plan:"My Safety Plan",community_feed:"Community Feed",reflections:"Reflections",wellness_videos:"Wellness Videos",get_help_now:"Get Help Now",quiet_space:"Quiet Space",donate:"Donate",moderation_history:"Moderation History",guidelines:"Guidelines",legal:"Legal",helper_login:"Helper Login",settings:"Settings"},share_your_thoughts:"Share Your Thoughts",chat_with_ai_prompt:"Chat with your AI companion to draft a post for the community.",ai_welcome:"Hi there! I'm Astral, your AI companion. I'm here to help you articulate your thoughts for a post. What's on your mind today?",draft_post_from_chat:"Draft Post From Chat",chat_with_ai_here:"Chat with the AI here...",review_your_post:"Review Your Post",review_your_post_subheader:"Your AI companion has drafted this post. Edit it as you see fit before sharing.",category:"Category",your_anonymous_post:"Your anonymous post",back_to_chat:"Back to Chat",submit_anonymously:"Submit Anonymously",post_shared:"Post shared successfully!",post_failed:"Failed to share post. Please try again.","accessibility.language_changed":"Language changed to {language}","languages.en":"English","languages.es":"Spanish","languages.pt":"Portuguese","languages.ar":"Arabic","languages.zh":"Chinese","languages.vi":"Vietnamese","languages.tl":"Tagalog","offline.indicator.ariaLabel":"Offline status indicator","offline.status.initializing":"Initializing...","offline.status.online":"Online","offline.status.offline":"Offline","offline.status.offlineSupported":"Offline (Crisis resources available)","offline.status.offlineUnsupported":"Offline (Limited functionality)","offline.modal.title":"Offline Status","offline.connection.title":"Connection Status","offline.capabilities.title":"Available Features","offline.capabilities.crisisResources":"Crisis resources","offline.capabilities.translations":"Offline translations","offline.capabilities.cultural":"Cultural adaptations","offline.capabilities.aiModels":"Local AI models","offline.storage.title":"Storage Information","offline.storage.used":"Storage used","offline.storage.quota":"Storage quota","offline.network.title":"Network Information","offline.network.type":"Connection type","offline.network.speed":"Connection speed","offline.sync.title":"Sync Status","offline.sync.queued":"Queued items","offline.sync.lastSync":"Last sync","offline.actions.update":"Update offline content","offline.actions.clear":"Clear offline data","offline.help.crisisResources":"Crisis resources available offline","offline.help.sync":"Data will sync when online"}}}});u(null,null,function*(){const e=["en","es","pt","ar","zh","vi","tl"],s=["common","crisis"];for(const a of e)for(const e of s){const s=yield Ms(a,e);Object.keys(s).length>0&&z.addResourceBundle(a,e,s,!0,!0)}const t={common:yield Ms("pt","common"),crisis:yield Ms("pt","crisis")};z.addResourceBundle("pt-BR","common",t.common,!0,!0),z.addResourceBundle("pt-BR","crisis",t.crisis,!0,!0),z.addResourceBundle("pt-PT","common",t.common,!0,!0),z.addResourceBundle("pt-PT","crisis",t.crisis,!0,!0)}).catch(e=>{});const Ls=e=>As[e]||As.en,zs=e=>u(null,null,function*(){yield z.changeLanguage(e);const s=document.documentElement;(e=>Ls(e).rtl)(e)?(s.setAttribute("dir","rtl"),s.setAttribute("lang",e)):(s.setAttribute("dir","ltr"),s.setAttribute("lang",e)),localStorage.setItem("astral_language",e),localStorage.setItem("astral_cultural_context",JSON.stringify(Ls(e)));const t=z.t("accessibility.language_changed",{language:z.t(`languages.${e}`)}),a=document.createElement("div");a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),a.className="sr-only",a.textContent=t,document.body.appendChild(a),setTimeout(()=>{document.body.removeChild(a)},3e3)}),Es=(e,s)=>{const t=z.t(`crisis:${e}`,s);return"string"==typeof t?t:""},Ds=()=>{const{t:e,i18n:s}=g();return{t:e,language:s.language,changeLanguage:zs,getCulturalContext:()=>Ls(s.language),tCrisis:(e,s)=>Es(e,s),tCommon:(e,s)=>((e,s)=>{const t=z.t(`common:${e}`,s);return"string"==typeof t?t:""})(e,s),tCrisisContextual:e=>((e,s=z.language)=>{const t=Ls(s),a=Es(e);switch(t.crisisEscalationPreference){case"family":return Es(`${e}_family_context`)||a;case"community":return Es(`${e}_community_context`)||a;case"professional":return Es(`${e}_professional_context`)||a;default:return a}})(e,s.language),isRTL:Ls(s.language).rtl,mentalHealthStigma:Ls(s.language).mentalHealthStigma,crisisEscalationPreference:Ls(s.language).crisisEscalationPreference,communicationStyle:Ls(s.language).preferredCommunicationStyle,tWithNamespace:(e,t,a)=>s.t(`${e}:${t}`,a)}},_s=({view:e,icon:s,label:t,hasNotification:a,onClick:n,activeView:i,setActiveView:r,isMobile:l=!1})=>m.jsx("li",{className:"nav-item",children:m.jsxs("button",{onClick:s=>{s.preventDefault(),n?n():r({view:e})},onKeyDown:s=>{"Enter"===s.key&&(s.preventDefault(),n?n():r({view:e}))},className:`nav-link touch-optimized ${i.view===e?"active":""} ${l?"mobile-nav-link":""}`,"aria-current":i.view===e?"page":void 0,type:"button",children:[m.jsx("span",{className:"nav-icon","aria-hidden":", true",children:s}),m.jsx("span",{className:"nav-label",children:t}),a&&m.jsx("output",{className:"notification-dot","aria-label":"Has new notifications"})]})});_s.displayName="NavItem";const Ts=({activeView:e,setActiveView:s,onLogout:t,helperProfile:a,onlineHelperCount:n,isMobile:i=!1,onNavigation:r})=>{const c=e=>{s(e),i&&r&&r()},d=s=>m.jsx(_s,o(l({},s),{activeView:e,setActiveView:c,isMobile:i}));return m.jsxs("div",{className:"helper-sidebar "+(i?"mobile-helper-sidebar":"desktop-helper-sidebar"),children:[m.jsxs("div",{className:"helper-profile",children:[m.jsx("div",{className:"helper-avatar",children:m.jsx(Re,{})}),m.jsxs("div",{className:"helper-info",children:[m.jsx("h3",{className:"helper-name",children:a.displayName}),m.jsx("span",{className:"helper-status",children:"Certified Helper"})]})]}),m.jsx("nav",{className:"sidebar-nav-container",role:"navigation","aria-label":"Helper navigation",children:m.jsxs("ul",{className:"sidebar-nav",children:[m.jsx("li",{className:"nav-section-header","aria-hidden":"true",children:m.jsx("span",{className:"section-title",children:"Helper Dashboard"})}),d({view:"constellation-guide-dashboard",icon:m.jsx(ws,{}),label:z.t("dashboard")}),d({view:"helper-chats",icon:m.jsx(ns,{}),label:"Active Chats"}),d({view:"helper-posts",icon:m.jsx(Oe,{}),label:"Community Posts"}),d({view:"helper-application",icon:m.jsx(Re,{}),label:"Certification"}),d({view:"helper-community",icon:m.jsx(ts,{}),label:"Helper Community"}),"Moderator"===(null==a?void 0:a.role)&&d({view:"moderation-dashboard",icon:m.jsx(Pe,{}),label:"Moderation Dashboard"}),"Admin"===(null==a?void 0:a.role)&&d({view:"admin-dashboard",icon:m.jsx(as,{}),label:"Admin Panel"}),d({view:"workflow-demo",icon:m.jsx(Oe,{}),label:"Workflow Demo"}),m.jsx("li",{className:"nav-separator","aria-hidden":"true"}),d({view:"guidelines",icon:m.jsx(He,{}),label:z.t("guidelines")}),d({view:"legal",icon:m.jsx(Pe,{}),label:z.t("legal")}),d({view:"settings",icon:m.jsx(as,{}),label:z.t("settings")}),m.jsx("li",{className:"nav-item",children:m.jsxs("button",{onClick:()=>{t(),i&&r&&r()},className:"nav-link touch-optimized logout-button "+(i?"mobile-nav-link":""),type:"button",children:[m.jsx("span",{className:"nav-icon","aria-hidden":"true",children:m.jsx(Te,{})}),m.jsx("span",{className:"nav-label",children:z.t("logout")})]})})]})}),m.jsxs("div",{className:"sidebar-footer",children:[m.jsxs("output",{className:"online-status","aria-live":"polite",children:[m.jsx(ts,{"aria-hidden":"true"}),m.jsxs("span",{className:"online-status-text",children:[m.jsx(Ss,{value:n}),m.jsx("span",{className:"sr-only",children:"helpers"}),m.jsxs("span",{"aria-hidden":"true",children:[" Helper",1!==n?"s":""]}),m.jsx("span",{children:" Online"})]})]}),i&&m.jsx("div",{className:"mobile-sidebar-hint",children:m.jsx("span",{className:"hint-text",children:"Swipe left or tap outside to close"})})]})]})};Ts.displayName="HelperSidebar";const Rs=x.memo(()=>{const{isAuthenticated:e,isAnonymous:s,login:t,logout:a,helperProfile:n,userToken:i,anonymousId:r}=(()=>{const e=h.useContext(X);if(void 0===e)throw new Error("useOptionalAuth must be used within an OptionalAuthProvider");return e})(),l=f(),o=y(),[c,d]=h.useState({view:"wellness-tracking"});h.useEffect(()=>{const e={"/wellness":"wellness-tracking","/dashboard":"dashboard","/ai-chat":"ai-chat","/crisis":"crisis","/feed":"feed","/reflections":"reflections","/safety-plan":"safety-plan","/settings":"settings","/peer-support":"peer-support","/tether":"tether","/assessments":"assessments","/wellness-videos":"wellness-videos"}[o.pathname];e&&d({view:e})},[o.pathname]);const u=e=>{if("login"===e.view)return void t();d(e);const s={"wellness-tracking":"/wellness","starkeeper-dashboard":"/dashboard",dashboard:"/dashboard","ai-chat":"/ai-chat",crisis:"/crisis",feed:"/feed",reflections:"/reflections","safety-plan":"/safety-plan",settings:"/settings","peer-support":"/peer-support",tether:"/tether",assessments:"/assessments","wellness-videos":"/wellness-videos","quiet-space":"/quiet-space",share:"/feed","my-activity":"/profile",guidelines:"/help",legal:"/legal",donation:"/about"};s[e.view]&&l(s[e.view])};return m.jsxs("aside",{className:"sidebar",children:[m.jsxs("div",{className:"sidebar-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[m.jsx("span",{children:"Astral Core"}),s&&m.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:m.jsx("button",{className:"signin-btn optional",onClick:t,title:"Sign in to save your data online (optional)",style:{padding:"0.25rem 0.75rem",fontSize:"0.875rem",background:"transparent",color:"var(--text-secondary)",border:"1px solid var(--border-color)",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#667eea",e.currentTarget.style.color="#667eea"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border-color)",e.currentTarget.style.color="var(--text-secondary)"},children:"Sign In"})}),e&&m.jsx("button",{className:"signout-btn",onClick:a,style:{padding:"0.25rem 0.75rem",fontSize:"0.875rem",background:"transparent",color:"var(--text-secondary)",border:"1px solid var(--border-color)",borderRadius:"15px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#ef4444",e.currentTarget.style.color="#ef4444"},onMouseLeave:e=>{e.currentTarget.style.borderColor="var(--border-color)",e.currentTarget.style.color="var(--text-secondary)"},children:"Sign Out"})]}),e&&n?m.jsx(Ts,{activeView:c,setActiveView:u,onLogout:a,helperProfile:n,onlineHelperCount:12}):m.jsx(Is,{activeView:c,setActiveView:u,userToken:i||r,onlineHelperCount:12,isAnonymous:s})]})});Rs.displayName="Sidebar";const Os=({showWhenOnline:e=!1,autoDismiss:s=!1,autoDismissDelay:t=5e3,onDismiss:a,className:n=""})=>{const{connectionStatus:i}=(()=>{const e=h.useContext(ce);if(void 0===e)throw new Error("useOffline must be used within an OfflineProvider");return e})(),{isOnline:r,connectionQuality:l,crisisResourcesAvailable:o,serviceWorkerStatus:c}=i;if(h.useEffect(()=>{if(s&&r&&a){const e=setTimeout(a,t);return()=>clearTimeout(e)}},[s,r,a,t]),r&&!e)return null;const d=r?"poor"===l?{type:"poor-connection",icon:m.jsx(je,{}),title:"Slow connection detected",message:"Some features may load slowly. Crisis resources are prioritized.",actionText:"Optimize Connection",severity:"warning"}:{type:"online",icon:m.jsx(be,{}),title:"Connection restored",message:"All features are now available.",actionText:"Continue",severity:"success"}:{type:"offline",icon:m.jsx(je,{}),title:"You're offline",message:o?"Crisis resources and emergency contacts are still available.":"Some features may not be available.",actionText:o?"View Crisis Resources":"Try Again",severity:o?"warning":"error"};return m.jsx("div",{className:`network-banner network-banner--${d.severity} ${n}`,role:"alert","aria-live":"polite",children:m.jsxs("div",{className:"network-banner__content",children:[m.jsxs("div",{className:"network-banner__main",children:[m.jsx("div",{className:"network-banner__icon",children:d.icon}),m.jsxs("div",{className:"network-banner__text",children:[m.jsx("div",{className:"network-banner__title",children:d.title}),m.jsx("div",{className:"network-banner__message",children:d.message})]})]}),m.jsxs("div",{className:"network-banner__meta",children:[!r&&o&&m.jsxs("div",{className:"crisis-available",children:[m.jsx(Ne,{}),m.jsx("span",{children:"Emergency contacts available"})]}),!r&&"active"===c&&m.jsxs("div",{className:"offline-mode",children:[m.jsx("span",{className:"offline-mode__indicator"}),m.jsx("span",{children:"Offline mode active"})]})]}),m.jsxs("div",{className:"network-banner__actions",children:[m.jsx("button",{className:"network-banner__action network-banner__action--primary",onClick:()=>{"offline"===d.type&&o?window.location.href="/crisis":a&&a()},children:d.actionText}),a&&m.jsx("button",{className:"network-banner__action network-banner__action--secondary",onClick:a,"aria-label":"Dismiss notification",children:"×"})]})]})})},Hs=()=>{const{updateAvailable:e,isOfflineReady:s,skipWaiting:t,cacheStatus:a}=(()=>{const[e,s]=h.useState(navigator.onLine),[t,a]=h.useState(!1),[n,i]=h.useState(!1),[r,l]=h.useState(null),o=h.useCallback(()=>{s(!0)},[]),c=h.useCallback(()=>{s(!1)},[]),d=h.useCallback(()=>{i(!0)},[]),m=h.useCallback(()=>u(null,null,function*(){try{const e=yield k.isOfflineReady();a(e)}catch(e){a(!1)}}),[]),p=h.useCallback(()=>u(null,null,function*(){try{const e=yield k.getCacheStatus();l(e)}catch(e){}}),[]),g=h.useCallback(()=>u(null,null,function*(){try{yield k.skipWaiting(),i(!1)}catch(e){}}),[]),v=h.useCallback(()=>u(null,null,function*(){try{const e=yield k.checkForUpdates();return yield p(),e}catch(e){return!1}}),[p]),x=h.useCallback(()=>u(null,null,function*(){try{const e=yield k.clearCache();return e&&(yield p(),yield m()),e}catch(e){return!1}}),[p,m]),f=h.useCallback(e=>u(null,null,function*(){try{const s=yield k.cacheCrisisResource(e);return s&&(yield p(),yield m()),s}catch(s){return!1}}),[p,m]),y=h.useCallback(()=>u(null,null,function*(){try{yield k.precacheCrisisResources(),yield p(),yield m()}catch(e){}}),[p,m]),b=h.useCallback(()=>{k.forceReload()},[]);return h.useEffect(()=>(k.onOnline(o),k.onOffline(c),k.onUpdateAvailable(d),p(),m(),()=>{k.removeOnlineListener(o),k.removeOfflineListener(c),k.removeUpdateListener(d)}),[o,c,d,p,m]),h.useEffect(()=>{const t=k.getNetworkStatus();t.isOnline!==e&&s(t.isOnline)},[e]),{isOnline:e,isOfflineReady:t,updateAvailable:n,cacheStatus:r,skipWaiting:g,checkForUpdates:v,clearCache:x,cacheCrisisResource:f,precacheCrisisResources:y,forceReload:b}})(),[n,i]=h.useState(!1),[r,l]=h.useState(!1);if(!e&&!s)return null;return m.jsxs("div",{className:"sw-update-container",children:[m.jsxs("div",{className:"sw-update-header",children:[m.jsxs("div",{className:"sw-update-title",children:[m.jsx("svg",{className:"sw-update-icon",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),e?"Update Available":"Ready for Offline"]}),m.jsx("button",{className:"sw-update-btn-secondary",onClick:()=>i(!n),style:{padding:"4px 8px",fontSize:"12px"},children:n?"Hide":"Details"})]}),m.jsx("div",{className:"sw-update-message",children:e?"A new version of Astral Core is available with improvements and bug fixes.":"Astral Core is now ready to work offline."}),m.jsx("div",{className:"sw-update-actions",children:e?m.jsxs("div",{style:{display:"flex",gap:"8px"},children:[m.jsx("button",{className:"sw-update-btn sw-update-btn-primary",onClick:()=>u(null,null,function*(){l(!0),yield t()}),disabled:r,children:r?"Updating...":"Update Now"}),m.jsx("button",{className:"sw-update-btn sw-update-btn-secondary",onClick:()=>window.location.reload(),children:"Later"})]}):s?m.jsx("button",{className:"sw-update-btn sw-update-btn-primary",onClick:()=>window.location.reload(),children:"Got it"}):null}),n&&a&&m.jsxs("div",{className:"sw-update-details",children:[m.jsxs("div",{className:"status-item",children:[m.jsx("span",{className:"status-label",children:"Cache Version:"}),m.jsx("span",{className:"status-value",children:a.cacheVersion||"N/A"})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{className:"status-label",children:"Cache Ready:"}),m.jsx("span",{className:"status-value",children:a.staticResources?"✅":"⏳"})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{className:"status-label",children:"Service Worker:"}),m.jsx("span",{className:"status-value",children:a.swRegistered?"✅ Active":"❌ Inactive"})]}),m.jsxs("div",{className:"status-item",children:[m.jsx("span",{className:"status-label",children:"Offline Ready:"}),m.jsx("span",{className:"status-value",children:s?"✅ Yes":"⚠️ Limited"})]})]})]})},Ps=({className:e="",showForCrisis:s=!1})=>{const[t,a]=h.useState(null),[n,i]=h.useState(!1),[r,l]=h.useState(!1),[o,c]=h.useState(!1);h.useEffect(()=>{const e=I.getStatus();a(e);const s=I.onStatusChange(e=>{a(e)});return d(e),s},[s,o]),h.useEffect(()=>{t&&d(t)},[t,s,o]);const d=e=>{if(o||e.isInstalled||!e.isInstallable)return void i(!1);if(s)return void i(!0);parseInt(localStorage.getItem("userEngagementCount")||"0")>=3&&i(!0)},p=()=>{i(!1),c(!0);const e=new Date;e.setDate(e.getDate()+7),localStorage.setItem("pwaBannerDismissedUntil",e.toISOString())};if(!n||!(null==t?void 0:t.supportsPWA))return null;const g=s?{title:"🚨 Install for Emergency Access",description:"Get instant access to crisis resources even when offline",benefits:["⚡ Works without internet","📱 Faster than browser","🔔 Crisis notifications"],installText:"Install for Emergencies",urgency:!0}:{title:"📱 Install Astral Core",description:"Get the full app experience with enhanced features",benefits:["🚀 Faster loading","📱 Home screen access","🔔 Important notifications","📱 Works offline"],installText:"Install App",urgency:!1};return m.jsx("div",{className:`pwa-install-banner ${g.urgency?"urgent":""} ${e}`,children:m.jsxs("div",{className:"banner-content",children:[m.jsxs("div",{className:"banner-header",children:[m.jsx("h4",{className:"banner-title",children:g.title}),m.jsx("button",{className:"banner-close",onClick:p,"aria-label":"Dismiss install banner",children:"×"})]}),'"',m.jsx("p",{className:"banner-description",children:g.description}),m.jsx("ul",{className:"banner-benefits",children:g.benefits.map(e=>m.jsx("li",{children:e},e))}),m.jsxs("div",{className:"banner-actions",children:[m.jsx("button",{className:"btn-secondary banner-btn",onClick:p,children:"Maybe Later"}),m.jsx("button",{className:"}",onClick:()=>u(null,null,function*(){if(null==t?void 0:t.isInstallable){l(!0);try{(yield I.showSmartInstallPrompt())&&(i(!1),c(!0),localStorage.setItem("pwaInstalled","true"),localStorage.setItem("pwaInstalledAt",(new Date).toISOString()))}catch(e){}finally{l(!1)}}}),disabled:r,children:r?"Installing...":g.installText})]})]})})},Vs=({isOpen:e,onClose:s,children:t,title:a,isDismissible:n=!0,allowSwipeToDismiss:i=!0,enhanced:r=!0,size:l="md",description:o,variant:c="glass",animate:d=!0})=>{const u=h.useRef(null),p=h.useRef(null);if(h.useEffect(()=>{e?(p.current=document.activeElement,setTimeout(()=>{var e,s;const t=null==(e=u.current)?void 0:e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t?t.focus():null==(s=u.current)||s.focus()},100)):p.current&&(p.current.focus(),p.current=null)},[e]),h.useEffect(()=>{const t=t=>{if(e){if("Escape"===t.key&&n&&s)return t.preventDefault(),void s();if("Tab"===t.key&&u.current){const e=u.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=e[0],a=e[e.length-1];t.shiftKey&&document.activeElement===s?(t.preventDefault(),null==a||a.focus()):t.shiftKey||document.activeElement!==a||(t.preventDefault(),null==s||s.focus())}}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,n,s]),!e)return null;const g=[r?"modal-overlay-enhanced smooth-transition":"modal-overlay"];let v=["modal-panel"];if(r)switch(c){case"glass":v=["glass-card","modal-content-enhanced"];break;case"neumorph":v=["neumorph-card","modal-content-enhanced"];break;default:v=["modal-content-enhanced"]}return d&&v.push("animate-breathe"),r&&"md"!==l&&v.push(`modal-${l}`),m.jsxs("div",{className:g.join(" "),children:[n&&m.jsx("button",{className:"modal-overlay-button",onClick:s,"aria-label":"Close modal",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent",border:"none",cursor:"pointer",zIndex:-1}}),m.jsxs("dialog",{ref:u,className:v.join(" "),open:e,"aria-labelledby":"modal-title","aria-describedby":o?"modal-description":void 0,onCancel:e=>{e.preventDefault(),n&&s&&s()},children:[m.jsxs("div",{className:r?"modal-header-enhanced smooth-transition":"modal-header",children:[m.jsx("h2",{id:"modal-title",className:r?"modal-title-enhanced gradient-text":"",children:a}),n&&m.jsx("button",{type:"button",onClick:s,className:"modal-close-btn touch-optimized smooth-transition "+(r?"glass-button":""),"aria-label":`Close ${a} dialog`,children:m.jsx(xe,{})})]}),o&&m.jsx("div",{id:"modal-description",className:"sr-only",children:o}),m.jsx("div",{className:r?"modal-body-enhanced smooth-transition":"modal-body",children:t}),r&&n&&m.jsx("div",{className:"modal-footer-enhanced",children:m.jsx("button",{type:"button",onClick:s,className:"glass-button smooth-transition","aria-label":`Close ${a} dialog`,children:"Close"})}),i&&n&&!r&&m.jsxs("div",{className:"modal-swipe-hint","aria-hidden":"true",children:[m.jsx("div",{className:"swipe-indicator"}),m.jsx("span",{children:"Swipe to dismiss"})]})]})]})},$s=({children:e,onClick:s,variant:t="primary",size:a="md",isLoading:n=!1,disabled:i=!1,className:r="",type:o="button",style:c,icon:d,enhanced:u=!0,iconOnly:h=!1,animate:p="none",ripple:g=!0,"aria-label":v})=>{let x="btn",f="";if(u)switch(t){case"glass":x="glass-button";break;case"neumorph":x="neumorph-button";break;case"crisis":x="crisis-button";break;case"primary":x="glass-button",f="btn-primary-therapeutic";break;case"secondary":x="glass-button",f="btn-secondary-therapeutic";break;case"success":x="glass-button",f="btn-success-therapeutic";break;case"danger":x="glass-button",f="btn-danger-therapeutic";break;default:x="glass-button",f=t}else f=`btn-${t}`;const y=[x,f,"md"!==a?`btn-${a}`:"",h?"btn-icon-only":"","none"!==p?`animate-${p}`:"",g?"ripple-button":"","touch-optimized touch-feedback smooth-transition",r].filter(Boolean).join(" "),b=l({minHeight:"44px",minWidth:h?"44px":"auto",display:"inline-flex",alignItems:"center",justifyContent:"center",touchAction:"manipulation"},c);return m.jsx("button",{type:o,className:y,onClick:s,disabled:i||n,style:b,"aria-label":v||(h&&"string"==typeof e?e:void 0),children:n?m.jsxs("div",{className:"loading-dots",children:[m.jsx("span",{className:"loading-dot"}),m.jsx("span",{className:"loading-dot"}),m.jsx("span",{className:"loading-dot"})]}):m.jsxs(m.Fragment,{children:[d&&m.jsx("span",{className:"btn-icon",children:d}),!h&&m.jsx("span",{className:"btn-text",children:e})]})})},Bs=({title:e,subtitle:s,children:t})=>m.jsxs("div",{className:"view-header",children:[m.jsxs("div",{children:[m.jsx("h1",{children:e}),s&&m.jsx("p",{className:"view-subheader",children:s})]}),t&&m.jsx("div",{className:"view-header-actions",children:t})]}),Fs={theme:"auto",fontSize:"medium",reducedMotion:!1,highContrast:!1,enableNotifications:!0,wellnessReminders:!0,reminderFrequency:4,quietHoursStart:"22:00",quietHoursEnd:"08:00",shareAnalytics:!1,showOnlineStatus:!0,allowPeerMessages:!0,defaultBreathingPattern:"4-7-8",meditationDuration:10,backgroundTheme:"ocean",moodTracking:!0,screenReaderMode:!1,keyboardShortcuts:!0,focusIndicators:!0,autoSave:!0,backupFrequency:"weekly"},Ws=()=>{const[e,s]=h.useState(Fs),[t,a]=h.useState("appearance"),[n,i]=h.useState(!1);h.useEffect(()=>{const e=localStorage.getItem("userPreferences");if(e)try{s(JSON.parse(e))}catch(t){}if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,t=window.matchMedia("(prefers-contrast: high)").matches;(e||t)&&s(s=>o(l({},s),{reducedMotion:e,highContrast:t}))}},[]);const r=e=>{if("dark"===e.theme)document.documentElement.setAttribute("data-theme","dark");else if("light"===e.theme)document.documentElement.removeAttribute("data-theme");else{window.matchMedia("(prefers-color-scheme: dark)").matches&&document.documentElement.setAttribute("data-theme","dark")}document.documentElement.style.setProperty("--base-font-size","small"===e.fontSize?"14px":"large"===e.fontSize?"18px":"16px"),e.reducedMotion?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion"),e.highContrast?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast"),e.screenReaderMode&&document.documentElement.setAttribute("aria-live","polite")},c=(e,t)=>{s(s=>o(l({},s),{[e]:t}))};return m.jsxs("div",{className:"preferences-manager",children:[m.jsxs("div",{className:"preferences-header",children:[m.jsxs("h2",{className:"preferences-title",children:[m.jsx(as,{className:"title-icon"}),"Settings & Preferences"]}),n&&m.jsx("span",{className:"saved-indicator",children:"✓ Saved"})]}),m.jsxs("div",{className:"preferences-tabs",children:[m.jsxs("button",{className:"tab-btn "+("appearance"===t?"active":""),onClick:()=>a("appearance"),children:[m.jsx(xs,{})," Appearance"]}),m.jsxs("button",{className:"tab-btn "+("notifications"===t?"active":""),onClick:()=>a("notifications"),children:[m.jsx(Ue,{})," Notifications"]}),m.jsxs("button",{className:"tab-btn "+("privacy"===t?"active":""),onClick:()=>a("privacy"),children:[m.jsx(hs,{})," Privacy"]}),m.jsxs("button",{className:"tab-btn "+("wellness"===t?"active":""),onClick:()=>a("wellness"),children:[m.jsx(ve,{})," Wellness"]}),m.jsxs("button",{className:"tab-btn "+("accessibility"===t?"active":""),onClick:()=>a("accessibility"),children:[m.jsx(Ze,{})," Accessibility"]}),m.jsxs("button",{className:"tab-btn "+("data"===t?"active":""),onClick:()=>a("data"),children:[m.jsx(gs,{})," Data"]})]}),m.jsxs("div",{className:"preferences-content",children:["appearance"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Appearance Settings"}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Theme"}),m.jsxs("select",{value:e.theme,onChange:e=>c("theme",e.target.value),className:"preference-select",children:[m.jsx("option",{value:"light",children:"Light"}),m.jsx("option",{value:"dark",children:"Dark"}),m.jsx("option",{value:"auto",children:"Auto (System)"})]})]}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Font Size"}),m.jsxs("select",{value:e.fontSize,onChange:e=>c("fontSize",e.target.value),className:"preference-select",children:[m.jsx("option",{value:"small",children:"Small"}),m.jsx("option",{value:"medium",children:"Medium"}),m.jsx("option",{value:"large",children:"Large"})]})]}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.reducedMotion,onChange:e=>c("reducedMotion",e.target.checked)}),m.jsx("span",{children:"Reduce motion and animations"})]})}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.highContrast,onChange:e=>c("highContrast",e.target.checked)}),m.jsx("span",{children:"High contrast mode"})]})})]}),"notifications"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Notification Settings"}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.enableNotifications,onChange:e=>c("enableNotifications",e.target.checked)}),m.jsx("span",{children:"Enable notifications"})]})}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.wellnessReminders,onChange:e=>c("wellnessReminders",e.target.checked)}),m.jsx("span",{children:"Wellness check-in reminders"})]})}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Reminder frequency"}),m.jsxs("select",{value:e.reminderFrequency,onChange:e=>c("reminderFrequency",Number(e.target.value)),className:"preference-select",children:[m.jsx("option",{value:"2",children:"Every 2 hours"}),m.jsx("option",{value:"4",children:"Every 4 hours"}),m.jsx("option",{value:"6",children:"Every 6 hours"}),m.jsx("option",{value:"8",children:"Every 8 hours"})]})]}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Quiet hours start"}),m.jsx("input",{type:"time",value:e.quietHoursStart,onChange:e=>c("quietHoursStart",e.target.value),className:"preference-input"})]}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Quiet hours end"}),m.jsx("input",{type:"time",value:e.quietHoursEnd,onChange:e=>c("quietHoursEnd",e.target.value),className:"preference-input"})]})]}),"privacy"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Privacy Settings"}),m.jsxs("div",{className:"preference-group",children:[m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.shareAnalytics,onChange:e=>c("shareAnalytics",e.target.checked)}),m.jsx("span",{children:"Share anonymous usage analytics"})]}),m.jsx("p",{className:"preference-hint",children:"Help us improve by sharing anonymous usage data"})]}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.showOnlineStatus,onChange:e=>c("showOnlineStatus",e.target.checked)}),m.jsx("span",{children:"Show online status to peers"})]})}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.allowPeerMessages,onChange:e=>c("allowPeerMessages",e.target.checked)}),m.jsx("span",{children:"Allow messages from peers"})]})})]}),"wellness"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Wellness Settings"}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Default breathing pattern"}),m.jsxs("select",{value:e.defaultBreathingPattern,onChange:e=>c("defaultBreathingPattern",e.target.value),className:"preference-select",children:[m.jsx("option",{value:"4-7-8",children:"4-7-8 Relaxation"}),m.jsx("option",{value:"box",children:"Box Breathing"}),m.jsx("option",{value:"coherent",children:"Coherent Breathing"}),m.jsx("option",{value:"calm",children:"Calm Breathing"})]})]}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Default meditation duration (minutes)"}),m.jsx("input",{type:"number",min:"3",max:"60",value:e.meditationDuration,onChange:e=>c("meditationDuration",Number(e.target.value)),className:"preference-input"})]}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Background theme"}),m.jsxs("select",{value:e.backgroundTheme,onChange:e=>c("backgroundTheme",e.target.value),className:"preference-select",children:[m.jsx("option",{value:"ocean",children:"Ocean"}),m.jsx("option",{value:"forest",children:"Forest"}),m.jsx("option",{value:"sky",children:"Sky"}),m.jsx("option",{value:"aurora",children:"Aurora"})]})]}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.moodTracking,onChange:e=>c("moodTracking",e.target.checked)}),m.jsx("span",{children:"Enable mood tracking"})]})})]}),"accessibility"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Accessibility Settings"}),m.jsxs("div",{className:"preference-group",children:[m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.screenReaderMode,onChange:e=>c("screenReaderMode",e.target.checked)}),m.jsx("span",{children:"Screen reader optimization"})]}),m.jsx("p",{className:"preference-hint",children:"Optimizes the interface for screen readers"})]}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.keyboardShortcuts,onChange:e=>c("keyboardShortcuts",e.target.checked)}),m.jsx("span",{children:"Enable keyboard shortcuts"})]})}),m.jsxs("div",{className:"preference-group",children:[m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.focusIndicators,onChange:e=>c("focusIndicators",e.target.checked)}),m.jsx("span",{children:"Enhanced focus indicators"})]}),m.jsx("p",{className:"preference-hint",children:"Shows clear focus outlines for keyboard navigation"})]}),m.jsxs("div",{className:"keyboard-shortcuts",children:[m.jsx("h4",{children:"Keyboard Shortcuts"}),m.jsxs("ul",{className:"shortcuts-list",children:[m.jsxs("li",{children:[m.jsx("kbd",{children:"Alt"})," + ",m.jsx("kbd",{children:"H"})," - Go to Home"]}),m.jsxs("li",{children:[m.jsx("kbd",{children:"Alt"})," + ",m.jsx("kbd",{children:"W"})," - Open Wellness Dashboard"]}),m.jsxs("li",{children:[m.jsx("kbd",{children:"Alt"})," + ",m.jsx("kbd",{children:"C"})," - Open Crisis Resources"]}),m.jsxs("li",{children:[m.jsx("kbd",{children:"Alt"})," + ",m.jsx("kbd",{children:"B"})," - Start Breathing Exercise"]}),m.jsxs("li",{children:[m.jsx("kbd",{children:"Alt"})," + ",m.jsx("kbd",{children:"M"})," - Start Meditation"]}),m.jsxs("li",{children:[m.jsx("kbd",{children:"Esc"})," - Close modal/dialog"]})]})]})]}),"data"===t&&m.jsxs("div",{className:"tab-panel",children:[m.jsx("h3",{children:"Data Management"}),m.jsx("div",{className:"preference-group",children:m.jsxs("label",{className:"preference-toggle",children:[m.jsx("input",{type:"checkbox",checked:e.autoSave,onChange:e=>c("autoSave",e.target.checked)}),m.jsx("span",{children:"Auto-save progress"})]})}),m.jsxs("div",{className:"preference-group",children:[m.jsx("label",{className:"preference-label",children:"Backup frequency"}),m.jsxs("select",{value:e.backupFrequency,onChange:e=>c("backupFrequency",e.target.value),className:"preference-select",children:[m.jsx("option",{value:"daily",children:"Daily"}),m.jsx("option",{value:"weekly",children:"Weekly"}),m.jsx("option",{value:"monthly",children:"Monthly"})]})]}),m.jsxs("div",{className:"data-actions",children:[m.jsxs("button",{className:"data-btn export-btn",onClick:()=>{const s={preferences:e,wellnessHistory:localStorage.getItem("wellnessHistory"),reflections:localStorage.getItem("reflections"),journalPrompts:localStorage.getItem("usedJournalPrompts"),timestamp:(new Date).toISOString()},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`astralcore-backup-${(new Date).toISOString().split("T")[0]}.json`,n.click(),URL.revokeObjectURL(a)},children:[m.jsx(gs,{}),"Export All Data"]}),m.jsxs("label",{className:"data-btn import-btn",children:[m.jsx(vs,{}),"Import Data",m.jsx("input",{type:"file",accept:".json",onChange:e=>{var t;const a=null==(t=e.target.files)?void 0:t[0];if(!a)return;const n=new FileReader;n.onload=e=>{var t;try{const a=JSON.parse(null==(t=e.target)?void 0:t.result);a.preferences&&(s(a.preferences),localStorage.setItem("userPreferences",JSON.stringify(a.preferences))),a.wellnessHistory&&localStorage.setItem("wellnessHistory",a.wellnessHistory),a.reflections&&localStorage.setItem("reflections",a.reflections),a.journalPrompts&&localStorage.setItem("usedJournalPrompts",a.journalPrompts),i(!0),setTimeout(()=>i(!1),2e3)}catch(a){}},n.readAsText(a)},style:{display:"none"}})]})]}),m.jsxs("div",{className:"data-info",children:[m.jsx("h4",{children:"What's included in export:"}),m.jsxs("ul",{children:[m.jsx("li",{children:"All preferences and settings"}),m.jsx("li",{children:"Wellness check-in history"}),m.jsx("li",{children:"Journal entries and reflections"}),m.jsx("li",{children:"Progress tracking data"}),m.jsx("li",{children:"Custom breathing patterns"})]})]})]})]}),m.jsxs("div",{className:"preferences-footer",children:[m.jsx("button",{className:"reset-btn",onClick:()=>s(Fs),children:"Reset to Defaults"}),m.jsx("button",{className:"save-btn",onClick:()=>{localStorage.setItem("userPreferences",JSON.stringify(e)),i(!0),setTimeout(()=>i(!1),2e3),r(e)},children:"Save Changes"})]})]})},Us=h.lazy(()=>R(()=>import("./react-vendor-IorqdeNj.js").then(e=>e.m),__vite__mapDeps([0,1]))),qs=e=>m.jsx("img",o(l({},e),{alt:e.alt||"Content image",style:{maxWidth:"100%",height:"auto"},loading:"lazy"})),Gs=e=>{var s=e,{children:t}=s,a=c(s,["children"]);return m.jsx("a",o(l({},a),{target:"_blank",rel:"noopener noreferrer",children:t}))},Ys=({children:e,className:s="",placeholder:t,autoLoad:a=!1})=>{const[n,i]=h.useState(a),[r,l]=h.useState(!1),o=e=>A(e),c=()=>{l(!0),i(!0)};return n?m.jsx(h.Suspense,{fallback:m.jsxs("div",{className:"markdown-loading",children:[r&&m.jsx("p",{children:"Loading enhanced formatting..."}),m.jsx("div",{dangerouslySetInnerHTML:{__html:o(e)}})]}),children:m.jsx(Js,{className:s,children:e})}):m.jsx("div",{className:`lazy-markdown-placeholder ${s}`,children:t||m.jsxs("button",{onClick:c,style:{cursor:"pointer",background:"none",border:"none",padding:"0",textAlign:"left",width:"100%"},"aria-label":"Load full markdown content",children:[m.jsx("div",{dangerouslySetInnerHTML:{__html:o(e.substring(0,200)+(e.length>200?"...":""))}}),m.jsx("div",{className:"load-markdown-btn",style:{marginTop:"8px",padding:"4px 8px",background:"#007acc",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer",display:"inline-block"},children:"Load Full Content"})]})})},Js=({children:e,className:s})=>m.jsx(Us,{className:s,components:{img:qs,a:Gs},children:e}),Qs=({children:e,className:s="",style:t,onClick:a,role:n,tabIndex:i,enhanced:r=!0,variant:c="default",animate:d="none",gradient:u="none",moodVariant:h="none","aria-label":p})=>{const g=!!a,v=[r?"card-enhanced":"card",r&&"default"!==c?c:"",a?"card-clickable":"","none"!==d?`animate-${d}`:"","none"!==u?`animate-gradient gradient-${u}`:"","none"!==h?`mood-card-${h}`:"",a&&!r?"touch-optimized touch-feedback smooth-transition":"smooth-transition",s].filter(Boolean).join(" "),x="none"!==u?o(l({},t),{background:`var(--gradient-${u})`,backgroundSize:"200% 200%"}):t;return m.jsx("div",o(l({className:v,style:x,onClick:a,onKeyDown:g?e=>{!a||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(e))}:void 0,role:n||(g?"button":"region"),tabIndex:g?null!=i?i:0:void 0,"aria-label":p},g&&{"aria-pressed":"false"}),{children:e}))},Ks=e=>{let s=0;for(let t=0;t<e.length;t++)s=e.charCodeAt(t)+((s<<5)-s);return Math.abs(s%8)},Xs=x.memo(e=>{const{dilemma:s,onToggleSupport:t,onStartChat:a,onStartVideoChat:n,onReport:i,onDismissReport:r,onRemovePost:l,onAcceptDilemma:o,onDeclineRequest:c,onResolve:d,onSummarize:u,hasUnread:p,isHelperView:g,isMyPostView:v,filteredCategories:x=[],aiMatchReason:f}=e,[y,b]=h.useState(!1),[j,N]=h.useState(!1),[w,C]=h.useState(!1),[S,k]=h.useState(null),I=x.includes(s.category)&&!y,{ref:A}=ue({threshold:100,velocityThreshold:.5,onSwipeLeft:()=>{g||v||(k("support"),setTimeout(()=>{L({}),k(null)},150))},onSwipeRight:()=>{g&&"active"===s.status&&(k("accept"),setTimeout(()=>{null==o||o(s.id),k(null)},150))}});h.useEffect(()=>{b(!1)},[x]);const L=e=>{e.stopPropagation(),t&&!s.isSupported&&(t(s.id),C(!0),setTimeout(()=>C(!1),300)),a&&a(s.id)};if(I)return m.jsxs(Qs,{className:"post-card",style:{filter:"blur(8px)",cursor:"pointer"},onClick:()=>b(!0),children:[m.jsxs("div",{className:"post-header",children:[m.jsxs("div",{className:"post-user-info",children:[m.jsx("div",{className:`avatar avatar-color-${Ks(s.userToken)}`}),m.jsx("span",{className:"username",children:"Anonymous User"})]}),m.jsxs("div",{className:"post-meta",children:[m.jsx("span",{className:"post-category",children:s.category}),m.jsx("div",{className:"post-timestamp",children:M(s.timestamp)})]})]}),m.jsxs("div",{className:"post-content markdown-content",style:{textAlign:"center",fontWeight:"bold",color:"var(--text-secondary)"},children:[m.jsx("p",{children:"Content hidden based on your filter preferences."}),m.jsx("p",{children:"Click to reveal."})]})]});return m.jsxs("div",{ref:A,className:"post-card-container touch-optimized "+(S?"swipe-"+S:""),children:[m.jsxs(Qs,{className:"post-card",children:[m.jsxs("div",{className:"post-header",children:[m.jsxs("div",{className:"post-user-info",children:[m.jsx("div",{className:`avatar avatar-color-${Ks(s.userToken)}`}),m.jsx("span",{className:"username",children:"Anonymous User"})]}),m.jsxs("div",{className:"post-meta",children:[m.jsx("span",{className:"post-category",children:s.category}),m.jsx("div",{className:"post-timestamp",children:M(s.timestamp)})]})]}),s.isReported&&g&&m.jsxs("div",{className:"report-reason-display",children:["Reported for: ",m.jsx("strong",{children:s.reportReason})]}),f&&m.jsxs("div",{className:"ai-match-reason",children:["✨ ",f]}),m.jsx("div",{className:"post-content markdown-content",children:m.jsx(Ys,{className:"post-markdown",autoLoad:!0,children:s.content})}),g&&s.summary&&m.jsxs("div",{className:"summary-container",children:[m.jsxs("button",{onClick:()=>N(!j),className:"btn touch-optimized",style:{cursor:"pointer",background:"none",border:"none",padding:"12px 0",font:"inherit",fontSize:"1.1em",fontWeight:"bold",minHeight:"44px"},"aria-expanded":j,children:["AI Summary ",j?"▼":"►"]}),j&&m.jsx("div",{className:"summary-content markdown-content",children:m.jsx(Ys,{className:"summary-markdown",children:s.summary})})]}),m.jsx("div",{className:"post-actions",children:g?"direct_request"===s.status?m.jsxs("div",{className:"form-actions-group",children:[m.jsx($s,{variant:"success",className:"btn-sm",onClick:()=>null==o?void 0:o(s.id),children:"Accept Request"}),m.jsx($s,{variant:"danger",className:"btn-sm",onClick:()=>null==c?void 0:c(s.id),children:"Decline"})]}):"in_progress"===s.status?m.jsxs("div",{className:"form-actions-group",children:[m.jsx($s,{variant:"secondary",className:"btn-sm",onClick:()=>null==a?void 0:a(s.id),icon:m.jsx(ve,{}),children:"Chat with User"}),n&&m.jsx($s,{variant:"secondary",className:"btn-sm",onClick:()=>n(s.id),icon:m.jsx(is,{}),children:"Video Chat"})]}):s.isReported?m.jsxs("div",{className:"form-actions-group",children:[m.jsx($s,{variant:"danger",className:"btn-sm",onClick:()=>null==l?void 0:l(s.id),children:"Remove Post"}),m.jsx($s,{variant:"secondary",className:"btn-sm",onClick:()=>null==r?void 0:r(s.id),children:"Dismiss Report"})]}):m.jsxs("div",{className:"form-actions-group",children:[!s.summary&&m.jsx($s,{variant:"ghost",className:"btn-sm",onClick:()=>null==u?void 0:u(s.id),isLoading:s.summaryLoading,children:"Summarize"}),m.jsx($s,{variant:"success",className:"btn-sm",onClick:()=>null==o?void 0:o(s.id),icon:m.jsx(qe,{}),children:"Accept Dilemma"})]}):m.jsxs("div",{className:"form-actions-group",style:{width:"100%",justifyContent:"space-between"},children:[m.jsxs($s,{variant:"secondary",className:`btn-sm btn-support ${s.isSupported?"supported":""} ${w?"anim-pop":""}`,onClick:L,icon:m.jsx(ve,{}),children:[p&&m.jsx("div",{className:"notification-dot-small"}),m.jsx("span",{className:"support-text",children:v?"View Chat":"Offer Support"}),!v&&m.jsx("span",{className:"support-count",children:s.supportCount>0?s.supportCount:""})]}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v&&"in_progress"===s.status&&d&&m.jsx($s,{variant:"success",className:"btn-sm",onClick:()=>d(s.id),children:"Mark as Resolved"}),m.jsx($s,{variant:"secondary",className:"btn-sm btn-report "+(s.isReported?"reported":""),onClick:e=>{e.stopPropagation(),null==i||i(s.id)},disabled:s.isReported,children:s.isReported?"Reported":"Report"})]})]})})]}),S&&m.jsxs("div",{className:`swipe-hint swipe-hint-${S}`,children:["support"===S&&"💝 Offering Support","accept"===S&&"✅ Accepting Dilemma"]})]})}),Zs=()=>m.jsxs("li",{className:"post-card skeleton",children:[m.jsxs("div",{className:"post-header",children:[m.jsxs("div",{className:"post-user-info",children:[m.jsx("div",{className:"avatar"}),m.jsx("div",{className:"username-skeleton"})]}),m.jsx("div",{className:"post-meta",children:m.jsx("div",{className:"category-skeleton"})})]}),m.jsx("div",{className:"content-skeleton line-1"}),m.jsx("div",{className:"content-skeleton line-2"}),m.jsx("div",{className:"content-skeleton line-3"})]}),et=()=>m.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),m.jsx("path",{d:"M12 9v4"}),m.jsx("path",{d:"m12 17 .01 0"})]}),st=({title:e="Something went wrong",message:s="We encountered an unexpected error. Please try again.",onRetry:t,showRetry:a=!0,className:n="",isRetrying:i=!1})=>m.jsxs("div",{className:`error-state ${n}`,role:"alert","aria-live":"polite",children:[m.jsx("div",{className:"error-state-icon","aria-hidden":"true",children:m.jsx(et,{})}),m.jsx("h3",{className:"error-state-title",children:e}),m.jsx("p",{className:"error-state-message",children:s}),a&&t&&m.jsx("div",{className:"error-state-actions",children:m.jsx("button",{className:"retry-button",onClick:t,disabled:i,"aria-label":"Retry the previous action",children:i?"Retrying...":"Try Again"})})]}),tt=({className:e="",style:s,message:t="Typing",size:a="medium"})=>{const n=["typing-indicator",{small:"typing-indicator-small",medium:"typing-indicator-medium",large:"typing-indicator-large"}[a],e].filter(Boolean).join(" ");return m.jsxs("div",{className:n,style:s,role:"status","aria-live":"polite","aria-label":`${t}...`,children:[m.jsxs("div",{className:"typing-indicator-dots",children:[m.jsx("span",{className:"typing-dot","aria-hidden":"true"}),m.jsx("span",{className:"typing-dot","aria-hidden":"true"}),m.jsx("span",{className:"typing-dot","aria-hidden":"true"})]}),m.jsxs("span",{className:"sr-only",children:[t,"..."]})]})},at=({guidance:e,onDismiss:s,className:t=""})=>{const a=e.isCrisis?"warning":"info";return m.jsx("div",{className:`guidance-panel guidance-panel-${a} ${t}`,children:m.jsxs("div",{className:"guidance-panel-content",children:[m.jsxs("div",{className:"guidance-panel-header",children:[m.jsx("h4",{children:"AI Guidance"}),m.jsx("button",{onClick:s,className:"guidance-panel-close",children:"×"})]}),e.isCrisis&&m.jsxs("p",{className:"guidance-panel-crisis-warning",children:[m.jsx("strong",{children:"Crisis Detected:"})," ",e.flagReason]}),e.suggestedResponses.length>0&&m.jsxs("div",{className:"guidance-panel-responses",children:[m.jsx("h5",{children:"Suggested Responses:"}),m.jsx("ul",{children:e.suggestedResponses.map((e,s)=>m.jsx("li",{children:e},s))})]}),e.suggestedResources.length>0&&m.jsxs("div",{className:"guidance-panel-resources",children:[m.jsx("h5",{children:"Recommended Resources:"}),m.jsx("ul",{children:e.suggestedResources.map((e,s)=>m.jsxs("li",{children:[m.jsx("strong",{children:e.title}),": ",e.contact]},s))})]})]})})},nt=()=>{const[e,s]=h.useState(!1),[t,a]=h.useState(!1),[n,i]=h.useState(0),[r,o]=h.useState(0);h.useEffect(()=>{const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),document.documentElement.style.setProperty("--mobile-vh",`${window.innerHeight}px`),i(window.innerHeight)},t=()=>{const e=window.innerHeight,s=window.screen.height;if(s-e>.25*s){const t=s-e;o(t),a(!0),document.documentElement.style.setProperty("--keyboard-height",`${t}px`),document.documentElement.style.setProperty("--is-keyboard-open","1"),document.body.classList.add("keyboard-open")}else o(0),a(!1),document.documentElement.style.setProperty("--keyboard-height","0px"),document.documentElement.style.setProperty("--is-keyboard-open","0"),document.body.classList.remove("keyboard-open")};if((()=>{const e=window.innerWidth<=768||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);s(e)})(),e(),t(),window.addEventListener("resize",e),window.addEventListener("resize",t),window.addEventListener("orientationchange",()=>{setTimeout(()=>{e(),t()},500)}),window.visualViewport){const s=()=>{if(window.visualViewport){const e=window.innerHeight-window.visualViewport.height;e>150?(o(e),a(!0),document.documentElement.style.setProperty("--keyboard-height",`${e}px`),document.body.classList.add("keyboard-open")):(o(0),a(!1),document.documentElement.style.setProperty("--keyboard-height","0px"),document.body.classList.remove("keyboard-open"))}};return window.visualViewport.addEventListener("resize",s),()=>{var a;window.removeEventListener("resize",e),window.removeEventListener("resize",t),null==(a=window.visualViewport)||a.removeEventListener("resize",s)}}return()=>{window.removeEventListener("resize",e),window.removeEventListener("resize",t)}},[]);const c=h.useCallback((s,t={})=>{if(!e)return;const a=l({behavior:"smooth",block:"center"},t);s.scrollIntoView(a)},[e]);return{isMobile:e,isKeyboardOpen:t,viewportHeight:n,keyboardHeight:r,scrollIntoView:c}},it=({value:e,onChange:s,onKeyDown:t,placeholder:a="Type your message...",className:n="",containerStyle:i={},style:r={},autoFocus:o=!1,type:c="text"})=>{const d=h.useRef(null),{isMobile:u,scrollIntoView:p}=nt(),g=h.useCallback(e=>{u&&(e.target.classList.add("mobile-focused"),setTimeout(()=>{d.current&&p(d.current,{block:"end"})},300))},[u,p]),v=h.useCallback(e=>{e.target.classList.remove("mobile-focused")},[]),x=h.useCallback(e=>{u&&d.current&&d.current!==document.activeElement&&(e.preventDefault(),d.current.focus())},[u]);return m.jsx("div",{style:l({flexGrow:1,marginBottom:0},i),children:m.jsx("input",{ref:d,type:c,value:e,onChange:s,onKeyDown:t,onFocus:g,onBlur:v,onTouchStart:x,placeholder:a,className:`chat-input ${n}`,autoFocus:o,style:l({fontSize:"16px",padding:"12px 16px",borderRadius:"20px",border:"1px solid var(--border-color)",backgroundColor:"var(--bg-tertiary)",minHeight:"44px",width:"100%",outline:"none",transition:"all 0.2s ease",WebkitTapHighlightColor:"transparent",WebkitAppearance:"none",WebkitUserSelect:"text",resize:"none",WebkitTextSizeAdjust:"100%"},r),"aria-label":a,autoComplete:"off",autoCorrect:"off",autoCapitalize:"sentences",spellCheck:"true",inputMode:"text",enterKeyHint:"send","data-mobile-input":"true"})})},rt=({children:e,className:s="",style:t={}})=>{const{isMobile:a}=nt(),n=l({position:"fixed",bottom:0,left:a?0:"280px",right:0,padding:"1rem",background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",borderTop:"1px solid var(--border-color)",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.1)",zIndex:1e3,paddingBottom:a?"max(1rem, env(safe-area-inset-bottom))":"1rem",transition:"transform 0.2s ease-out"},t);return m.jsx("div",{className:`chat-composer ${s} ${a?"mobile-composer":""}`,style:n,children:e})};
/**
 * Cultural Crisis Detection Hook
 * 
 * React hook for integrating cultural crisis detection with enhanced AI analysis,
 * cultural bias mitigation, and culturally-appropriate intervention recommendations.
 * 
 * @license Apache-2.0
 */
function lt(e={}){var s,t,a,n;const{autoAnalyze:i=!0,minAnalysisLength:r=10,maxHistorySize:c=50,debounceMs:d=1e3,languageCode:m="en",culturalContext:p,userId:g,onCrisisDetected:v,onCulturalBiasDetected:x,onCulturalInterventionRecommended:f}=e,[y,b]=h.useState({isAnalyzing:!1,lastAnalysis:null,culturallyAdjustedRisk:0,biasAdjustments:[],culturalInterventions:null,analysisHistory:[],culturalMetrics:{totalAnalyses:0,biasReductionRate:.2,culturalAccuracy:.85}}),[j,N]=h.useState({show:!1,severity:"none",message:"",culturallyAdapted:!1,culturalFactors:[],interventions:{immediate:[],cultural:[],familyBased:[],communityBased:[]},emergencyMode:!1}),w=h.useRef(null),C=h.useRef(""),S=h.useCallback((e,...s)=>u(null,[e,...s],function*(e,s={}){var t;if(!e||e.length<r)return null;if(!s.immediate&&C.current===e)return y.lastAnalysis;b(e=>o(l({},e),{isAnalyzing:!0}));try{const a=yield L.analyzeCrisisWithCulturalContext(e,g,m,s.culturalOverride||p);return b(e=>{var t,n;const i=s.trackHistory?[...e.analysisHistory,a].slice(-c):e.analysisHistory;return o(l({},e),{lastAnalysis:a,culturallyAdjustedRisk:(null==(t=a.culturallyAdjustedRisk)?void 0:t.adjustedRisk)||0,biasAdjustments:(null==(n=a.culturalBiasAdjustments)?void 0:n.map(e=>e.factor))||[],culturalInterventions:a.culturalInterventions||null,analysisHistory:i,culturalMetrics:o(l({},e.culturalMetrics),{totalAnalyses:e.culturalMetrics.totalAnalyses+1})})}),I(a),a.hasCrisisIndicators&&v&&v(a),(null==(t=a.culturalBiasAdjustments)?void 0:t.length)>0&&x&&x(a.culturalBiasAdjustments.map(e=>e.factor)),a.culturalInterventions&&f&&f(a.culturalInterventions),C.current=e,a}catch(a){return null}finally{b(e=>o(l({},e),{isAnalyzing:!1}))}}),[r,g,m,p,c,v,x,f]),k=h.useCallback(e=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{i&&S(e,{trackHistory:!0})},d)},[S,i,d]),I=h.useCallback(e=>{var s,t,a,n;const i=(null==(s=e.culturallyAdjustedRisk)?void 0:s.adjustedRisk)||0;let r="none",l="",o=!1;i>=80?(r="critical",l="Critical crisis indicators detected with cultural adaptations applied",o=!0):i>=60?(r="high",l="High-risk crisis patterns identified across cultural contexts"):i>=40?(r="medium",l="Moderate crisis indicators with cultural considerations"):i>=20&&(r="low",l="Low-level concern detected with cultural sensitivity");const c=[...e.culturalBiasAdjustments.map(e=>e.factor),...e.culturalIndicators.map(e=>`${e.culturalRegions.join(", ")} expression pattern`)],d={immediate:(null==(n=null==(a=null==(t=e.realTimeRisk)?void 0:t.recommendedInterventions)?void 0:a.filter(e=>e.priority<=2))?void 0:n.map(e=>e.description))||[],cultural:e.culturalInterventions.culturalResources,familyBased:"none"!==e.culturalInterventions.familyInvolvement?["Consider family involvement based on cultural preferences"]:[],communityBased:e.culturalInterventions.communityApproach?["Engage community-based support systems"]:[]};N({show:"none"!==r,severity:r,message:l,culturallyAdapted:e.culturalBiasAdjustments.length>0,culturalFactors:c,interventions:d,emergencyMode:o})},[]),A=h.useCallback(e=>{if(!y.lastAnalysis)return[];const s=y.lastAnalysis.culturalInterventions;if(!s)return[];let t=[];return"high"===s.familyInvolvement&&t.push("Family-centered crisis intervention approach recommended"),s.communityApproach&&t.push("Community-based support systems available"),s.religiousConsideration&&t.push("Faith-based counseling and spiritual support options"),s.culturalResources&&t.push(...s.culturalResources),s.languageSpecificResources&&t.push(...s.languageSpecificResources),t},[y.lastAnalysis]),M=h.useCallback((e,s,t)=>u(null,null,function*(){var a;y.lastAnalysis&&(yield L.updateCulturalPatterns({text:e,culturalRegion:y.lastAnalysis.culturalContext,actualRisk:s,predictedRisk:(null==(a=y.lastAnalysis.culturallyAdjustedRisk)?void 0:a.adjustedRisk)||0,culturallyAppropriate:t}))}),[y.lastAnalysis]),z=h.useCallback(()=>u(null,null,function*(){try{const e=yield L.getCulturalMetrics(p);return b(s=>o(l({},s),{culturalMetrics:{totalAnalyses:e.totalAnalyses,biasReductionRate:e.biasReductionRate,culturalAccuracy:e.culturalAccuracy}})),e}catch(e){return null}}),[p]),E=h.useCallback(()=>{N(e=>o(l({},e),{show:!1}))},[]),D=h.useCallback(()=>{b(e=>o(l({},e),{analysisHistory:[],lastAnalysis:null,culturallyAdjustedRisk:0,biasAdjustments:[],culturalInterventions:null})),C.current=""},[]);return h.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]),h.useEffect(()=>{z()},[z]),{isAnalyzing:y.isAnalyzing,lastAnalysis:y.lastAnalysis,culturallyAdjustedRisk:y.culturallyAdjustedRisk,biasAdjustments:y.biasAdjustments,culturalInterventions:y.culturalInterventions,analysisHistory:y.analysisHistory,culturalMetrics:y.culturalMetrics,culturalAlert:j,analyzeCulturalCrisis:S,analyzeWithDebounce:k,getCulturalInterventions:A,provideCulturalFeedback:M,getCulturalMetrics:z,dismissCulturalAlert:E,clearAnalysisHistory:D,hasCulturalBias:y.biasAdjustments.length>0,requiresFamilyInvolvement:"high"===(null==(s=y.culturalInterventions)?void 0:s.familyInvolvement),needsCommunitySupport:(null==(t=y.culturalInterventions)?void 0:t.communityApproach)||!1,includesReligiousSupport:(null==(a=y.culturalInterventions)?void 0:a.religiousConsideration)||!1,currentCulturalContext:(null==(n=y.lastAnalysis)?void 0:n.culturalContext)||p||"Western"}}const ot=({analysisText:e,languageCode:s="en",culturalContext:t,userId:a,show:n=!1,userType:i="seeker",onCrisisDetected:r,onCulturalBiasDetected:c,onCulturalInterventionRecommended:d,onEmergencyCall:u,onCrisisChat:p,onDismiss:g})=>{const{t:v,language:x}=Ds(),[f,y]=h.useState({show:!1,severity:"none",message:"",actions:[],resources:[],emergencyMode:!1,culturalFactors:[],culturallyAdapted:!1}),{isAnalyzing:b,lastAnalysis:j,culturalAlert:N,analyzeCulturalCrisis:w,getCulturalInterventions:C,dismissCulturalAlert:S}=lt({autoAnalyze:!0,languageCode:s||x,culturalContext:t,userId:a,onCrisisDetected:r,onCulturalBiasDetected:c,onCulturalInterventionRecommended:d});h.useEffect(()=>{e&&e.trim().length>10&&w(e,{immediate:!0,trackHistory:!0})},[e,w]),h.useEffect(()=>{if(N.show||n){const e="none"!==N.severity?N.severity:"medium",t=N.culturalFactors||[],a=N.culturallyAdapted;let n="";n=a&&t.length>0?v("crisis.cultural_alert_message",{factors:t.join(", "),defaultValue:"Help is available. Your cultural background has been considered in these recommendations."}):v("crisis.standard_alert_message",{defaultValue:"Help is available. You are not alone."});const i=C(),r=[],l=[];(null==j?void 0:j.culturalIndicators)&&j.culturalIndicators.forEach(e=>{const s=e.type||e.indicator;s&&r.push(s)}),i&&i.length>0&&r.push(...i),"es"===s?l.push(v("crisis.resource.spanish_lifeline",{defaultValue:"Línea Nacional de Prevención del Suicidio: 988"})):"zh"===s?l.push(v("crisis.resource.chinese_support",{defaultValue:"Chinese Mental Health Helpline: 1-844-292-4357"})):"ar"===s&&l.push(v("crisis.resource.arabic_support",{defaultValue:"Arabic Crisis Support: 988 (Arabic available)"})),l.push(v("crisis.resource.national_lifeline",{defaultValue:"988 Suicide & Crisis Lifeline"}),v("crisis.resource.crisis_text",{defaultValue:"Crisis Text Line: Text HOME to 741741"})),y({show:!0,severity:e,message:n,actions:r.slice(0,5),resources:l.slice(0,4),emergencyMode:"critical"===e||N.emergencyMode,culturalFactors:t,culturallyAdapted:a})}else y(e=>o(l({},e),{show:!1}))},[N,n,v,s,C]);return b&&e?m.jsx("output",{className:"cultural-crisis-alert-loading","aria-live":"polite",children:m.jsxs("div",{className:"loading-content",children:[m.jsx("div",{className:"loading-spinner"}),m.jsx("span",{children:v("crisis.analyzing_with_cultural_context",{defaultValue:"Analyzing with cultural context..."})})]})}):m.jsxs(m.Fragment,{children:[m.jsx(_,{show:f.show,severity:f.severity,message:f.message,actions:f.actions,resources:f.resources,emergencyMode:f.emergencyMode,onDismiss:()=>{S(),y(e=>o(l({},e),{show:!1})),null==g||g()},onEmergencyCall:()=>{j&&j.culturalContext,null==u||u()},onCrisisChat:()=>{j&&j.culturalContext,null==p||p()},userType:i}),f.culturallyAdapted&&f.culturalFactors.length>0&&m.jsx("aside",{className:"cultural-context-indicator","aria-label":"Cultural context information",children:m.jsxs("div",{className:"cultural-indicator-content",children:[m.jsx("span",{className:"cultural-indicator-icon",children:"🌍"}),m.jsx("span",{className:"cultural-indicator-text",children:v("crisis.cultural_awareness_active",{defaultValue:"Cultural awareness active"})}),m.jsx("div",{className:"cultural-factors-list",children:f.culturalFactors.map((e,s)=>m.jsx("span",{className:"cultural-factor-tag",children:e},`cultural-factor-${e}-${s}`))})]})})]})},ct=e=>{var s=e,{label:t,id:a,className:n="",containerStyle:i,enhanced:r=!0,floatingLabel:d=!1,error:u,helpText:p,mobileOptimized:g=!0,variant:v="glass",animate:x=!0}=s,f=c(s,["label","id","className","containerStyle","enhanced","floatingLabel","error","helpText","mobileOptimized","variant","animate"]);const y=h.useRef(null),b=r?"form-group-enhanced smooth-transition":"form-group";let j="form-control";if(r)if("neumorph"===v)j="neumorph-input";else j="form-control-enhanced glass-input";const N=r&&d?"form-floating-enhanced":"",w=x&&r?"smooth-transition":"",C=a||`input-${Math.random().toString(36).substring(2,11)}`,S=h.useCallback(e=>{if(!g)return;const s=e.currentTarget;s&&s!==document.activeElement&&(e.preventDefault(),s.focus(),setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100))},[g]),k=h.useCallback(e=>{g&&e.currentTarget.classList.add("mobile-focused"),f.onFocus&&f.onFocus(e)},[g,f.onFocus]),I=h.useCallback(e=>{g&&e.currentTarget.classList.remove("mobile-focused"),f.onBlur&&f.onBlur(e)},[g,f.onBlur]),A=l(o(l({},f),{id:C,ref:y,className:`${j} ${w} ${n} ${u?"is-invalid":""} ${g?"mobile-optimized":""}`.trim(),"aria-invalid":u?"true":"false","aria-describedby":[u?`${C}-error`:"",p?`${C}-help`:""].filter(Boolean).join(" ")||void 0,style:l({minHeight:"44px"},f.style),onFocus:k,onBlur:I}),g&&{onTouchStart:S,style:l({fontSize:"email"===f.type||"text"===f.type||"password"===f.type?"16px":void 0,minHeight:"44px"},f.style),autoComplete:f.autoComplete||"off",autoCorrect:"off",autoCapitalize:f.autoCapitalize||"none",spellCheck:void 0!==f.spellCheck&&f.spellCheck});return m.jsxs("div",{className:`${b} ${N}`,style:i,children:[!d&&t&&m.jsx("label",{htmlFor:C,children:t}),m.jsx("input",l({},A)),d&&t&&m.jsx("label",{htmlFor:C,children:t}),u&&m.jsx("div",{id:`${C}-error`,className:"invalid-feedback",role:"alert",children:u}),p&&!u&&m.jsx("div",{id:`${C}-help`,className:"form-text",children:p})]})},dt=e=>{var s=e,{label:t,id:a,className:n="",containerStyle:i,footer:r,enhanced:d=!0,error:u,helpText:p,mobileOptimized:g=!0,variant:v="glass",animate:x=!0}=s,f=c(s,["label","id","className","containerStyle","footer","enhanced","error","helpText","mobileOptimized","variant","animate"]);const y=h.useRef(null),b=d?"form-group-enhanced smooth-transition":"form-group";let j="form-control";if(d)if("neumorph"===v)j="neumorph-input";else j="form-control-enhanced glass-input";const N=x&&d?"smooth-transition":"",w=a||`textarea-${Math.random().toString(36).substring(2,11)}`,C=h.useCallback(e=>{if(!g)return;const s=e.currentTarget;s&&s!==document.activeElement&&(e.preventDefault(),s.focus(),setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})},100))},[g]),S=h.useCallback(e=>{g&&e.currentTarget.classList.add("mobile-focused"),f.onFocus&&f.onFocus(e)},[g,f.onFocus]),k=h.useCallback(e=>{g&&e.currentTarget.classList.remove("mobile-focused"),f.onBlur&&f.onBlur(e)},[g,f.onBlur]),I=l(o(l({},f),{id:w,ref:y,className:`${j} ${N} ${n} ${u?"is-invalid":""} ${g?"mobile-optimized":""}`.trim(),"aria-invalid":u?"true":"false","aria-describedby":[u?`${w}-error`:"",p?`${w}-help`:""].filter(Boolean).join(" ")||void 0,style:l({minHeight:"44px"},f.style),onFocus:S,onBlur:k}),g&&{onTouchStart:C,style:l({fontSize:"16px",minHeight:"44px"},f.style),autoCorrect:"off",spellCheck:void 0===f.spellCheck||f.spellCheck});return m.jsxs("div",{className:b,style:i,children:[t&&m.jsx("label",{htmlFor:w,children:t}),m.jsx("textarea",l({},I)),u&&m.jsx("div",{id:`${w}-error`,className:"invalid-feedback",role:"alert",children:u}),p&&!u&&m.jsx("div",{id:`${w}-help`,className:"form-text",children:p}),r&&m.jsx("div",{className:"form-group-footer",children:r})]})},ut=({isActive:e=!0,className:s="",style:t,message:a="AI assistance active",variant:n="default"})=>{const i=["ai-assistance-indicator","default"!==n?`ai-assistance-indicator-${n}`:"",e?"ai-assistance-active":"ai-assistance-inactive",s].filter(Boolean).join(" ");return m.jsxs("div",{className:i,style:t,role:"status","aria-live":"polite","aria-label":e?a:"AI assistance inactive",children:[m.jsx("div",{className:"ai-indicator-icon","aria-hidden":"true",children:m.jsx("span",{className:"ai-indicator-pulse"})}),"minimal"!==n&&m.jsx("span",{className:"ai-indicator-text",children:e?a:"AI assistance inactive"})]})},ht=[{id:"1",name:"Dr. Sarah Chen",avatar:"👩‍⚕️",specialty:"Anxiety & Stress Management",bio:"Specializes in helping people manage anxiety and stress through mindfulness and cognitive techniques.",approach:"CBT & Mindfulness",languages:["English","Mandarin"],availability:"always",tags:["Anxiety","Stress","Mindfulness","Work-Life Balance"]},{id:"2",name:"Dr. Marcus Johnson",avatar:"👨‍⚕️",specialty:"Depression & Mood Support",bio:"Focused on supporting individuals through depression and mood challenges with empathy and understanding.",approach:"Person-Centered Therapy",languages:["English"],availability:"always",tags:["Depression","Mood","Self-Esteem","Motivation"]},{id:"3",name:"Dr. Elena Rodriguez",avatar:"👩‍🦰",specialty:"Relationship & Social Issues",bio:"Helps navigate relationship challenges and social difficulties with practical, compassionate guidance.",approach:"Systemic Therapy",languages:["English","Spanish"],availability:"always",tags:["Relationships","Communication","Family","Boundaries"]},{id:"4",name:"Dr. Aisha Patel",avatar:"👩🏽‍⚕️",specialty:"Trauma & PTSD Recovery",bio:"Experienced in trauma-informed care, helping individuals process and heal from difficult experiences.",approach:"EMDR & Somatic Therapy",languages:["English","Hindi"],availability:"always",tags:["Trauma","PTSD","Healing","Safety"]},{id:"5",name:"Dr. James Kim",avatar:"👨🏻‍⚕️",specialty:"LGBTQ+ Support & Identity",bio:"Provides affirming support for LGBTQ+ individuals navigating identity, relationships, and acceptance.",approach:"Affirmative Therapy",languages:["English","Korean"],availability:"always",tags:["LGBTQ+","Identity","Coming Out","Acceptance"]},{id:"6",name:"Dr. Fatima Al-Rashid",avatar:"🧕",specialty:"Cultural & Spiritual Wellness",bio:"Integrates cultural sensitivity and spiritual perspectives in mental health support.",approach:"Culturally-Responsive Therapy",languages:["English","Arabic"],availability:"always",tags:["Culture","Spirituality","Faith","Identity"]},{id:"7",name:"Dr. Michael Thompson",avatar:"👨‍⚕️",specialty:"Addiction & Recovery Support",bio:"Supports individuals in addiction recovery with compassion and evidence-based strategies.",approach:"Motivational Interviewing",languages:["English"],availability:"always",tags:["Addiction","Recovery","Sobriety","Coping"]},{id:"8",name:"Dr. Luna Nakamura",avatar:"👩🏻‍💼",specialty:"Teen & Young Adult Issues",bio:"Specializes in supporting teens and young adults through life transitions and challenges.",approach:"DBT & Art Therapy",languages:["English","Japanese"],availability:"always",tags:["Teens","School","Peer Pressure","Identity"]},{id:"9",name:"Dr. Robert Stone",avatar:"👨‍🦳",specialty:"Grief & Loss Counseling",bio:"Provides gentle support for those experiencing grief, loss, and life transitions.",approach:"Grief Counseling",languages:["English"],availability:"always",tags:["Grief","Loss","Bereavement","Healing"]},{id:"10",name:"Dr. Sofia Andersson",avatar:"👩‍🔬",specialty:"Neurodivergent Support",bio:"Supports individuals with ADHD, autism, and other neurodivergent conditions.",approach:"Neurodiversity-Affirming",languages:["English","Swedish"],availability:"always",tags:["ADHD","Autism","Neurodiversity","Executive Function"]},{id:"11",name:"Dr. David Chen-Williams",avatar:"👨🏽‍⚕️",specialty:"Men's Mental Health",bio:"Focuses on men's mental health issues including emotional expression and masculine identity.",approach:"Gender-Aware Therapy",languages:["English"],availability:"always",tags:["Men's Health","Emotions","Masculinity","Vulnerability"]},{id:"12",name:"Dr. Maria Santos",avatar:"👩🏽‍💼",specialty:"Workplace & Career Stress",bio:"Helps professionals manage burnout, career transitions, and workplace challenges.",approach:"Solution-Focused Therapy",languages:["English","Portuguese"],availability:"always",tags:["Career","Burnout","Work Stress","Leadership"]}],mt=({onSelectTherapist:e,selectedTherapist:s})=>{const[t,a]=h.useState(""),[n,i]=h.useState(null),r=Array.from(new Set(ht.flatMap(e=>e.tags||[]))),l=ht.filter(e=>{var s,a;const i=""===t||e.name.toLowerCase().includes(t.toLowerCase())||e.specialty.toLowerCase().includes(t.toLowerCase())||e.bio.toLowerCase().includes(t.toLowerCase())||(null==(s=e.tags)?void 0:s.some(e=>e.toLowerCase().includes(t.toLowerCase()))),r=!n||(null==(a=e.tags)?void 0:a.includes(n));return i&&r});return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"\n        .therapist-selector {\n          padding: 1.5rem;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        .therapist-selector-header {\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .therapist-selector-header h2 {\n          font-size: 2rem;\n          margin-bottom: 0.5rem;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n          background-clip: text;\n        }\n\n        .therapist-selector-header p {\n          color: var(--text-secondary);\n          font-size: 1.1rem;\n        }\n\n        .therapist-search {\n          margin-bottom: 1.5rem;\n        }\n\n        .search-input {\n          width: 100%;\n          padding: 1rem;\n          border: 2px solid var(--border-color);\n          border-radius: 12px;\n          font-size: 1rem;\n          background: var(--bg-secondary);\n          color: var(--text-primary);\n          transition: all 0.3s ease;\n        }\n\n        .search-input:focus {\n          outline: none;\n          border-color: var(--accent-primary);\n          box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n        }\n\n        .therapist-tags {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 0.5rem;\n          margin-bottom: 2rem;\n        }\n\n        .tag-filter {\n          padding: 0.5rem 1rem;\n          border-radius: 20px;\n          background: var(--bg-secondary);\n          color: var(--text-secondary);\n          border: 1px solid var(--border-color);\n          cursor: pointer;\n          transition: all 0.3s ease;\n          font-size: 0.9rem;\n        }\n\n        .tag-filter:hover {\n          border-color: var(--accent-primary);\n          color: var(--accent-primary);\n        }\n\n        .tag-filter.active {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          border-color: transparent;\n        }\n\n        .therapist-list {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n          gap: 1.5rem;\n        }\n\n        .therapist-card {\n          background: var(--card-bg);\n          border-radius: 16px;\n          padding: 1.5rem;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          border: 2px solid transparent;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .therapist-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: linear-gradient(90deg, #667eea, #764ba2, #f27121, #e94057);\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n\n        .therapist-card:hover {\n          transform: translateY(-4px);\n          box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n          border-color: var(--accent-primary);\n        }\n\n        .therapist-card:hover::before {\n          opacity: 1;\n        }\n\n        .therapist-card.selected {\n          border-color: var(--accent-primary);\n          background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);\n        }\n\n        .therapist-card.selected::before {\n          opacity: 1;\n        }\n\n        .therapist-card-header {\n          display: flex;\n          align-items: center;\n          margin-bottom: 1rem;\n        }\n\n        .therapist-avatar {\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 1rem;\n          position: relative;\n        }\n\n        .therapist-emoji {\n          font-size: 2rem;\n        }\n\n        .availability-badge {\n          position: absolute;\n          bottom: -2px;\n          right: -2px;\n          width: 16px;\n          height: 16px;\n          background: #10b981;\n          border-radius: 50%;\n          border: 2px solid var(--card-bg);\n        }\n\n        .therapist-info {\n          flex: 1;\n        }\n\n        .therapist-info h3 {\n          margin: 0 0 0.25rem 0;\n          font-size: 1.1rem;\n          color: var(--text-primary);\n        }\n\n        .therapist-specialty {\n          color: var(--accent-primary);\n          font-weight: 600;\n          font-size: 0.9rem;\n          margin-bottom: 0.5rem;\n        }\n\n        .therapist-bio {\n          color: var(--text-secondary);\n          line-height: 1.5;\n          font-size: 0.95rem;\n          margin-bottom: 0.75rem;\n        }\n\n        .therapist-approach {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          color: var(--text-secondary);\n          font-size: 0.85rem;\n          margin-bottom: 0.5rem;\n        }\n\n        .therapist-languages {\n          display: flex;\n          gap: 0.5rem;\n          flex-wrap: wrap;\n          margin-bottom: 0.75rem;\n        }\n\n        .language-badge {\n          padding: 0.25rem 0.5rem;\n          background: rgba(102, 126, 234, 0.1);\n          color: var(--accent-primary);\n          border-radius: 8px;\n          font-size: 0.8rem;\n        }\n\n        .therapist-tags-list {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 0.5rem;\n        }\n\n        .therapist-tag {\n          padding: 0.25rem 0.75rem;\n          background: var(--bg-secondary);\n          color: var(--text-secondary);\n          border-radius: 12px;\n          font-size: 0.8rem;\n        }\n\n        .no-results {\n          text-align: center;\n          padding: 3rem;\n          color: var(--text-secondary);\n        }\n\n        .no-results h3 {\n          margin-bottom: 1rem;\n          color: var(--text-primary);\n        }\n\n        @media (max-width: 768px) {\n          .therapist-list {\n            grid-template-columns: 1fr;\n          }\n\n          .therapist-selector-header h2 {\n            font-size: 1.5rem;\n          }\n        }\n      "}),m.jsxs("div",{className:"therapist-selector",children:[m.jsxs("div",{className:"therapist-selector-header",children:[m.jsx("h2",{children:"Choose Your AI Companion"}),m.jsx("p",{children:"Select a specialized AI therapist that matches your current needs"})]}),m.jsx("div",{className:"therapist-search",children:m.jsx("input",{type:"text",className:"search-input",placeholder:"Search by name, specialty, or concern...",value:t,onChange:e=>a(e.target.value)})}),m.jsxs("div",{className:"therapist-tags",children:[m.jsx("button",{className:"tag-filter "+(n?"":"active"),onClick:()=>i(null),children:"All Specialties"}),r.map(e=>m.jsx("button",{className:"tag-filter "+(n===e?"active":""),onClick:()=>i(e===n?null:e),children:e},e))]}),m.jsx("div",{className:"therapist-list",children:l.length>0?l.map(t=>m.jsxs("div",{className:"therapist-card "+((null==s?void 0:s.id)===t.id?"selected":""),onClick:()=>e(t),children:[m.jsxs("div",{className:"therapist-card-header",children:[m.jsxs("div",{className:"therapist-avatar",children:[m.jsx("span",{className:"therapist-emoji",children:t.avatar}),"always"===t.availability&&m.jsx("div",{className:"availability-badge"})]}),m.jsxs("div",{className:"therapist-info",children:[m.jsx("h3",{children:t.name}),m.jsx("div",{className:"therapist-specialty",children:t.specialty})]})]}),m.jsx("p",{className:"therapist-bio",children:t.bio}),t.approach&&m.jsxs("div",{className:"therapist-approach",children:[m.jsx(os,{}),m.jsx("span",{children:t.approach})]}),t.languages&&m.jsx("div",{className:"therapist-languages",children:t.languages.map(e=>m.jsx("span",{className:"language-badge",children:e},e))}),t.tags&&m.jsx("div",{className:"therapist-tags-list",children:t.tags.slice(0,3).map(e=>m.jsx("span",{className:"therapist-tag",children:e},e))})]},t.id)):m.jsxs("div",{className:"no-results",children:[m.jsx("h3",{children:"No therapists found"}),m.jsx("p",{children:"Try adjusting your search or filters to find the right companion for you."})]})})]})]})},pt=[{id:"terrible",emoji:"😢",label:"Terrible",value:1,color:"#ef4444",description:"Feeling really down today"},{id:"bad",emoji:"😞",label:"Bad",value:2,color:"#f97316",description:"Not having a good day"},{id:"okay",emoji:"😐",label:"Okay",value:3,color:"#eab308",description:"Feeling neutral"},{id:"good",emoji:"🙂",label:"Good",value:4,color:"#22c55e",description:"Having a good day"},{id:"great",emoji:"😊",label:"Great",value:5,color:"#10b981",description:"Feeling amazing!"}],gt=["Grateful","Anxious","Tired","Hopeful","Stressed","Calm","Lonely","Productive","Excited","Peaceful","Overwhelmed","Confident","Sad","Energetic","Worried","Hopeless","Trapped","Worthless","Alone"],vt=({onMoodSubmit:e})=>{const[s,t]=h.useState(null),[a,n]=h.useState([]),[i,r]=h.useState(""),[l,o]=h.useState(!1),[c,d]=h.useState(!1),{addToast:p}=Y(),{dismissCulturalAlert:g}=lt(),v=()=>{t(null),n([]),r(""),o(!1),d(!1)};return l&&s?m.jsx("div",{className:"mood-tracker submitted",children:m.jsxs("div",{className:"mood-submitted-content",children:[m.jsx("div",{className:"mood-submitted-icon",children:m.jsx(be,{})}),m.jsx("h3",{children:"Mood Logged Successfully!"}),m.jsxs("div",{className:"mood-submitted-summary",children:[m.jsx("div",{className:"mood-submitted-emoji",style:{color:s.color},children:s.emoji}),m.jsxs("p",{children:["You're feeling ",m.jsx("strong",{children:s.label.toLowerCase()})," today"]}),a.length>0&&m.jsx("div",{className:"mood-submitted-tags",children:a.map(e=>m.jsx("span",{className:"mood-tag selected",children:e},e))})]}),m.jsx($s,{enhanced:!0,size:"sm",variant:"secondary",onClick:v,children:"Log Another Mood"})]})}):m.jsxs("div",{className:"mood-tracker",children:[c&&m.jsx(ot,{analysisText:`Mood: ${null==s?void 0:s.label} (${null==s?void 0:s.value}/5). Tags: ${a.join(", ")}. Note: ${i.trim()}`,show:!0,onDismiss:()=>{d(!1),g()}}),m.jsx("div",{className:"mood-tracker-header",children:m.jsxs("div",{className:"mood-header-content",children:[m.jsx(ve,{}),m.jsxs("div",{children:[m.jsx("h2",{children:"How are you feeling today?"}),m.jsx("p",{children:"Take a moment to check in with yourself"})]})]})}),m.jsxs("div",{className:"mood-selection",children:[m.jsx("h3",{children:"Select your mood"}),m.jsx("div",{className:"mood-options",children:pt.map(e=>m.jsxs("button",{className:"mood-option "+((null==s?void 0:s.id)===e.id?"selected":""),onClick:()=>(e=>{t(e),o(!1)})(e),style:{"--mood-color":e.color,borderColor:(null==s?void 0:s.id)===e.id?e.color:"transparent"},children:[m.jsx("div",{className:"mood-emoji",children:e.emoji}),m.jsx("div",{className:"mood-label",children:e.label}),m.jsx("div",{className:"mood-description",children:e.description}),(null==s?void 0:s.id)===e.id&&m.jsx("div",{className:"mood-selected-indicator",children:m.jsx(be,{})})]},e.id))})]}),s&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mood-tags-section",children:[m.jsx("h3",{children:"What's contributing to this feeling? (optional)"}),m.jsx("div",{className:"mood-tags",children:gt.map(e=>m.jsxs("button",{className:"mood-tag "+(a.includes(e)?"selected":""),onClick:()=>(e=>{n(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(e),children:[e,a.includes(e)&&m.jsx(be,{})]},e))})]}),m.jsxs("div",{className:"mood-note-section",children:[m.jsx("h3",{children:"Any additional thoughts? (optional)"}),m.jsx("textarea",{value:i,onChange:e=>r(e.target.value),placeholder:"How was your day? What's on your mind?",className:"mood-note-input",rows:3,maxLength:500}),m.jsxs("div",{className:"mood-note-counter",children:[i.length,"/500 characters"]})]}),m.jsxs("div",{className:"mood-tracker-actions form-actions",children:[m.jsx($s,{enhanced:!0,size:"sm",variant:"secondary",onClick:v,children:"Reset"}),m.jsx($s,{enhanced:!0,size:"md",variant:"primary",onClick:()=>u(null,null,function*(){if(!s)return void p("Please select your mood first","error");const t=s.value<=2,n=a.some(e=>["hopeless","overwhelmed","trapped","worthless","alone"].includes(e.toLowerCase())),r=i.toLowerCase().includes("suicide")||i.toLowerCase().includes("hurt myself")||i.toLowerCase().includes("end it all");if(t||n||r)return void d(!0);const l={value:s.value,tags:a,note:i.trim()};null==e||e(l),o(!0),p(`Mood logged: ${s.label} 💜`,"success"),setTimeout(()=>{o(!1)},3e3)}),icon:m.jsx(os,{}),children:"Log My Mood"})]})]})]})},xt=({moodAverage:e,streakDays:s,totalCheckIns:t,topMood:a})=>{const n=(()=>{const a=[];return s>=7&&a.push({type:"achievement",message:`Amazing! You've checked in for ${s} days straight!`,icon:m.jsx(Je,{})}),e>=4?a.push({type:"positive",message:"Your mood has been consistently positive this week!",icon:m.jsx(ve,{})}):e>=3&&a.push({type:"improvement",message:"Your mood is stable. Small daily habits can boost it further.",icon:m.jsx(os,{})}),t>=30&&a.push({type:"achievement",message:`You've completed ${t} check-ins! Self-awareness is growing.`,icon:m.jsx(ms,{})}),a.length||a.push({type:"improvement",message:"Keep tracking to unlock personalized insights!",icon:m.jsx(os,{})}),a})();return m.jsxs("div",{className:"wellness-insights-card",children:[m.jsx("div",{className:"insights-header",children:m.jsxs("h3",{className:"insights-title",children:[m.jsx(os,{className:"insights-icon"}),"Your Wellness Insights"]})}),m.jsxs("div",{className:"insights-grid",children:[m.jsxs("div",{className:"insight-stat",children:[m.jsx("div",{className:"stat-icon-circle",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:m.jsx(ve,{})}),m.jsxs("div",{className:"stat-details",children:[m.jsx("span",{className:"stat-number",children:e.toFixed(1)}),m.jsx("span",{className:"stat-label",children:"Avg Mood"})]})]}),m.jsxs("div",{className:"insight-stat",children:[m.jsx("div",{className:"stat-icon-circle",style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},children:"🔥"}),m.jsxs("div",{className:"stat-details",children:[m.jsx("span",{className:"stat-number",children:s}),m.jsx("span",{className:"stat-label",children:"Day Streak"})]})]}),m.jsxs("div",{className:"insight-stat",children:[m.jsx("div",{className:"stat-icon-circle",style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},children:"✨"}),m.jsxs("div",{className:"stat-details",children:[m.jsx("span",{className:"stat-number",children:t}),m.jsx("span",{className:"stat-label",children:"Check-ins"})]})]}),m.jsxs("div",{className:"insight-stat",children:[m.jsx("div",{className:"stat-icon-circle",style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},children:a}),m.jsxs("div",{className:"stat-details",children:[m.jsx("span",{className:"stat-number",children:"Top"}),m.jsx("span",{className:"stat-label",children:"Mood"})]})]})]}),m.jsx("div",{className:"insights-messages",children:n.map((e,s)=>m.jsxs("div",{className:`insight-message insight-${e.type}`,style:{animationDelay:.2*s+"s"},children:[m.jsx("span",{className:"insight-icon",children:e.icon}),m.jsx("p",{className:"insight-text",children:e.message})]},s))}),m.jsx("div",{className:"insights-footer",children:m.jsx("p",{className:"insights-tip",children:"💡 Consistency is key - even small check-ins make a difference!"})})]})},ft=["😞","🙁","😐","🙂","😊"],yt=["#FF5722","#FF9800","#FFC107","#8BC34A","#4CAF50"],bt=({data:e,period:s})=>{const t=e=>{const s=Math.min(Math.floor(e)-1,4);return yt[Math.max(0,s)]},a=e=>{const s=Math.min(Math.floor(e)-1,4);return ft[Math.max(0,s)]},n=h.useMemo(()=>{if(0===e.length)return 0;return e.reduce((e,s)=>e+s.value,0)/e.length},[e]),i=h.useMemo(()=>{if(e.length<2)return"stable";const s=e.slice(0,Math.floor(e.length/2)),t=e.slice(Math.floor(e.length/2)),a=s.reduce((e,s)=>e+s.value,0)/s.length,n=t.reduce((e,s)=>e+s.value,0)/t.length;return n>a+.3?"improving":n<a-.3?"declining":"stable"},[e]),r=(()=>{switch(i){case"improving":return{text:"Your mood is trending upward! 📈",color:"#4CAF50"};case"declining":return{text:"Your mood needs attention 💙",color:"#FF9800"};default:return{text:"Your mood is stable",color:"#2196F3"}}})();return m.jsxs("div",{className:"enhanced-mood-chart",children:[m.jsxs("div",{className:"chart-header",children:[m.jsx("h3",{className:"chart-title",children:"Mood Journey"}),m.jsxs("div",{className:"chart-period-selector",children:[m.jsx("span",{className:"7days"===s?"active":"",children:"Week"}),m.jsx("span",{className:"30days"===s?"active":"",children:"Month"}),m.jsx("span",{className:"90days"===s?"active":"",children:"Quarter"})]})]}),m.jsxs("div",{className:"chart-summary",children:[m.jsxs("div",{className:"summary-stat",children:[m.jsx("span",{className:"summary-label",children:"Average"}),m.jsxs("span",{className:"summary-value",style:{color:t(n)},children:[a(n)," ",n.toFixed(1)]})]}),m.jsxs("div",{className:"summary-stat",children:[m.jsx("span",{className:"summary-label",children:"Trend"}),m.jsx("span",{className:"summary-value",style:{color:r.color},children:r.text})]})]}),m.jsx("div",{className:"chart-container",children:m.jsxs("div",{className:"chart-grid",children:[m.jsx("div",{className:"chart-y-axis",children:ft.slice().reverse().map((e,s)=>m.jsxs("div",{className:"y-axis-label",children:[m.jsx("span",{className:"emoji-label",children:e}),m.jsx("span",{className:"value-label",children:5-s})]},s))}),m.jsxs("div",{className:"chart-area",children:[m.jsx("div",{className:"chart-grid-lines",children:[5,4,3,2,1].map(e=>m.jsx("div",{className:"grid-line",style:{bottom:(e-1)/4*100+"%"}},e))}),m.jsx("div",{className:"chart-bars",children:e.map((e,s)=>m.jsxs("div",{className:"chart-bar-wrapper",children:[m.jsx("div",{className:"chart-bar",style:{height:(e.value-1)/4*100+"%",backgroundColor:t(e.value),animationDelay:.05*s+"s"},children:m.jsxs("div",{className:"bar-tooltip",children:[m.jsx("span",{className:"tooltip-emoji",children:a(e.value)}),m.jsx("span",{className:"tooltip-value",children:e.value.toFixed(1)}),m.jsx("span",{className:"tooltip-date",children:e.label})]})}),m.jsx("span",{className:"x-axis-label",children:e.label})]},s))}),m.jsx("svg",{className:"trend-line-svg",children:m.jsx("polyline",{className:"trend-line",points:e.map((s,t)=>`${t/(e.length-1)*100},${100-(s.value-1)/4*100}`).join(" "),fill:"none",stroke:t(n),strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"})})]})]})}),0===e.length&&m.jsxs("div",{className:"chart-empty-state",children:[m.jsx("p",{children:"No mood data available for this period"}),m.jsx("p",{className:"empty-state-hint",children:"Start tracking your mood to see beautiful visualizations!"})]})]})},jt=[{name:"4-7-8 Relaxation",inhale:4,hold1:7,exhale:8,hold2:0,description:"Calms the nervous system and reduces anxiety"},{name:"Box Breathing",inhale:4,hold1:4,exhale:4,hold2:4,description:"Used by Navy SEALs for focus and calm"},{name:"Coherent Breathing",inhale:5,hold1:0,exhale:5,hold2:0,description:"Balances the autonomic nervous system"},{name:"Quick Relief",inhale:2,hold1:2,exhale:4,hold2:0,description:"Fast anxiety relief in stressful moments"}],Nt=({embedded:e=!1,onComplete:s,autoStart:t=!1})=>{const[a,n]=h.useState(t),[i,r]=h.useState("inhale"),[l,o]=h.useState(0),[c,d]=h.useState(0),[u,p]=h.useState(jt[0]),[g,v]=h.useState(!0),x=h.useRef(),f=h.useRef(0),y=h.useRef(0);h.useEffect(()=>(a?b():N(),()=>{x.current&&clearInterval(x.current)}),[a,u]);const b=()=>{v(!1),f.current=0,y.current=u.inhale,r("inhale"),o(0),x.current=setInterval(()=>{f.current+=.1;const e=f.current/y.current*100;o(Math.min(e,100)),f.current>=y.current&&j()},100)},j=()=>{const e=["inhale","hold1","exhale","hold2"],s=e.indexOf(i),t=e[(s+1)%4];"hold1"===t&&0===u.hold1?(r("exhale"),y.current=u.exhale):"hold2"===t&&0===u.hold2?(r("inhale"),y.current=u.inhale,d(e=>e+1),w()):(r(t),y.current=u[t]),f.current=0,o(0)},N=()=>{x.current&&clearInterval(x.current),r("inhale"),o(0)},w=()=>{c>=3&&s&&(n(!1),s())},C=()=>{switch(i){case"inhale":return`Breathe In... ${u.inhale}s`;case"hold1":return`Hold... ${u.hold1}s`;case"exhale":return`Breathe Out... ${u.exhale}s`;case"hold2":return`Hold... ${u.hold2}s`}},S=()=>{switch(i){case"inhale":return"#4CAF50";case"hold1":case"hold2":return"#FFC107";case"exhale":return"#2196F3"}};return e?m.jsx("div",{className:"breathing-widget-embedded",children:m.jsxs("div",{className:"breathing-mini",children:[m.jsxs("button",{className:"breathing-mini-toggle",onClick:()=>n(!a),"aria-label":a?"Stop breathing exercise":"Start breathing exercise",children:[m.jsx(ve,{className:"breathing-mini-icon"}),a&&m.jsx("div",{className:"breathing-mini-pulse",style:{backgroundColor:S()}})]}),a&&m.jsx("div",{className:"breathing-mini-text",children:C()})]})}):m.jsxs(Qs,{className:"breathing-widget-card",children:[m.jsxs("div",{className:"breathing-header",children:[m.jsxs("h3",{className:"breathing-title",children:[m.jsx(ve,{className:"breathing-icon"}),"Guided Breathing Exercise"]}),m.jsx("p",{className:"breathing-subtitle",children:"Take a moment to center yourself with controlled breathing"})]}),g&&!a&&m.jsx("div",{className:"breathing-instructions",children:m.jsx("p",{children:"Choose a breathing pattern that suits your needs:"})}),!a&&m.jsx("div",{className:"pattern-selector",children:jt.map(e=>m.jsxs("button",{className:u.name===e.name?"pattern-option selected":"pattern-option",onClick:()=>p(e),children:[m.jsx("div",{className:"pattern-name",children:e.name}),m.jsxs("div",{className:"pattern-timing",children:[e.inhale,"-",e.hold1||0,"-",e.exhale,"-",e.hold2||0]}),m.jsx("div",{className:"pattern-description",children:e.description})]},e.name))}),a&&m.jsxs("div",{className:"breathing-visualization",children:[m.jsxs("div",{className:"breathing-circle-container",children:[m.jsx("div",{className:`breathing-circle ${i}`,style:{transform:`scale(${"inhale"===i?1+l/200:1-l/400})`,backgroundColor:S()},children:m.jsxs("div",{className:"breathing-circle-inner",children:[m.jsx("div",{className:"phase-text",children:C()}),m.jsxs("div",{className:"cycle-count",children:["Cycle ",c+1,"/4"]})]})}),m.jsxs("svg",{className:"breathing-progress-ring",width:"300",height:"300",children:[m.jsx("circle",{className:"progress-ring-bg",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"4",fill:"transparent",r:"140",cx:"150",cy:"150"}),m.jsx("circle",{className:"progress-ring-fill",stroke:S(),strokeWidth:"4",fill:"transparent",r:"140",cx:"150",cy:"150",strokeDasharray:""+2*Math.PI*140,strokeDashoffset:""+2*Math.PI*140*(1-l/100),transform:"rotate(-90 150 150)"})]})]}),m.jsx("div",{className:"breathing-tips",children:m.jsxs("p",{className:"tip-text",children:["inhale"===i&&"Breathe in slowly through your nose","hold1"===i&&"Gently hold your breath","exhale"===i&&"Release slowly through your mouth","hold2"===i&&"Rest before the next breath"]})})]}),m.jsxs("div",{className:"breathing-controls",children:[m.jsx("button",{className:a?"breathing-button stop":"breathing-button start",onClick:()=>n(!a),children:a?m.jsxs(m.Fragment,{children:[m.jsx(Ke,{}),m.jsx("span",{children:"Stop Exercise"})]}):m.jsxs(m.Fragment,{children:[m.jsx(Qe,{}),m.jsx("span",{children:"Start Breathing"})]})}),c>0&&m.jsx("div",{className:"breathing-stats",children:m.jsxs("span",{className:"stat-item",children:[m.jsx(ve,{className:"stat-icon"}),c," cycles completed"]})})]})]})},wt=h.forwardRef((e,s)=>{var t=e,{label:a,error:n,helperText:i,className:r="",id:o}=t,d=c(t,["label","error","helperText","className","id"]);const u=o||`textarea-${Math.random().toString(36).substr(2,9)}`;return m.jsxs("div",{className:"form-group",children:[a&&m.jsx("label",{htmlFor:u,className:"form-label",children:a}),m.jsx("textarea",l({ref:s,id:u,className:`form-textarea${n?" error":""} ${r}`,"aria-invalid":!!n,"aria-describedby":n?`${u}-error`:i?`${u}-helper`:void 0},d)),n&&m.jsx("span",{id:`${u}-error`,className:"form-error",role:"alert",children:n}),i&&!n&&m.jsx("span",{id:`${u}-helper`,className:"form-helper",children:i})]})});wt.displayName="AppTextArea";const Ct=({theme:e="ocean",intensity:s=.5})=>{const t=h.useRef(null);return h.useEffect(()=>{const a=t.current;if(!a)return;const n=a.getContext("2d");if(!n)return;const i=()=>{a.width=window.innerWidth,a.height=window.innerHeight};let r;i(),window.addEventListener("resize",i);let l=0;class o{constructor(){d(this,"x"),d(this,"y"),d(this,"size"),d(this,"speedX"),d(this,"speedY"),d(this,"opacity"),d(this,"hue"),this.x=Math.random()*((null==a?void 0:a.width)||window.innerWidth),this.y=Math.random()*((null==a?void 0:a.height)||window.innerHeight),this.size=3*Math.random()+1,this.speedX=.5*(Math.random()-.5),this.speedY=.5*(Math.random()-.5),this.opacity=.5*Math.random()+.2,this.hue="ocean"===e?200:"forest"===e?120:"sky"===e?210:280}update(){this.x+=this.speedX,this.y+=this.speedY;const e=(null==a?void 0:a.width)||window.innerWidth,s=(null==a?void 0:a.height)||window.innerHeight;this.x<0&&(this.x=e),this.x>e&&(this.x=0),this.y<0&&(this.y=s),this.y>s&&(this.y=0),this.y+=.2*Math.sin(.001*l+.01*this.x)}draw(){if(!n)return;n.save(),n.globalAlpha=this.opacity*s,n.fillStyle=`hsla(${this.hue}, 70%, 60%, ${this.opacity})`,n.beginPath(),n.arc(this.x,this.y,this.size,0,2*Math.PI),n.fill();const e=n.createRadialGradient(this.x,this.y,0,this.x,this.y,3*this.size);e.addColorStop(0,`hsla(${this.hue}, 70%, 60%, ${.3*this.opacity})`),e.addColorStop(1,"transparent"),n.fillStyle=e,n.beginPath(),n.arc(this.x,this.y,3*this.size,0,2*Math.PI),n.fill(),n.restore()}}const c=[];for(let e=0;e<50;e++)c.push(new o);const u=()=>{n.fillStyle="rgba(0, 0, 0, 0.02)",n.fillRect(0,0,a.width,a.height),(()=>{if("ocean"===e||"sky"===e){n.save(),n.globalAlpha=.1*s;for(let s=0;s<3;s++){n.beginPath(),n.strokeStyle="ocean"===e?`hsla(200, 70%, 50%, ${.2-.05*s})`:`hsla(210, 60%, 70%, ${.2-.05*s})`,n.lineWidth=2;for(let e=0;e<a.width;e++){const t=a.height/2+50*Math.sin(.01*e+.001*l+2*s)*(s+1)+20*Math.sin(.02*e+.002*l);0===e?n.moveTo(e,t):n.lineTo(e,t)}n.stroke()}n.restore()}})(),(()=>{if("aurora"===e){n.save(),n.globalAlpha=.15*s;for(let e=0;e<5;e++){const s=n.createLinearGradient(0,0,a.width,a.height),t=.01*l+60*e;s.addColorStop(0,`hsla(${120+t%360}, 70%, 50%, 0.3)`),s.addColorStop(.5,`hsla(${280+t%360}, 70%, 50%, 0.3)`),s.addColorStop(1,`hsla(${200+t%360}, 70%, 50%, 0.3)`),n.fillStyle=s,n.beginPath();for(let i=0;i<=a.width;i+=10){const s=.3*a.height+100*Math.sin(.005*i+.002*l+e)+50*Math.sin(.01*i+.001*l+2*e);0===i?n.moveTo(i,s):n.lineTo(i,s)}n.lineTo(a.width,0),n.lineTo(0,0),n.closePath(),n.fill()}n.restore()}})(),c.forEach(e=>{e.update(),e.draw()}),l++,r=requestAnimationFrame(u)};return u(),()=>{cancelAnimationFrame(r),window.removeEventListener("resize",i)}},[e,s]),m.jsxs("div",{className:"calming-background-container",children:[m.jsx("canvas",{ref:t,className:"calming-canvas","aria-hidden":"true"}),m.jsx("div",{className:`background-overlay theme-${e}`})]})},St=[{minutes:3,label:"3 min",description:"Quick reset"},{minutes:5,label:"5 min",description:"Brief meditation"},{minutes:10,label:"10 min",description:"Standard session"},{minutes:15,label:"15 min",description:"Deep relaxation"},{minutes:20,label:"20 min",description:"Extended practice"},{minutes:30,label:"30 min",description:"Full session"}],kt=[{id:"none",name:"Silence",emoji:"🔇"},{id:"rain",name:"Rain",emoji:"🌧️"},{id:"ocean",name:"Ocean Waves",emoji:"🌊"},{id:"forest",name:"Forest",emoji:"🌲"},{id:"bells",name:"Tibetan Bowls",emoji:"🔔"},{id:"white",name:"White Noise",emoji:"📻"}],It=({onComplete:e})=>{const[s,t]=h.useState(10),[a,n]=h.useState(600),[i,r]=h.useState(!1),[l,o]=h.useState("none"),[c,d]=h.useState(!0),u=h.useRef(),p=h.useRef(),g=h.useRef(),v=h.useRef();h.useEffect(()=>{n(60*s)},[s]),h.useEffect(()=>(i&&a>0?u.current=setInterval(()=>{n(s=>s<=1?(r(!1),y(),null==e||e(),0):s-1)},1e3):u.current&&clearInterval(u.current),()=>{u.current&&clearInterval(u.current)}),[i,a,e]),h.useEffect(()=>("undefined"==typeof window||p.current||(p.current=new(window.AudioContext||window.webkitAudioContext)),()=>{f()}),[]),h.useEffect(()=>{i&&"none"!==l?x():f()},[i,l]);const x=()=>{if(!p.current)return;f();const e=p.current;switch(g.current=e.createOscillator(),v.current=e.createGain(),g.current.connect(v.current),v.current.connect(e.destination),l){case"rain":g.current.type="square",g.current.frequency.value=100,v.current.gain.value=.01;break;case"ocean":g.current.type="sine",g.current.frequency.value=50,v.current.gain.value=.02,g.current.frequency.setValueCurveAtTime(new Float32Array([50,60,50,40,50]),e.currentTime,5);break;case"forest":g.current.type="triangle",g.current.frequency.value=200,v.current.gain.value=.005;break;case"bells":g.current.type="sine",g.current.frequency.value=528,v.current.gain.value=.02;break;case"white":const s=2*e.sampleRate,t=e.createBuffer(1,s,e.sampleRate),a=t.getChannelData(0);for(let e=0;e<s;e++)a[e]=2*Math.random()-1;const n=e.createBufferSource();return n.buffer=t,n.loop=!0,n.connect(v.current),v.current.gain.value=.01,void n.start()}g.current.start()},f=()=>{g.current&&(g.current.stop(),g.current=void 0)},y=()=>{if(!p.current)return;const e=p.current,s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.setValueAtTime(523.25,e.currentTime),s.frequency.setValueAtTime(659.25,e.currentTime+.2),s.frequency.setValueAtTime(783.99,e.currentTime+.4),t.gain.setValueAtTime(.3,e.currentTime),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+1),s.start(e.currentTime),s.stop(e.currentTime+1)},b=()=>(60*s-a)/(60*s)*100;return m.jsxs("div",{className:"meditation-timer-card",children:[m.jsxs("div",{className:"timer-header",children:[m.jsx("h3",{className:"timer-title",children:"Meditation Timer"}),m.jsx("p",{className:"timer-subtitle",children:"Find your inner peace"})]}),!i&&m.jsx("div",{className:"time-presets",children:St.map(e=>m.jsxs("button",{className:"preset-btn "+(s===e.minutes?"active":""),onClick:()=>t(e.minutes),children:[m.jsx("span",{className:"preset-label",children:e.label}),m.jsx("span",{className:"preset-description",children:e.description})]},e.minutes))}),m.jsx("div",{className:"timer-display-container",children:m.jsxs("div",{className:"timer-circle",children:[m.jsxs("svg",{className:"timer-svg",viewBox:"0 0 200 200",children:[m.jsx("circle",{className:"timer-circle-bg",cx:"100",cy:"100",r:"90",fill:"none",stroke:"rgba(102, 126, 234, 0.1)",strokeWidth:"8"}),m.jsx("circle",{className:"timer-circle-progress",cx:"100",cy:"100",r:"90",fill:"none",stroke:"url(#timerGradient)",strokeWidth:"8",strokeDasharray:5.65*b()+" 565",strokeLinecap:"round",transform:"rotate(-90 100 100)"}),m.jsx("defs",{children:m.jsxs("linearGradient",{id:"timerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[m.jsx("stop",{offset:"0%",stopColor:"#667eea"}),m.jsx("stop",{offset:"100%",stopColor:"#764ba2"})]})})]}),m.jsxs("div",{className:"timer-display",children:[m.jsx("div",{className:"timer-time",children:(e=>{const s=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`})(a)}),i&&c&&m.jsx("div",{className:"timer-guidance",children:(()=>{const e=b();return e<10?"Find a comfortable position and close your eyes...":e<30?"Focus on your breath, in and out...":e<50?"Let thoughts pass like clouds in the sky...":e<70?"Return to your breath when your mind wanders...":e<90?"You're doing great, stay present...":"Gently prepare to return..."})()})]})]})}),m.jsxs("div",{className:"ambient-sounds",children:[m.jsxs("h4",{className:"sounds-title",children:[m.jsx(Ze,{className:"sounds-icon"}),"Ambient Sound"]}),m.jsx("div",{className:"sound-options",children:kt.map(e=>m.jsxs("button",{className:"sound-btn "+(l===e.id?"active":""),onClick:()=>o(e.id),disabled:i,children:[m.jsx("span",{className:"sound-emoji",children:e.emoji}),m.jsx("span",{className:"sound-name",children:e.name})]},e.id))})]}),m.jsxs("div",{className:"timer-controls",children:[m.jsxs("button",{className:"timer-btn primary",onClick:()=>{r(!i)},children:[i?m.jsx(Ke,{}):m.jsx(Qe,{}),m.jsx("span",{children:i?"Pause":"Start"})]}),m.jsxs("button",{className:"timer-btn secondary",onClick:()=>{r(!1),n(60*s),f()},children:[m.jsx(ps,{}),m.jsx("span",{children:"Reset"})]})]}),m.jsx("div",{className:"timer-settings",children:m.jsxs("label",{className:"setting-toggle",children:[m.jsx("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked)}),m.jsx("span",{children:"Show guidance messages"})]})})]})},At=({title:e="No content yet",message:s="There's nothing to show here at the moment.",icon:t,action:a,className:n="",children:i})=>m.jsxs("div",{className:`empty-state ${n}`,children:[t&&m.jsx("div",{className:"empty-state-icon",children:t}),m.jsx("h3",{className:"empty-state-title",children:e}),m.jsx("p",{className:"empty-state-message",children:s}),a&&m.jsx("div",{className:"empty-state-action",children:a}),i&&m.jsx("div",{className:"empty-state-children",children:i})]});new Date(Date.now()-72e5).toISOString(),new Date(Date.now()-144e5).toISOString(),new Date(Date.now()-288e5).toISOString(),new Date(Date.now()-432e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-3456e5).toISOString(),new Date(Date.now()-6048e5).toISOString(),new Date(Date.now()-5184e5).toISOString(),new Date(Date.now()-432e6).toISOString(),new Date(Date.now()-3456e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-6048e5).toISOString(),new Date(Date.now()-5184e5).toISOString(),new Date(Date.now()-432e6).toISOString(),new Date(Date.now()-3456e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-6048e5).toISOString(),new Date(Date.now()-5184e5).toISOString(),new Date(Date.now()-432e6).toISOString(),new Date(Date.now()-3456e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-6048e5).toISOString(),new Date(Date.now()-12096e5).toISOString(),new Date(Date.now()-2592e5).toISOString(),new Date(Date.now()-72e5).toISOString(),new Date(Date.now()-108e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-864e5).toISOString(),new Date(Date.now()-1728e5).toISOString(),new Date(Date.now()-15552e6).toISOString(),new Date(Date.now()-31536e6).toISOString(),new Date(Date.now()-7776e6).toISOString();const Mt={energyLevel:75,resonanceStrength:82,activeConnections:3,recentSessions:[{id:"at1",timestamp:new Date(Date.now()-72e5).toISOString(),duration:"15 minutes",type:"Calming",effectiveness:85,notes:"Felt a strong sense of peace and connection"},{id:"at2",timestamp:new Date(Date.now()-864e5).toISOString(),duration:"20 minutes",type:"Energizing",effectiveness:78,notes:"Helped lift my mood and motivation"},{id:"at3",timestamp:new Date(Date.now()-1728e5).toISOString(),duration:"10 minutes",type:"Grounding",effectiveness:92,notes:"Perfect for managing anxiety in the moment"}],availableModes:[{name:"Calming Wave",description:"Gentle, soothing energy to reduce anxiety and promote relaxation",icon:"🌊",color:"#6B9BD2"},{name:"Energizing Pulse",description:"Uplifting vibrations to boost mood and motivation",icon:"⚡",color:"#F4B942"},{name:"Grounding Root",description:"Stabilizing frequency to center yourself and find balance",icon:"🌳",color:"#7CB342"},{name:"Heart Opening",description:"Compassionate resonance to foster self-love and connection",icon:"💜",color:"#AB47BC"},{name:"Clarity Focus",description:"Sharpening wavelength to enhance mental clarity and focus",icon:"🔮",color:"#5E35B1"}],testimonials:[{text:"The Astral Tether has been a game-changer for my anxiety management.",author:"Anonymous User",rating:5},{text:"I use it every morning to set a positive tone for my day.",author:"Community Member",rating:5},{text:"Skeptical at first, but the calming effect is undeniable.",author:"New User",rating:4}]};new Date(Date.now()-6e5).toISOString(),new Date(Date.now()-54e4).toISOString(),new Date(Date.now()-48e4).toISOString(),new Date(Date.now()-42e4).toISOString(),new Date(Date.now()-36e4).toISOString();const Lt=()=>{const{addToast:e}=Y(),[s,t]=h.useState(!1),[a,n]=h.useState(Mt.availableModes[0]),[i,r]=h.useState(Mt.energyLevel),[l,o]=h.useState(Mt.resonanceStrength),[c,d]=h.useState(!1),[u,p]=h.useState(0),g=h.useRef();h.useEffect(()=>(s?g.current=setInterval(()=>{p(e=>e+1),r(e=>Math.min(100,e+(2*Math.random()-.5))),o(e=>Math.min(100,e+(3*Math.random()-1)))},1e3):(g.current&&clearInterval(g.current),p(0)),()=>{g.current&&clearInterval(g.current)}),[s]);return m.jsxs("div",{className:"astral-tether-demo",children:[m.jsxs(Qs,{className:"tether-main-card",children:[m.jsxs("div",{className:"tether-header",children:[m.jsxs("h2",{className:"tether-title",children:[m.jsx(os,{className:"tether-icon"}),"Astral Tether Experience"]}),m.jsx("p",{className:"tether-subtitle",children:"Connect with calming energy and find your balance"})]}),m.jsxs("div",{className:"tether-visualization",children:[m.jsx("div",{className:`tether-orb${s?" active":""}${c?" pulsing":""}`,style:{backgroundColor:a.color},children:m.jsxs("div",{className:"tether-orb-inner",children:[m.jsx("span",{className:"tether-orb-icon",children:a.icon}),s&&m.jsx("div",{className:"tether-timer",children:(v=u,`${Math.floor(v/60)}:${(v%60).toString().padStart(2,"0")}`)})]})}),s&&m.jsxs("div",{className:"tether-waves",children:[m.jsx("div",{className:"wave wave-1",style:{borderColor:a.color}}),m.jsx("div",{className:"wave wave-2",style:{borderColor:a.color}}),m.jsx("div",{className:"wave wave-3",style:{borderColor:a.color}})]})]}),m.jsxs("div",{className:"tether-meters",children:[m.jsxs("div",{className:"meter-group",children:[m.jsxs("label",{className:"meter-label",children:[m.jsx(Me,{className:"meter-icon"}),"Energy Level"]}),m.jsx("div",{className:"meter-bar",children:m.jsx("div",{className:"meter-fill energy-fill",style:{width:`${i}%`}})}),m.jsxs("span",{className:"meter-value",children:[Math.round(i),"%"]})]}),m.jsxs("div",{className:"meter-group",children:[m.jsxs("label",{className:"meter-label",children:[m.jsx(Le,{className:"meter-icon"}),"Resonance Strength"]}),m.jsx("div",{className:"meter-bar",children:m.jsx("div",{className:"meter-fill resonance-fill",style:{width:`${l}%`}})}),m.jsxs("span",{className:"meter-value",children:[Math.round(l),"%"]})]})]}),!s&&m.jsxs("div",{className:"tether-modes",children:[m.jsx("h3",{className:"modes-title",children:"Select Your Energy Mode"}),m.jsx("div",{className:"modes-grid",children:Mt.availableModes.map(e=>m.jsxs("button",{className:a.name===e.name?"mode-card selected":"mode-card",onClick:()=>n(e),style:{borderColor:a.name===e.name?e.color:"transparent"},children:[m.jsx("span",{className:"mode-icon",children:e.icon}),m.jsx("span",{className:"mode-name",children:e.name}),m.jsx("span",{className:"mode-description",children:e.description})]},e.name))})]}),m.jsx("div",{className:"tether-actions",children:s?m.jsx($s,{variant:"secondary",size:"lg",onClick:()=>{t(!1),d(!1);const s=Math.floor(u/60);e(`Session ended. Duration: ${s}:${(u%60).toString().padStart(2,"0")}`,"info")},className:"tether-end-btn",children:"End Session"}):m.jsxs($s,{variant:"primary",size:"lg",onClick:()=>{t(!0),d(!0),e(`Starting ${a.name} session...`,"success")},className:"tether-start-btn",style:{backgroundColor:a.color},children:[m.jsx(os,{}),"Start ",a.name," Session"]})})]}),m.jsxs(Qs,{className:"tether-history-card",children:[m.jsxs("h3",{className:"history-title",children:[m.jsx(Ce,{className:"history-icon"}),"Recent Sessions"]}),m.jsx("div",{className:"sessions-list",children:Mt.recentSessions.map(e=>m.jsxs("div",{className:"session-item",children:[m.jsxs("div",{className:"session-info",children:[m.jsx("span",{className:"session-type",children:e.type}),m.jsx("span",{className:"session-duration",children:e.duration}),m.jsx("span",{className:"session-time",children:new Date(e.timestamp).toLocaleDateString()})]}),m.jsxs("div",{className:"session-effectiveness",children:[m.jsx("div",{className:"effectiveness-bar",children:m.jsx("div",{className:"effectiveness-fill",style:{width:`${e.effectiveness}%`}})}),m.jsxs("span",{className:"effectiveness-value",children:[e.effectiveness,"%"]})]}),e.notes&&m.jsx("p",{className:"session-notes",children:e.notes})]},e.id))})]}),m.jsxs(Qs,{className:"tether-stats-card",children:[m.jsxs("h3",{className:"stats-title",children:[m.jsx(hs,{className:"stats-icon"}),"Your Tether Stats"]}),m.jsxs("div",{className:"stats-grid",children:[m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-value",children:Mt.activeConnections}),m.jsx("span",{className:"stat-label",children:"Active Connections"})]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-value",children:"15"}),m.jsx("span",{className:"stat-label",children:"Total Sessions"})]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-value",children:"4.2h"}),m.jsx("span",{className:"stat-label",children:"Total Time"})]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-value",children:"85%"}),m.jsx("span",{className:"stat-label",children:"Avg. Effectiveness"})]})]})]}),m.jsxs(Qs,{className:"tether-testimonials-card",children:[m.jsxs("h3",{className:"testimonials-title",children:[m.jsx(ve,{className:"testimonials-icon"}),"Community Experiences"]}),m.jsx("div",{className:"testimonials-list",children:Mt.testimonials.map((e,s)=>m.jsxs("div",{className:"testimonial-item",children:[m.jsxs("p",{className:"testimonial-text",children:["“",e.text,"”"]}),m.jsxs("div",{className:"testimonial-footer",children:[m.jsxs("span",{className:"testimonial-author",children:["- ",e.author]}),m.jsx("div",{className:"testimonial-rating",children:[...Array(5)].map((s,t)=>m.jsx("span",{className:t<e.rating?"star filled":"star",children:"⭐"},t))})]})]},s))})]}),m.jsxs(Qs,{className:"tether-instructions-card",children:[m.jsx("h3",{className:"instructions-title",children:"How to Use Astral Tether"}),m.jsxs("ol",{className:"instructions-list",children:[m.jsx("li",{children:"Choose an energy mode that matches your current needs"}),m.jsx("li",{children:"Find a comfortable, quiet space where you won't be disturbed"}),m.jsx("li",{children:"Start your session and focus on the pulsing visualization"}),m.jsx("li",{children:"Breathe deeply and allow the energy to flow through you"}),m.jsx("li",{children:"Continue for as long as feels comfortable (5-20 minutes recommended)"}),m.jsx("li",{children:"End the session when you feel balanced and centered"})]}),m.jsxs("p",{className:"instructions-note",children:[m.jsx("strong",{children:"Note:"})," Astral Tether is a complementary wellness tool. For immediate crisis support, please use the “Need Help Now?” button or call 988."]})]})]});var v},zt=[{id:"sync-breathing",name:"Synchronized Breathing",description:"Breathe together in perfect harmony",duration:5,type:"breathing",icon:m.jsx(Me,{}),steps:[{instruction:"Get comfortable and close your eyes",duration:10,action:"visualize"},{instruction:"Feel your partner's presence",duration:10,action:"receive"},{instruction:"Breathe in together... 4 seconds",duration:4,action:"breathe",visual:"inhale"},{instruction:"Hold together... 7 seconds",duration:7,action:"breathe",visual:"hold"},{instruction:"Exhale together... 8 seconds",duration:8,action:"breathe",visual:"exhale"},{instruction:"Rest... 2 seconds",duration:2,action:"breathe",visual:"rest"}]},{id:"heart-connection",name:"Heart Connection",description:"Send and receive compassionate energy",duration:3,type:"connection",icon:m.jsx(ve,{}),steps:[{instruction:"Place your hand on your heart",duration:10,action:"visualize"},{instruction:"Feel warmth and compassion building",duration:15,action:"visualize"},{instruction:"Send loving energy to your partner",duration:20,action:"send",visual:"pulse"},{instruction:"Receive their caring energy back",duration:20,action:"receive",visual:"glow"},{instruction:"Let the connection strengthen you both",duration:15,action:"visualize"}]},{id:"grounding-together",name:"Grounding Together",description:"Find stability through shared presence",duration:4,type:"grounding",icon:m.jsx(hs,{}),steps:[{instruction:"Notice 5 things you can see",duration:20,action:"visualize"},{instruction:"Share this awareness with your partner",duration:10,action:"send"},{instruction:"Touch 4 different textures around you",duration:20,action:"visualize"},{instruction:"Listen for 3 sounds in your environment",duration:15,action:"visualize"},{instruction:"Notice 2 scents near you",duration:10,action:"visualize"},{instruction:"Focus on 1 taste in your mouth",duration:5,action:"visualize"},{instruction:"You are grounded and connected",duration:10,action:"receive"}]},{id:"affirmation-exchange",name:"Affirmation Exchange",description:"Share strength through positive words",duration:3,type:"affirmation",icon:m.jsx(os,{}),steps:[{instruction:"Think of your partner's strength",duration:15,action:"visualize"},{instruction:'Send them: "You are brave"',duration:10,action:"send",visual:"message"},{instruction:"Receive their affirmation for you",duration:10,action:"receive",visual:"message"},{instruction:'Send them: "You are not alone"',duration:10,action:"send",visual:"message"},{instruction:"Feel the truth of these words",duration:15,action:"visualize"},{instruction:"Let hope fill your heart",duration:10,action:"receive",visual:"glow"}]}],Et=({onExperienceComplete:e,partnerName:s="your partner",isConnected:t=!1})=>{const[a,n]=h.useState(null),[i,r]=h.useState(0),[l,o]=h.useState(!1),[c,d]=h.useState(0),[u,p]=h.useState(0);h.useEffect(()=>{if(!l||!a)return;const e=a.steps[i],s=setInterval(()=>{d(s=>{const t=s+100/(10*e.duration);return t>=100?i<a.steps.length-1?(r(i+1),0):(v(),100):t})},100);return()=>clearInterval(s)},[l,i,a]),h.useEffect(()=>{if(!a)return;const e=i,s=a.steps.length;p((e+c/100)/s*100)},[i,c,a]);const g=()=>{o(!1),n(null),r(0),d(0),p(0)},v=()=>{a&&(null==e||e(a.id)),o(!1),setTimeout(()=>{n(null),r(0),d(0),p(0)},2e3)};if(!a)return m.jsxs("div",{className:"guided-experience-selector",children:[m.jsxs("div",{className:"selector-header",children:[m.jsxs("h3",{className:"selector-title",children:[m.jsx(Le,{className:"selector-icon"}),"Guided Tether Experiences"]}),m.jsx("p",{className:"selector-subtitle",children:t?`Choose an experience to share with ${s}`:"Select an experience to practice solo"})]}),m.jsx("div",{className:"experience-grid",children:zt.map(e=>m.jsxs("button",{className:"experience-card",onClick:()=>(e=>{n(e),r(0),d(0),p(0),o(!0)})(e),children:[m.jsx("div",{className:"experience-icon",children:e.icon}),m.jsx("h4",{className:"experience-name",children:e.name}),m.jsx("p",{className:"experience-description",children:e.description}),m.jsxs("div",{className:"experience-meta",children:[m.jsxs("span",{className:"experience-duration",children:["🕐 ",e.duration," min"]}),m.jsx("span",{className:"experience-type",children:e.type})]})]},e.id))})]});const x=a.steps[i];return m.jsxs("div",{className:"guided-experience-player",children:[m.jsxs("div",{className:"player-header",children:[m.jsx("h3",{className:"player-title",children:a.name}),m.jsxs("div",{className:"player-progress",children:[m.jsx("div",{className:"progress-bar",children:m.jsx("div",{className:"progress-fill",style:{width:`${u}%`}})}),m.jsxs("span",{className:"progress-text",children:["Step ",i+1," of ",a.steps.length]})]})]}),m.jsxs("div",{className:"experience-stage",children:[m.jsx("div",{className:"visual-container",children:(e=>{switch(e){case"inhale":return m.jsx("div",{className:"breath-circle expanding",children:"Inhale"});case"hold":return m.jsx("div",{className:"breath-circle holding",children:"Hold"});case"exhale":return m.jsx("div",{className:"breath-circle contracting",children:"Exhale"});case"rest":return m.jsx("div",{className:"breath-circle resting",children:"Rest"});case"pulse":return m.jsx("div",{className:"energy-pulse outgoing",children:"💝"});case"glow":return m.jsx("div",{className:"energy-glow incoming",children:"✨"});case"message":return m.jsx("div",{className:"affirmation-bubble",children:"💬"});default:return null}})(x.visual)}),m.jsxs("div",{className:"instruction-container",children:[m.jsx("p",{className:"instruction-text",children:x.instruction}),x.action&&m.jsxs("div",{className:`action-indicator action-${x.action}`,children:["send"===x.action&&"→ Sending energy","receive"===x.action&&"← Receiving energy","breathe"===x.action&&"🫁 Breathing","visualize"===x.action&&"👁️ Visualizing"]})]}),m.jsx("div",{className:"step-progress-container",children:m.jsx("div",{className:"step-progress-bar",children:m.jsx("div",{className:"step-progress-fill",style:{width:`${c}%`}})})})]}),m.jsx("div",{className:"player-controls",children:l?m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"control-btn pause",onClick:()=>{o(!1)},children:"⏸️ Pause"}),m.jsx("button",{className:"control-btn stop",onClick:g,children:"⏹️ Stop"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"control-btn resume",onClick:()=>{o(!0)},children:"▶️ Resume"}),m.jsx("button",{className:"control-btn stop",onClick:g,children:"⏹️ End"})]})}),u>=100&&m.jsxs("div",{className:"completion-message",children:[m.jsx(os,{className:"completion-icon"}),m.jsx("p",{children:"Experience complete! You did wonderfully."})]})]})},Dt=({currentXp:e=0,nextLevelXp:s=0,level:t=1})=>{const a=null!=e?e:0,n=null!=s?s:0,i=null!=t?t:1,r=n>0?a/n*100:0;return m.jsxs("div",{children:[m.jsxs("div",{className:"xp-bar-text",style:{position:"static",padding:0,mixBlendMode:"normal",color:"var(--text-secondary)"},children:[m.jsxs("span",{children:["Level ",i]}),m.jsxs("span",{children:[a.toLocaleString()," / ",n.toLocaleString()," XP"]})]}),m.jsx("div",{className:"xp-bar",title:`Level ${i} Progress`,children:m.jsx("div",{className:"xp-bar-fill",style:{width:`${r}%`}})})]})},_t=Object.freeze(Object.defineProperty({__proto__:null,default:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"},Symbol.toStringTag,{value:"Module"})),Tt=Object.freeze(Object.defineProperty({__proto__:null,default:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"},Symbol.toStringTag,{value:"Module"})),Rt=Object.freeze(Object.defineProperty({__proto__:null,default:"M19,3H14.82C14.4,1.84 13.3,1 12,1S9.6,1.84 9.18,3H5C3.9,3 3,3.9 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.9 20.1,3 19,3M12,3C12.55,3 13,3.45 13,4C13,4.55 12.55,5 12,5C11.45,5 11,4.55 11,4C11,3.45 11.45,3 12,3M10.41,16.59L6,12.17L7.41,10.76L10.41,13.76L16.59,7.58L18,9L10.41,16.59Z"},Symbol.toStringTag,{value:"Module"})),Ot=Object.freeze(Object.defineProperty({__proto__:null,default:"M16,1H4C2.9,1 2,1.9 2,3V17H4V3H16V1M19,5H8C6.9,5 6,5.9 6,7V21C6,22.1 6.9,23 8,23H19C20.1,23 21,22.1 21,21V7C21,5.9 20.1,5 19,5M19,21H8V7H19V21Z"},Symbol.toStringTag,{value:"Module"})),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:"M13 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9l-6-6zM5 19V5h7v5h5v9H5z"},Symbol.toStringTag,{value:"Module"})),Pt=Object.freeze(Object.defineProperty({__proto__:null,default:"M3 18h12v-2H3v2zm0-5h18v-2H3v2zm0-5h18V6H3v2z"},Symbol.toStringTag,{value:"Module"})),Vt=Object.freeze(Object.defineProperty({__proto__:null,default:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"},Symbol.toStringTag,{value:"Module"})),$t=Object.freeze(Object.defineProperty({__proto__:null,default:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"},Symbol.toStringTag,{value:"Module"}));export{Ke as $,_e as A,bs as B,we as C,mt as D,De as E,ut as F,at as G,ve as H,Fe as I,ct as J,Nt as K,Ys as L,Ee as M,vt as N,dt as O,ze as P,bt as Q,wt as R,hs as S,ms as T,ts as U,Bs as V,xt as W,Se as X,js as Y,Ct as Z,It as _,Ne as a,Qe as a0,je as a1,fs as a2,ys as a3,At as a4,Lt as a5,Et as a6,Me as a7,Ie as a8,ke as a9,Le as aa,Ae as ab,as as ac,Xe as ad,Ze as ae,es as af,rs as ag,se as ah,Dt as ai,Ge as aj,Oe as ak,qe as al,Ss as am,Re as an,R as ao,ue as ap,B as aq,G as ar,ee as as,re as at,de as au,Rs as av,Os as aw,Hs as ax,Ps as ay,ns as b,os as c,Ce as d,Je as e,Vs as f,$s as g,Ws as h,We as i,Zs as j,Xs as k,Qs as l,st as m,Ye as n,ss as o,Y as p,nt as q,fe as r,ot as s,tt as t,he as u,rt as v,ds as w,it as x,ye as y,ls as z};
