var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,l=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(a)for(var t of a(s))n.call(s,t)&&i(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),c=(e,s,t)=>new Promise((a,r)=>{var n=e=>{try{l(t.next(e))}catch(s){r(s)}},i=e=>{try{l(t.throw(e))}catch(s){r(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(n,i);l((t=t.apply(e,s)).next())});import{r as d,j as m,a as h}from"./react-vendor-IorqdeNj.js";import{S as x,U as p,H as u,c as g,B as j,T as y,e as b,f as v,g as f,V as N,h as k,u as w,i as S,j as C,k as T,l as A,m as M,n as P,o as I,p as D,q as R,r as H,s as O,L as E,t as L,v as z,w as F,x as B,y as _,G as q,z as Y,D as $,F as U,I as W,J as V,K as G,N as Q,O as J,W as K,Q as Z,R as X,a as ee,Y as se,Z as te,_ as ae,$ as re,a0 as ne,a1 as ie,d as le,a2 as oe,a3 as ce,a4 as de,a5 as me,a6 as he,a7 as xe,a8 as pe,a9 as ue,aa as ge,ab as je,ac as ye,ad as be,ae as ve,af as fe,ag as Ne,ah as ke,ai as we,aj as Se,ak as Ce,al as Te,am as Ae,an as Me}from"./components-CJSBVMkT.js";import{A as Pe,e as Ie,g as De,h as Re,i as He,j as Oe,t as Ee,f as Le,k as ze}from"./utils-D6DFWjeA.js";import{a as Fe,b as Be,c as _e,u as qe,d as Ye,e as $e,f as Ue}from"./stores-ClzP1JB8.js";import{a as We}from"./crisis-core-DtfOKt0v.js";const Ve=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=d.useState(""),[t,a]=d.useState("");d.useEffect(()=>{const e=(new Date).getHours();a(e<12?"Good morning":e<17?"Good afternoon":"Good evening"),s("Friend")},[]);const r=[{id:"crisis-support",title:"Crisis Support",description:"Immediate help and resources",icon:x,color:"red",href:"/crisis",stats:{label:"24/7 Available",value:"Always"}},{id:"peer-support",title:"Peer Support",description:"Connect with others",icon:p,color:"blue",href:"/peer-support",stats:{label:"Active Helpers",value:"200+"}},{id:"wellness-tracking",title:"Wellness Tracking",description:"Monitor your mental health",icon:u,color:"pink",href:"/wellness",stats:{label:"Current Streak",value:"5 days"}},{id:"ai-assistant",title:"AI Assistant",description:"Talk to our AI companion",icon:g,color:"purple",href:"/ai-assistant",stats:{label:"Conversations",value:"12"}},{id:"reflections",title:"Reflections",description:"Daily journaling and insights",icon:j,color:"green",href:"/reflections",stats:{label:"This Week",value:"3 entries"}},{id:"progress",title:"Progress Insights",description:"View your wellness trends",icon:y,color:"indigo",href:"/analytics",stats:{label:"Overall Trend",value:"â†— Improving"}}],n=e=>({red:"gradient-sunset",blue:"gradient-peaceful",pink:"gradient-wellness",purple:"gradient-calm",green:"gradient-forest",indigo:"gradient-aurora"}[e]||"gradient-ocean");return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-therapy-primary-50 to-therapy-secondary-50 dark:from-gray-900 dark:to-gray-800",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8 glass-card p-6 animate-float",children:[m.jsxs("h1",{className:"text-3xl font-bold gradient-text mb-2",children:[t,", ",e,"!"]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Welcome to your mental wellness dashboard. How are you feeling today?"})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[m.jsxs("div",{className:"wellness-stat-card glass-card smooth-transition animate-breathe",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Check-ins This Week"}),m.jsx("p",{className:"text-2xl font-bold gradient-text",children:"5"}),m.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 animate-glow",children:"+2 from last week"})]}),m.jsxs("div",{className:"wellness-stat-card glass-card smooth-transition animate-breathe",style:{animationDelay:"0.2s"},children:[m.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Mood Average"}),m.jsx("p",{className:"text-2xl font-bold gradient-text",children:"7.2/10"}),m.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Stable trend"})]}),m.jsxs("div",{className:"wellness-stat-card glass-card smooth-transition animate-breathe",style:{animationDelay:"0.4s"},children:[m.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Support Connections"}),m.jsx("p",{className:"text-2xl font-bold gradient-text",children:"18"}),m.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Active helpers"})]})]}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>{const s=e.icon;return m.jsxs("button",{className:`therapy-card smooth-transition-slow cursor-pointer text-left ${n(e.color)} animate-gradient`,onClick:()=>{},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||e.preventDefault()},style:{background:`var(--${n(e.color)})`,backgroundSize:"200% 200%",animationDelay:.1*r.indexOf(e)+"s"},children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("div",{className:"glass-card p-3 animate-float",children:m.jsx(s,{className:"w-8 h-8 text-white"})}),e.stats&&m.jsxs("div",{className:"text-right text-white",children:[m.jsx("p",{className:"text-xs opacity-90",children:e.stats.label}),m.jsx("p",{className:"text-sm font-semibold",children:e.stats.value})]})]}),m.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:e.title}),m.jsx("p",{className:"text-sm text-white opacity-90",children:e.description})]},e.id)})}),m.jsxs("div",{className:"mt-8 glass-card smooth-transition p-6",children:[m.jsx("h2",{className:"text-xl font-semibold gradient-text mb-4",children:"Recent Activity"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center space-x-3 p-3 glass-card smooth-transition animate-float",style:{animationDelay:"0.1s"},children:[m.jsx("div",{className:"neumorph-card p-2",children:m.jsx(u,{className:"w-5 h-5 text-pink-500"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Wellness check-in completed"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"2 hours ago"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 p-3 glass-card smooth-transition animate-float",style:{animationDelay:"0.2s"},children:[m.jsx("div",{className:"neumorph-card p-2",children:m.jsx(g,{className:"w-5 h-5 text-purple-500"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"AI conversation: Stress management tips"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Yesterday"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 p-3 glass-card smooth-transition animate-float",style:{animationDelay:"0.3s"},children:[m.jsx("div",{className:"neumorph-card p-2",children:m.jsx(p,{className:"w-5 h-5 text-blue-500"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Connected with new peer support helper"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"2 days ago"})]})]})]})]}),m.jsx("div",{className:"mt-8 crisis-indicator glass-card animate-breathe",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2",children:"Need Immediate Help?"}),m.jsx("p",{className:"text-red-700 dark:text-red-300",children:"Crisis support is available 24/7. You're not alone."})]}),m.jsx("button",{className:"crisis-button smooth-transition ripple-button",onClick:()=>{},children:"Get Help Now"})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=d.useState("overview"),t={name:"Anonymous User",joinDate:"March 2024",streak:14,checkIns:42,connectionsHelped:8,badgesEarned:5,privacy:{shareProgress:!1,crisisContacts:["Emergency Contact 1","Family Member"]},preferences:{notifications:!0,reminders:!0,darkMode:!1}};return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:m.jsxs("div",{className:"flex items-center space-x-6",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-blue-500 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white text-2xl font-bold",children:"AU"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:t.name}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Member since ",t.joinDate]}),m.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx(u,{className:"w-4 h-4 text-pink-500"}),m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.streak," day streak"]})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx(b,{className:"w-4 h-4 text-yellow-500"}),m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.badgesEarned," badges earned"]})]})]})]}),m.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Edit Profile"})]})}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(u,{className:"w-8 h-8 text-pink-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.checkIns}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check-ins"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(p,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:t.connectionsHelped}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"People Helped"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(j,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"12"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Journal Entries"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(x,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Safe"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Safety Plan"})]})]}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-6",children:m.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("overview"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("overview"),children:"Overview"}),m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("privacy"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("privacy"),children:"Privacy & Safety"}),m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("preferences"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("preferences"),children:"Preferences"})]})}),"overview"===e&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Achievements & Badges"}),m.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[{id:"1",name:"First Check-in",description:"Completed your first wellness check-in",earned:!0},{id:"2",name:"Week Warrior",description:"Maintained a 7-day check-in streak",earned:!0},{id:"3",name:"Helper Hand",description:"Provided support to 5 community members",earned:!0},{id:"4",name:"Reflection Master",description:"Completed 10 journal entries",earned:!1},{id:"5",name:"Crisis Advocate",description:"Completed crisis safety planning",earned:!0}].map(e=>m.jsx("div",{className:"p-4 rounded-lg border "+(e.earned?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"),children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(e.earned?"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400":"bg-gray-200 dark:bg-gray-600 text-gray-400"),children:m.jsx(b,{className:"w-5 h-5"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold "+(e.earned?"text-gray-900 dark:text-gray-100":"text-gray-500 dark:text-gray-400"),children:e.name}),m.jsx("p",{className:"text-sm "+(e.earned?"text-gray-600 dark:text-gray-300":"text-gray-400 dark:text-gray-500"),children:e.description})]}),e.earned&&m.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 px-2 py-1 rounded",children:"Earned"})]})},e.id))})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Recent Activity"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[m.jsx(u,{className:"w-5 h-5 text-pink-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Completed wellness check-in"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Today, 9:30 AM"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[m.jsx(p,{className:"w-5 h-5 text-blue-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Helped a community member"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Yesterday, 3:15 PM"})]})]}),m.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[m.jsx(j,{className:"w-5 h-5 text-green-500"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Added new journal reflection"}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"2 days ago, 7:45 PM"})]})]})]})]})]}),"privacy"===e&&m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Privacy & Safety Settings"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Profile Visibility"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"visibility",value:"anonymous",defaultChecked:!0,className:"mr-3"}),m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Anonymous - Your identity is completely protected"})]}),m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"visibility",value:"pseudonym",className:"mr-3"}),m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Pseudonym - Use a chosen username"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Crisis Contacts"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"People who can be contacted in case of emergency"}),m.jsxs("div",{className:"space-y-2",children:[t.privacy.crisisContacts.map(e=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[m.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:e}),m.jsx("button",{className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]},e)),m.jsx("button",{className:"w-full p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-600 dark:text-gray-400 hover:border-blue-500 hover:text-blue-500 transition-colors",children:"+ Add Crisis Contact"})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Data & Privacy"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Share progress with community helpers"}),m.jsx("input",{type:"checkbox",defaultChecked:t.privacy.shareProgress,className:"toggle"})]}),m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Allow anonymous usage analytics"}),m.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle"})]})]})]})]})]}),"preferences"===e&&m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"App Preferences"}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Notifications"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Daily check-in reminders"}),m.jsx("input",{type:"checkbox",defaultChecked:t.preferences.reminders,className:"toggle"})]}),m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Community support notifications"}),m.jsx("input",{type:"checkbox",defaultChecked:t.preferences.notifications,className:"toggle"})]}),m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Crisis alert notifications"}),m.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle"})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Appearance"}),m.jsx("div",{className:"space-y-3",children:m.jsxs("label",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Dark mode"}),m.jsx("input",{type:"checkbox",defaultChecked:t.preferences.darkMode,className:"toggle"})]})})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Language & Region"}),m.jsxs("select",{className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[m.jsx("option",{value:"en",children:"English"}),m.jsx("option",{value:"es",children:"EspaÃ±ol"}),m.jsx("option",{value:"fr",children:"FranÃ§ais"}),m.jsx("option",{value:"de",children:"Deutsch"})]})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Qe=["Anxiety","Depression","Grief","Relationships","Stress","Loneliness","Other"],Je=d.createContext(void 0),Ke=({userToken:e,onResetId:s,setActiveView:t})=>{const{user:a,userToken:r}=Fe(),{theme:n,toggleTheme:i}=(()=>{const e=d.useContext(Je);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})(),{contentFilters:l,setFilters:o}=Be(),c=null!=e?e:r,[h,x]=d.useState(!1),[p,u]=d.useState(!1),[g,j]=d.useState(!1);d.useEffect(()=>{const e=(null==a?void 0:a.sub)||c;e&&Pe.preferences.getPreferences(e).then(e=>{j(e.researchConsent)})},[a,c]);return m.jsxs("div",{className:"settings-view",children:[m.jsxs(v,{isOpen:h,onClose:()=>x(!1),title:"Confirm ID Reset",children:[m.jsx("p",{children:"Are you sure you want to reset your anonymous ID? This action cannot be undone. You will appear as a new user to the community."}),m.jsxs("div",{className:"modal-actions",children:[m.jsx(f,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),m.jsx(f,{variant:"danger",onClick:()=>{null==s||s(),x(!1)},children:"Yes, Reset ID"})]})]}),m.jsxs(v,{isOpen:p,onClose:()=>u(!1),title:"Public Health Research",children:[m.jsx("p",{children:"By opting in, you agree to contribute your fully anonymized and aggregated data for public health research. This helps researchers understand mental health trends and improve support systems globally."}),m.jsxs("ul",{children:[m.jsxs("li",{children:[m.jsx("strong",{children:"What's shared:"}),' General data like dilemma categories (e.g., "Anxiety"), mood trends, and resource usage statistics.']}),m.jsxs("li",{children:[m.jsx("strong",{children:"What's NOT shared:"})," Your post content, chat messages, or any personal identifiers."]})]}),m.jsx("p",{children:"Your contribution is valuable and completely voluntary. You can opt-out at any time."}),m.jsx("div",{className:"modal-actions",children:m.jsx(f,{variant:"primary",onClick:()=>u(!1),children:"Got it"})})]}),m.jsx(N,{title:"Settings"}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h2",{children:"Appearance"}),m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-info",children:[m.jsx("label",{htmlFor:"theme-toggle",children:"Dark Mode"}),m.jsx("p",{children:"Switch between light and dark themes for comfortable viewing"})]}),m.jsxs("div",{className:"theme-toggle",children:[m.jsx("input",{type:"checkbox",id:"theme-toggle",checked:"dark"===n,onChange:i}),m.jsx("label",{htmlFor:"theme-toggle",className:"slider"})]})]})]}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h2",{children:"Content Preferences"}),m.jsx("p",{children:"Hide or blur content from categories you find triggering to create a safer browsing experience."}),m.jsx("div",{className:"expertise-options",children:Qe.map(e=>m.jsxs("div",{className:"radio-group",children:[m.jsx("input",{type:"checkbox",id:`filter-${e}`,name:"filter",value:e,checked:l.includes(e),onChange:()=>(e=>{const s=l.includes(e)?l.filter(s=>s!==e):[...l,e];o(s)})(e)}),m.jsx("label",{htmlFor:`filter-${e}`,children:e})]},e))})]}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h2",{children:"Data & Privacy"}),m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-info",children:[m.jsx("label",{htmlFor:"research-consent-toggle",children:"Contribute to Public Health Research"}),m.jsx("p",{children:"Help researchers by contributing your fully anonymized data to improve mental health support systems globally."})]}),m.jsxs("div",{className:"theme-toggle",children:[m.jsx("input",{type:"checkbox",id:"research-consent-toggle",checked:g,onChange:e=>(e=>{const s=(null==a?void 0:a.sub)||c;s&&(j(e),Pe.preferences.updatePreferences(s,{researchConsent:e}))})(e.target.checked)}),m.jsx("label",{htmlFor:"research-consent-toggle",className:"slider"})]})]}),m.jsx("div",{style:{textAlign:"right",marginTop:"0.5rem"},children:m.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),u(!0)},className:"privacy-link",children:"Learn More"})})]}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h2",{children:"Account Management"}),m.jsxs("div",{className:"account-actions",children:[m.jsx("div",{className:"account-action-item",children:m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-info",children:[m.jsx("label",{children:"Blocked Users"}),m.jsx("p",{children:"Permanently block communication with specific users for your safety and peace of mind."})]}),m.jsx(f,{variant:"secondary",onClick:()=>null==t?void 0:t("blocked-users"),children:"Manage Blocked Users"})]})}),m.jsx("div",{className:"account-action-item danger",children:m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{className:"setting-info",children:[m.jsx("label",{children:"Reset Anonymous ID"}),m.jsx("p",{children:"Reset your anonymous ID for a fresh start. This action cannot be undone and you will appear as a new user to the community."})]}),m.jsx(f,{variant:"danger",onClick:()=>x(!0),children:"Reset Anonymous ID"})]})})]})]}),m.jsxs("div",{className:"settings-section",children:[m.jsx("h2",{children:"Advanced Settings"}),m.jsx(k,{})]})]})},Ze=Object.freeze(Object.defineProperty({__proto__:null,SettingsView:Ke,default:Ke},Symbol.toStringTag,{value:"Module"})),Xe=()=>{const{visibleDilemmas:e,forYouDilemmas:s,isLoading:t,toggleSupport:a,filter:r,setFilter:n,sort:i,setSort:l,searchTerm:o,setSearchTerm:h,loadMore:x,hasMore:p,openReportModal:u,fetchDilemmas:g,fetchForYouFeed:j}=_e(),{chatSessions:y,startChat:b}=qe(),{contentFilters:v}=Be(),[k,P]=d.useState("forYou"),I="forYou"===k?s:e,D=d.useCallback(()=>c(null,null,function*(){try{"forYou"===k?yield j():yield g()}catch(e){}}),[k,j,g]),{ref:R,isPulling:H,isRefreshing:O,pullProgress:E}=w(D,{threshold:80,enabled:!t});return m.jsxs("div",{ref:R,className:"feed-view-container",children:[m.jsx("div",{className:`pull-to-refresh ${H?"active":""} ${O?"refreshing":""}`,style:{opacity:E},children:O?"âŸ³":"â†“"}),m.jsx(N,{title:"Community Feed",subtitle:"A place to connect and find support."}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsx(f,{className:"forYou"===k?"active":"",onClick:()=>P("forYou"),children:"For You"}),m.jsx(f,{className:"community"===k?"active":"",onClick:()=>P("community"),children:"Community"})]}),m.jsxs("div",{className:"card filter-sort-bar",children:[m.jsxs("div",{className:"search-group",children:[m.jsx(S,{}),m.jsx("input",{type:"search",placeholder:"Search posts...",className:"search-input",value:o,onChange:e=>h(e.target.value)})]}),m.jsxs("div",{className:"filter-group",children:[m.jsx("label",{children:"Filter by:"}),m.jsxs("div",{className:"filter-buttons",children:[m.jsx("button",{className:"All"===r?"active":"",onClick:()=>n("All"),children:"All"}),Qe.map(e=>m.jsx("button",{className:r===e?"active":"",onClick:()=>n(e),children:e},e))]})]}),m.jsxs("div",{className:"sort-group",children:[m.jsx("label",{htmlFor:"sort-select",children:"Sort by:"}),m.jsxs("select",{id:"sort-select",value:i,onChange:e=>l(e.target.value),children:[m.jsx("option",{value:"newest",children:"Newest"}),m.jsx("option",{value:"most-support",children:"Most Support"}),m.jsx("option",{value:"needs-support",children:"Needs Support"})]})]})]}),t?m.jsx("ul",{className:"posts-list",children:[...Array(3)].map((e,s)=>m.jsx(C,{},s))}):I.length>0?m.jsx("ul",{className:"posts-list",children:I.map(e=>{var s,t;return m.jsx(T,{dilemma:e,onToggleSupport:a,onStartChat:e=>b(e,"seeker"),onReport:u,hasUnread:null!=(t=null==(s=y[e.id])?void 0:s.unread)&&t,filteredCategories:v},e.id)})}):m.jsx(A,{children:m.jsx(M,{title:"No Posts Found",message:"Try adjusting your search or filter settings to find what you're looking for."})}),p&&!t&&"community"===k&&m.jsx("div",{className:"load-more-container",children:m.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Load More"})})]})},es=Object.freeze(Object.defineProperty({__proto__:null,FeedView:Xe,default:Xe},Symbol.toStringTag,{value:"Module"})),ss=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=d.useState("feed"),[t,a]=d.useState([]),[r,n]=d.useState([]);d.useEffect(()=>{a([{id:"1",author:"Anonymous Friend",content:"Had a really tough day but managed to use some breathing techniques I learned here. Small wins count too! ðŸ’™",timestamp:"2 hours ago",likes:12,responses:3,isAnonymous:!0,category:"celebration"},{id:"2",author:"MindfulMoments",content:"Does anyone have tips for managing anxiety at work? I've been struggling with presentations lately.",timestamp:"4 hours ago",likes:8,responses:7,isAnonymous:!1,category:"question"},{id:"3",author:"HealingJourney",content:"Sharing this article about mindfulness techniques that really helped me: [link would be here]",timestamp:"6 hours ago",likes:15,responses:2,isAnonymous:!1,category:"resource"}]),n([{id:"1",name:"Sarah M.",expertise:["Anxiety","Mindfulness","Work Stress"],rating:4.9,helpedCount:127,isOnline:!0,isCertified:!0},{id:"2",name:"Alex R.",expertise:["Depression","Life Transitions","LGBTQ+ Support"],rating:4.8,helpedCount:89,isOnline:!1,isCertified:!0},{id:"3",name:"Jordan T.",expertise:["Students","Academic Stress","Social Anxiety"],rating:4.7,helpedCount:64,isOnline:!0,isCertified:!1}])},[]);const i=e=>{const s={support:"text-blue-600 bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400",celebration:"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400",question:"text-purple-600 bg-purple-100 dark:bg-purple-900/20 dark:text-purple-400",resource:"text-orange-600 bg-orange-100 dark:bg-orange-900/20 dark:text-orange-400"};return s[e]||s.support};return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Community Support"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Connect with others on their mental health journey"})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-8",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(p,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"1,247"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Members"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(u,{className:"w-8 h-8 text-pink-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"89"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Certified Helpers"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(P,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"3,456"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Conversations"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 text-center",children:[m.jsx(x,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"24/7"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Crisis Support"})]})]}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-6",children:m.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("feed"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("feed"),children:"Community Feed"}),m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("helpers"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("helpers"),children:"Find Helpers"}),m.jsx("button",{className:"px-6 py-4 text-sm font-medium "+("groups"===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>s("groups"),children:"Support Groups"})]})}),"feed"===e&&m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:"You"})}),m.jsx("button",{className:"flex-1 text-left px-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Share your thoughts, ask for support, or celebrate a win..."}),m.jsx("button",{className:"p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:m.jsx(I,{className:"w-5 h-5"})})]})}),t.map(e=>{return m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-semibold text-sm",children:e.author.charAt(0)})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.author}),m.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i(e.category)}`,children:(s=e.category,{support:"Support",celebration:"Celebration",question:"Question",resource:"Resource"}[s]||"Support")}),m.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.timestamp})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:e.content}),m.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[m.jsxs("button",{className:"flex items-center space-x-1 hover:text-pink-500 transition-colors",children:[m.jsx(u,{className:"w-4 h-4"}),m.jsx("span",{children:e.likes})]}),m.jsxs("button",{className:"flex items-center space-x-1 hover:text-blue-500 transition-colors",children:[m.jsx(P,{className:"w-4 h-4"}),m.jsx("span",{children:e.responses})]})]})]})]})},e.id);var s})]}),"helpers"===e&&m.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-12 h-12 bg-gray-300 dark:bg-gray-600 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:e.name.charAt(0)})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.name}),m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsxs("div",{className:"flex items-center space-x-1",children:[m.jsx(b,{className:"w-4 h-4 text-yellow-400"}),m.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.rating})]}),m.jsx("span",{className:"text-sm text-gray-400",children:"â€¢"}),m.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.helpedCount," helped"]})]})]})]}),m.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.isCertified&&m.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400 px-2 py-1 rounded",children:"Certified"}),m.jsx("div",{className:"w-3 h-3 rounded-full "+(e.isOnline?"bg-green-400":"bg-gray-400")})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Specializes in:"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:e.expertise.map(s=>m.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-2 py-1 rounded",children:s},`${e.id}-${s}`))})]}),m.jsx("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Connect"})]},e.id))}),"groups"===e&&m.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Anxiety Support Circle"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"A safe space to share experiences and coping strategies for anxiety management."}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.jsx("span",{children:"47 members â€¢ Daily check-ins"})}),m.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Join Group"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Student Mental Health"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:"Support for students dealing with academic stress, transitions, and campus life."}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.jsx("span",{children:"23 members â€¢ Weekly sessions"})}),m.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Join Group"})]})]})]}),m.jsx("div",{className:"mt-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(x,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-200",children:"Crisis Support Available"}),m.jsx("p",{className:"text-red-700 dark:text-red-300 text-sm",children:"If you're in crisis, trained counselors are available 24/7"})]})]}),m.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Get Crisis Help"})]})})]})})}},Symbol.toStringTag,{value:"Module"}));function ts(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message}const as=({session:e,dilemma:s,onViewHelperProfile:t})=>{var a;const[r,n]=d.useState(""),i=d.useRef(null),{userToken:l,helperProfile:o}=Fe(),[h,x]=d.useState(!1),{addToast:p,showConfirmationModal:g}=D(),{sendMessage:j,setTyping:y,closeChat:b,guidance:v,dismissGuidance:N}=qe(),{helpSessions:k,toggleFavorite:w}=Ye();R();const S=e.perspective,C=e.helper,T=k.find(s=>s.id===e.helpSessionId),A=null!=(a=null==T?void 0:T.isFavorited)&&a,[,M]=d.useState(!1),[P,I]=d.useState(0),Y=d.useRef(null),$=d.useRef(null);d.useEffect(()=>{var s;null==(s=i.current)||s.scrollIntoView({behavior:"smooth"}),e.messages.length>20&&e.messages.length%10==0&&(x(!0),setTimeout(()=>x(!1),1e4))},[e.messages,e.isTyping]);const U=()=>{r.trim()&&(j(e.dilemmaId,r),n(""),y(e.dilemmaId,!1))},W=()=>{Y.current&&clearTimeout(Y.current),$.current&&cancelAnimationFrame($.current),M(!0);const e=Date.now(),t=()=>{const s=Date.now()-e,a=Math.min(s/3e3,1);I(a),a<1&&($.current=requestAnimationFrame(t))};$.current=requestAnimationFrame(t),Y.current=window.setTimeout(()=>{g({title:"Confirm Emergency",message:"Are you in immediate danger? This will attempt to get your location and send an alert.",confirmText:"YES, SEND ALERT",confirmVariant:"danger",onConfirm:()=>{navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:a}=e.coords;Pe.emergency.trigger(s.id,{latitude:t,longitude:a}),p("Emergency alert sent with your approximate location.","success")},e=>{let t="Could not get your location. ";switch(e.code){case e.PERMISSION_DENIED:t+="Location access was denied. Please enable location permissions in your browser settings.";break;case e.POSITION_UNAVAILABLE:t+="Location information is unavailable. Your device may not support location services.";break;case e.TIMEOUT:t+="Location request timed out. Please check your internet connection.";break;default:t+="An unknown error occurred while getting your location."}g({title:"Location Access Issue",message:`${t}\n\nWould you like to send the emergency alert without location data?`,confirmText:"Yes, Send Anyway",cancelText:"Cancel",confirmVariant:"danger",onConfirm:()=>{Pe.emergency.trigger(s.id).then(()=>{p("Emergency alert sent successfully without location data.","warning")}).catch(e=>{p("Failed to send emergency alert. Please try again or call 911.","error")})}})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}}),V()},3e3)},V=()=>{M(!1),I(0),Y.current&&(clearTimeout(Y.current),Y.current=null),$.current&&(cancelAnimationFrame($.current),$.current=null)},G=()=>"helper"===S?"Chat with Seeker":C?`Chat with ${C.displayName}`:"Waiting for a helper...";return m.jsxs("div",{className:"chat-view",children:[m.jsxs("div",{className:"chat-header",children:[m.jsx("button",{onClick:()=>b(s.id),className:"back-btn",children:m.jsx(H,{})}),m.jsxs("div",{className:"chat-header-info",children:[m.jsx("h2",{children:C&&"helper"!==S?m.jsx("button",{type:"button",onClick:()=>t(C.id),style:{background:"none",border:"none",color:"inherit",textDecoration:"underline",cursor:"pointer",font:"inherit",padding:0},children:G()}):G()}),m.jsx("p",{children:"helper"===S?`About: "${s.content.substring(0,30)}..."`:C?`Reputation: ${C.reputation.toFixed(1)}/5.0`:`Your conversation about "${s.content.substring(0,30)}..."`})]}),m.jsxs("div",{className:"chat-header-actions",style:{display:"flex",gap:"1rem",alignItems:"center"},children:["seeker"===S&&e.helpSessionId&&m.jsx(f,{variant:"ghost",className:"btn-sm btn-support "+(A?"supported":""),onClick:()=>{e.helpSessionId&&w(e.helpSessionId)},style:{padding:"0.5rem"},"aria-label":A?"Unfavorite this helper":"Favorite this helper",icon:m.jsx(u,{})}),m.jsx(f,{variant:"secondary",onClick:()=>c(null,null,function*(){const e="helper"===S?null==o?void 0:o.id:l,t="helper"===S?s.userToken:s.assignedHelperId;e&&t?g({title:"Block User?",message:"Are you sure you want to block this user? You will no longer see their posts or messages.",confirmText:"Block",confirmVariant:"danger",onConfirm:()=>c(null,null,function*(){try{yield Pe.userBlocking.blockUser(e,t),p("User has been blocked. This chat will now close.","info"),b(s.id)}catch(a){const e=ts(a)?a.message:"Failed to block user.";p(e,"error")}})}):p("Could not identify users to block.","error")}),className:"btn-sm",children:"Block User"})]})]}),h&&m.jsx("div",{style:{padding:"0.5rem 1rem",backgroundColor:"var(--accent-warning)",color:"var(--bg-primary)",textAlign:"center"},children:"This is a long conversation. Remember to take breaks!"}),m.jsxs("div",{className:"chat-messages",children:[(null==v?void 0:v.isCrisis)&&"seeker"===S&&m.jsx(O,{analysisText:e.messages.slice(-3).map(e=>e.text).join(" "),show:!0,userType:"seeker",onCrisisDetected:e=>{},onDismiss:()=>N()}),e.messages.map(e=>m.jsxs("div",{className:`message-group ${e.sender}`,children:[m.jsx("div",{className:"message-bubble-wrapper",children:m.jsx("div",{className:"message-bubble markdown-content",children:m.jsx(E,{className:"chat-message",autoLoad:!0,children:e.text})})}),m.jsx("span",{className:"message-timestamp",children:Ie(e.timestamp)})]},e.id)),e.isTyping&&m.jsx(L,{}),m.jsx("div",{ref:i})]}),m.jsxs(z,{style:{position:"relative"},children:["seeker"===S&&m.jsxs("button",{className:"btn btn-danger",onMouseDown:W,onMouseUp:V,onTouchStart:W,onTouchEnd:V,style:{position:"absolute",right:"calc(100% + 1rem)",top:"50%",transform:"translateY(-50%)",width:"auto",padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"0.5rem",overflow:"hidden",minHeight:"44px",borderRadius:"20px"},children:[m.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,background:"rgba(255,255,255,0.3)",width:100*P+"%"}}),m.jsx(F,{}),m.jsx("span",{style:{position:"relative"},children:"Emergency"})]}),m.jsx(B,{type:"text",placeholder:"Type your message...",value:r,onChange:s=>{n(s.target.value),s.target.value?y(e.dilemmaId,!0):y(e.dilemmaId,!1)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U())},className:"chat-input",containerStyle:{flexGrow:1,marginBottom:0},style:{fontSize:"16px",padding:"12px 16px",borderRadius:"20px"}}),m.jsx(f,{onClick:U,disabled:!r.trim(),className:"chat-send-btn",style:{minWidth:"44px",minHeight:"44px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",padding:0,marginLeft:"8px"},children:m.jsx(_,{})})]}),"helper"===S&&v&&v.dilemmaId===e.dilemmaId&&m.jsx(q,{guidance:v,onDismiss:N})]})},rs=({session:e,onSendMessage:s,onClose:t})=>{const[a,r]=d.useState(""),[n,i]=d.useState(!1),l=d.useRef(null),[o,h]=d.useState(!0),[x,p]=d.useState(null),[u,j]=d.useState(!1);d.useEffect(()=>{var e;null==(e=l.current)||e.scrollIntoView({behavior:"smooth"})},[e.messages,e.isTyping]);const y=()=>c(null,null,function*(){if(!a.trim())return;i(!0);const e=a;r(""),yield s(e),i(!1)}),b=()=>{h(!1),j(!0)},v=e=>{p(e),j(!1)};return o?m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"\n                    .ai-disclaimer-overlay {\n                        position: fixed;\n                        top: 0;\n                        left: 0;\n                        right: 0;\n                        bottom: 0;\n                        background: rgba(0, 0, 0, 0.5);\n                        backdrop-filter: blur(10px);\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        padding: 2rem;\n                        z-index: 10000;\n                        animation: fadeIn 0.3s ease-out;\n                    }\n                    \n                    .ai-disclaimer-modal {\n                        background: var(--card-bg);\n                        border-radius: 1.5rem;\n                        padding: 2.5rem;\n                        max-width: 560px;\n                        width: 90%;\n                        max-height: 90vh;\n                        overflow-y: auto;\n                        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n                        border: 1px solid var(--border-color);\n                        animation: modalZoomIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n                    }\n                    \n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    \n                    @keyframes modalZoomIn {\n                        from {\n                            transform: scale(0.9);\n                            opacity: 0;\n                        }\n                        to {\n                            transform: scale(1);\n                            opacity: 1;\n                        }\n                    }\n                    \n                    .ai-disclaimer-header {\n                        display: flex;\n                        align-items: center;\n                        gap: 1rem;\n                        margin-bottom: 1.5rem;\n                    }\n                    \n                    .ai-disclaimer-icon {\n                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                        border-radius: 1rem;\n                        padding: 1rem;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        color: white;\n                        font-size: 1.5rem;\n                    }\n                    \n                    .ai-disclaimer-title {\n                        flex: 1;\n                    }\n                    \n                    .ai-disclaimer-title h2 {\n                        margin: 0;\n                        font-size: 1.5rem;\n                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                        -webkit-background-clip: text;\n                        -webkit-text-fill-color: transparent;\n                        background-clip: text;\n                    }\n                    \n                    .ai-disclaimer-subtitle {\n                        color: var(--text-secondary);\n                        font-size: 0.875rem;\n                        margin-top: 0.25rem;\n                    }\n                    \n                    .ai-disclaimer-body {\n                        margin: 1.5rem 0;\n                    }\n                    \n                    .ai-disclaimer-body p {\n                        line-height: 1.6;\n                        color: var(--text-primary);\n                        margin-bottom: 1rem;\n                    }\n                    \n                    .ai-disclaimer-list {\n                        background: rgba(102, 126, 234, 0.05);\n                        border-left: 3px solid #667eea;\n                        padding: 1rem;\n                        border-radius: 0.5rem;\n                        margin: 1.5rem 0;\n                    }\n                    \n                    .ai-disclaimer-list ul {\n                        list-style: none;\n                        padding: 0;\n                        margin: 0;\n                    }\n                    \n                    .ai-disclaimer-list li {\n                        padding: 0.5rem 0;\n                        color: var(--text-primary);\n                        display: flex;\n                        align-items: flex-start;\n                    }\n                    \n                    .ai-disclaimer-list li:before {\n                        content: 'âš ';\n                        color: #f59e0b;\n                        margin-right: 0.75rem;\n                        font-size: 1.1rem;\n                    }\n                    \n                    .ai-disclaimer-warning {\n                        background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1));\n                        border: 1px solid rgba(245, 158, 11, 0.3);\n                        border-radius: 0.75rem;\n                        padding: 1rem;\n                        margin: 1.5rem 0;\n                    }\n                    \n                    .ai-disclaimer-warning p {\n                        margin: 0;\n                        color: var(--text-primary);\n                        font-size: 0.9rem;\n                    }\n                    \n                    .ai-disclaimer-actions {\n                        display: flex;\n                        gap: 1rem;\n                        margin-top: 2rem;\n                    }\n                    \n                    .ai-disclaimer-actions button {\n                        flex: 1;\n                        padding: 0.75rem 1.5rem;\n                        border-radius: 0.75rem;\n                        font-weight: 600;\n                        transition: all 0.2s ease;\n                    }\n                    \n                    .ai-disclaimer-actions .btn-back {\n                        background: var(--bg-secondary);\n                        color: var(--text-primary);\n                        border: 1px solid var(--border-color);\n                    }\n                    \n                    .ai-disclaimer-actions .btn-back:hover {\n                        background: var(--bg-tertiary);\n                    }\n                    \n                    .ai-disclaimer-actions .btn-continue {\n                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                        color: white;\n                        border: none;\n                    }\n                    \n                    .ai-disclaimer-actions .btn-continue:hover {\n                        transform: translateY(-2px);\n                        box-shadow: 0 10px 20px -5px rgba(102, 126, 234, 0.3);\n                    }\n                    \n                    @media (max-width: 768px) {\n                        .ai-disclaimer-overlay {\n                            padding: 1rem;\n                            justify-content: center;\n                        }\n                        \n                        .ai-disclaimer-modal {\n                            margin-right: 0;\n                            padding: 1.5rem;\n                        }\n                        \n                        .ai-disclaimer-actions {\n                            flex-direction: column;\n                        }\n                    }\n                "}),m.jsx("div",{className:"ai-disclaimer-overlay",children:m.jsxs("div",{className:"ai-disclaimer-modal",children:[m.jsxs("div",{className:"ai-disclaimer-header",children:[m.jsx("div",{className:"ai-disclaimer-icon",children:m.jsx(Y,{})}),m.jsxs("div",{className:"ai-disclaimer-title",children:[m.jsx("h2",{children:"Astral AI Companion"}),m.jsx("div",{className:"ai-disclaimer-subtitle",children:"Your supportive AI listener"})]})]}),m.jsxs("div",{className:"ai-disclaimer-body",children:[m.jsx("p",{children:"You're about to connect with Astral AI, an automated companion designed to provide a safe, judgment-free space for you to express your thoughts and feelings."}),m.jsx("div",{className:"ai-disclaimer-list",children:m.jsxs("ul",{children:[m.jsx("li",{children:"This is an AI assistant, not a human or licensed therapist"}),m.jsx("li",{children:"Designed for supportive listening and emotional exploration"}),m.jsx("li",{children:"Cannot provide medical advice or handle crisis situations"})]})}),m.jsx("div",{className:"ai-disclaimer-warning",children:m.jsxs("p",{children:["ðŸ’¡ ",m.jsx("strong",{children:"Need immediate help?"}),' Please use our "Get Help Now" resources for crisis support and professional assistance.']})}),m.jsx("p",{children:"By continuing, you acknowledge that you understand the nature and limitations of this AI companion."})]}),m.jsxs("div",{className:"ai-disclaimer-actions",children:[m.jsx("button",{className:"btn-back",onClick:t,children:"Go Back"}),m.jsx("button",{className:"btn-continue",onClick:b,children:"I Understand, Continue"})]})]})})]}):u?m.jsxs("div",{className:"therapist-selection-container",children:[m.jsxs("div",{className:"therapist-selection-header",children:[m.jsx("button",{onClick:t,className:"back-button","aria-label":"Go back",children:m.jsx(H,{})}),m.jsx("h1",{children:"AI Therapy"})]}),m.jsx($,{onSelectTherapist:v,selectedTherapist:x})]}):x?m.jsxs("div",{className:"ai-chat-view",children:[m.jsxs("div",{className:"ai-chat-header",children:[m.jsxs("button",{onClick:t,className:"ai-chat-back-btn",children:[m.jsx(H,{}),m.jsx("span",{children:"Back"})]}),m.jsxs("div",{className:"ai-chat-header-center",children:[m.jsxs("div",{className:"ai-chat-avatar-wrapper",children:[m.jsx("div",{className:"ai-chat-avatar therapist-avatar-chat",children:m.jsx("span",{className:"therapist-emoji-chat",children:x.avatar})}),m.jsx("div",{className:"ai-chat-status-dot"})]}),m.jsxs("div",{className:"ai-chat-header-info",children:[m.jsx("h2",{children:x.name}),m.jsxs("p",{className:"ai-chat-subtitle",children:[m.jsx(g,{}),m.jsx("span",{children:x.specialty})]})]})]}),m.jsx("button",{onClick:()=>{j(!0)},className:"change-therapist-btn",title:"Change therapist",children:m.jsx(g,{})}),m.jsx(U,{variant:"compact"})]}),m.jsx("div",{className:"ai-chat-messages",children:m.jsxs("div",{className:"ai-chat-messages-inner",children:[m.jsxs("div",{className:"ai-chat-safe-space",children:[m.jsx(W,{}),m.jsx("span",{children:"Safe & Confidential Space"})]}),x&&m.jsxs("div",{className:"ai-therapist-card",children:[m.jsx("div",{className:"ai-therapist-avatar",children:x.name.charAt(0)}),m.jsxs("div",{className:"ai-therapist-info",children:[m.jsx("h3",{children:x.name}),m.jsx("p",{children:x.bio})]})]}),0===e.messages.length&&m.jsxs("div",{className:"ai-chat-welcome",children:[m.jsx("div",{className:"ai-chat-welcome-icon",children:m.jsx(Y,{})}),m.jsx("h3",{children:"Welcome to your safe space"}),m.jsx("p",{children:"I'm here to listen and help you explore your thoughts and feelings. Everything you share is private and judgment-free."}),m.jsxs("div",{className:"ai-chat-suggestions",children:[m.jsx("button",{className:"ai-chat-suggestion",onClick:()=>s("I'm feeling stressed"),children:"I'm feeling stressed"}),m.jsx("button",{className:"ai-chat-suggestion",onClick:()=>s("I need someone to talk to"),children:"I need someone to talk to"}),m.jsx("button",{className:"ai-chat-suggestion",onClick:()=>s("Help me understand my emotions"),children:"Help me understand my emotions"})]})]}),(e.messages||[]).map(e=>m.jsx("div",{className:`ai-message-group ${e.sender}`,children:m.jsxs("div",{className:"ai-message-wrapper",children:["ai"===e.sender&&m.jsx("div",{className:"ai-message-avatar",children:m.jsx(Y,{})}),m.jsxs("div",{className:"ai-message-content",children:[m.jsx("div",{className:"ai-message-bubble markdown-content",children:m.jsx(E,{className:"ai-message",autoLoad:!0,children:e.text})}),m.jsx("span",{className:"ai-message-timestamp",children:Ie(e.timestamp)})]})]})},e.id)),e.isTyping&&m.jsx("div",{className:"ai-message-group ai",children:m.jsxs("div",{className:"ai-message-wrapper",children:[m.jsx("div",{className:"ai-message-avatar",children:m.jsx(Y,{})}),m.jsx("div",{className:"ai-message-content",children:m.jsx(L,{})})]})}),m.jsx("div",{ref:l})]})}),m.jsxs("div",{className:"ai-chat-composer",children:[m.jsxs("div",{className:"ai-chat-composer-inner",children:[m.jsx(V,{type:"text",placeholder:"Share what's on your mind...",value:a,onChange:e=>r(e.target.value),onKeyPress:e=>"Enter"===e.key&&!n&&y(),disabled:n||e.isTyping,className:"ai-chat-input",containerStyle:{flexGrow:1,marginBottom:0}}),m.jsx(f,{onClick:y,disabled:!a.trim()||n||e.isTyping,isLoading:n,className:"ai-chat-send-btn",variant:"primary",children:!n&&m.jsx(_,{})})]}),m.jsxs("p",{className:"ai-chat-privacy-note",children:[m.jsx(W,{}),"Your conversation is private and secure"]})]})]}):(j(!0),null)},ns=()=>{const[e,s]=d.useState({messages:[],isTyping:!1});return m.jsx(rs,{session:e,onSendMessage:e=>c(null,null,function*(){const t={id:`msg-${Date.now()}`,sender:"user",text:e,timestamp:(new Date).toISOString()};s(e=>o(l({},e),{messages:[...e.messages,t]}))}),onClose:()=>{window.history.back()}})},is=Object.freeze(Object.defineProperty({__proto__:null,AIChatRoute:ns,AIChatView:rs,default:ns},Symbol.toStringTag,{value:"Module"})),ls=({setActiveView:e})=>{const[s,t]=d.useState(!1),[a,r]=d.useState(De.getCulturalContext("en").region),n=(s,t=!1)=>{null==e||e({view:"assessment-detail",params:l({type:s},t&&{culturalContext:a,cultural:!0})})},i={fontSize:"0.875rem",padding:"0.5rem"},o={margin:0},c={color:"var(--text-secondary)"},h={marginTop:"0.5rem",display:"flex",gap:"0.5rem"},x={fontSize:"0.75rem",backgroundColor:"#e0f2fe",color:"#0369a1",padding:"0.25rem 0.5rem",borderRadius:"0.25rem"},p={display:"flex",flexDirection:"column",gap:"0.5rem"},u={fontSize:"0.875rem"};return m.jsxs(m.Fragment,{children:[m.jsx(N,{title:"Mental Health Assessments",subtitle:"Private, evidence-based tools to help you understand your well-being."}),m.jsx(A,{style:{marginBottom:"1rem",backgroundColor:"#eff6ff",border:"1px solid #bfdbfe"},children:m.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[m.jsx("span",{style:{fontSize:"1.25rem",marginTop:"0.125rem"},children:"ðŸŒ"}),m.jsxs("div",{style:{flex:1},children:[m.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#1e40af"},children:"Culturally-Adapted Assessments Available"}),m.jsx("p",{style:{color:"#1e40af",fontSize:"0.875rem",margin:"0 0 1rem 0"},children:"Get assessments adapted for your cultural context that respect cultural differences in mental health expression."}),m.jsxs(f,{variant:"secondary",onClick:()=>t(!s),style:{fontSize:"0.875rem"},children:[s?"Hide":"Show"," Cultural Options"]})]})]})}),s&&m.jsxs(A,{style:{marginBottom:"1rem",backgroundColor:"#f8fafc"},children:[m.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1rem"},children:"Select Cultural Context"}),m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.5rem",marginBottom:"1rem"},children:De.getCulturalRegions().map(e=>m.jsx(f,{variant:e===a?"primary":"secondary",onClick:()=>r(e),style:i,children:e},e))}),m.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"0.875rem",margin:0},children:"Cultural adaptations include language-specific mental health expressions, cultural bias reduction, and culturally-appropriate recommendations."})]}),m.jsxs(A,{children:[m.jsx("h2",{children:"Available Assessments"}),m.jsx("p",{children:"These are standardized, confidential screening tools. They are not a diagnosis but can be a helpful starting point for self-awareness or a conversation with a professional."}),m.jsxs("div",{className:"assessment-list",style:{marginTop:"1.5rem",display:"flex",flexDirection:"column",gap:"1rem"},children:[m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{children:[m.jsx("h3",{style:o,children:"PHQ-9 (Depression)"}),m.jsx("p",{style:c,children:"Screens for and measures the severity of depression."}),s&&m.jsx("div",{style:h,children:m.jsxs("span",{style:x,children:["Cultural Adaptation: ",a]})})]}),m.jsxs("div",{style:p,children:[m.jsx(f,{onClick:()=>n("phq-9",!1),children:"Standard Assessment"}),s&&m.jsxs(f,{variant:"secondary",onClick:()=>n("phq-9",!0),style:u,children:["Cultural Assessment (",a,")"]})]})]}),m.jsx("hr",{style:{margin:"1rem 0",border:"none",borderBottom:"1px solid var(--border-color)"}}),m.jsxs("div",{className:"setting-item",children:[m.jsxs("div",{children:[m.jsx("h3",{style:o,children:"GAD-7 (Anxiety)"}),m.jsx("p",{style:c,children:"Screens for and measures the severity of generalized anxiety disorder."}),s&&m.jsx("div",{style:h,children:m.jsxs("span",{style:x,children:["Cultural Adaptation: ",a]})})]}),m.jsxs("div",{style:p,children:[m.jsx(f,{onClick:()=>n("gad-7",!1),children:"Standard Assessment"}),s&&m.jsxs(f,{variant:"secondary",onClick:()=>n("gad-7",!0),style:u,children:["Cultural Assessment (",a,")"]})]})]})]})]}),m.jsx(A,{children:m.jsxs("div",{className:"setting-item",children:[m.jsx("p",{children:"View your past assessment results to track your progress over time."}),m.jsx(f,{variant:"secondary",onClick:()=>null==e?void 0:e({view:"assessment-history"}),children:"View History"})]})})]})},os=Object.freeze(Object.defineProperty({__proto__:null,AssessmentsView:ls,default:ls},Symbol.toStringTag,{value:"Module"})),cs=["ðŸ˜ž","ðŸ™","ðŸ˜","ðŸ™‚","ðŸ˜Š"],ds=["Grateful","Anxious","Tired","Hopeful","Stressed","Calm","Lonely","Productive"],ms=({label:e,value:s,onChange:t})=>m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:e}),m.jsx("input",{type:"range",min:"1",max:"5",value:s,onChange:e=>t(parseInt(e.target.value)),className:"wellness-slider"})]}),hs=()=>{const{history:e,postCheckIn:s}=$e(),{addToast:t}=D(),[a,r]=d.useState(!1),[n,i]=d.useState("7days"),[o,h]=d.useState(3),[x,p]=d.useState(3),[u,g]=d.useState(3),[j,y]=d.useState(3),[b,v]=d.useState([]),[N,k]=d.useState("");d.useEffect(()=>{c(null,null,function*(){try{yield He.mood.getMoodHistory()}catch(e){}})},[]);const w=d.useMemo(()=>Re(e,"7days"===n?7:"30days"===n?30:90),[e,n]),S=d.useMemo(()=>{const s=e.length>0?e.reduce((e,s)=>e+s.moodScore,0)/e.length:0;let t=0;const a=new Date;for(let i=0;i<30;i++){const s=new Date(a);s.setDate(s.getDate()-i);const r=s.toISOString().split("T")[0];if(e.some(e=>new Date(e.timestamp).toISOString().split("T")[0]===r))t++;else if(i>0)break}const r=e.reduce((e,s)=>{const t=cs[Math.min(Math.floor(s.moodScore)-1,4)];return e[t]=(e[t]||0)+1,e},{}),n=Object.keys(r).reduce((e,s)=>r[e]>r[s]?e:s,"ðŸ˜Š");return{moodAverage:s,streakDays:t,totalCheckIns:e.length,topMood:n}},[e]),C=d.useMemo(()=>{if(!e||0===e.length)return!1;const s=(new Date).toISOString().split("T")[0];return e.some(e=>new Date(e.timestamp).toISOString().split("T")[0]===s)},[e]);return m.jsxs(m.Fragment,{children:[m.jsxs(A,{enhanced:!0,variant:"interactive",children:[m.jsx("h2",{children:"Daily Check-in"}),C?m.jsxs("div",{className:"empty-state",style:{padding:"2rem 1rem"},children:[m.jsx("h3",{children:"Great job!"}),m.jsx("p",{children:"You've already completed your check-in for today. Come back tomorrow!"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"How are you feeling overall today?"}),m.jsx("div",{className:"mood-selector",children:cs.map((e,s)=>m.jsx("button",{className:o===s+1?"mood-emoji-btn selected":"mood-emoji-btn",onClick:()=>h(s+1),"aria-label":`Mood score ${s+1}`,children:e},s))})]}),m.jsx(ms,{label:"Anxiety Level (Low to High)",value:x,onChange:p}),m.jsx(ms,{label:"Sleep Quality (Poor to Great)",value:u,onChange:g}),m.jsx(ms,{label:"Energy Level (Low to High)",value:j,onChange:y}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Select tags that apply:"}),m.jsx("div",{className:"tag-selector filter-buttons",children:ds.map(e=>m.jsx(f,{className:b.includes(e)?"active":"",onClick:()=>(e=>{v(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(e),variant:"secondary",children:e},e))})]}),m.jsx(J,{label:"Notes (Private)",value:N,onChange:e=>k(e.target.value),placeholder:"Any specific thoughts or events today?",rows:3}),m.jsx("div",{className:"form-actions",children:m.jsx(f,{enhanced:!0,size:"lg",onClick:()=>c(null,null,function*(){r(!0);try{const a={moodScore:o,anxietyLevel:x,sleepQuality:u,energyLevel:j,tags:b,notes:N.trim()};yield s(a);try{const e=["Very Bad","Bad","Neutral","Good","Very Good"];yield He.mood.saveMoodEntry({mood:e[o-1],score:o,notes:N.trim(),triggers:b.filter(e=>["Anxious","Stressed","Lonely"].includes(e)),activities:b.filter(e=>["Grateful","Hopeful","Calm","Productive"].includes(e))})}catch(e){}t("Your wellness check-in has been saved!","success"),h(3),p(3),g(3),y(3),v([]),k("")}catch(a){const e=ts(a)?a.message:"Failed to save check-in.";t(e,"error")}finally{r(!1)}}),isLoading:a,disabled:a,children:"Save Today's Check-in"})})]})]}),m.jsx(K,l({},S)),m.jsx(Z,{data:w,period:n})]})},xs=()=>{const{predefinedHabits:e,trackedHabits:s,isLoadingHabits:t,trackHabit:a,logCompletion:r}=$e(),n=d.useMemo(()=>{const t=new Set(s.map(e=>e.habitId));return e.filter(e=>!t.has(e.id))},[e,s]);return t?m.jsx("div",{className:"loading-spinner",style:{margin:"3rem auto"}}):m.jsxs(m.Fragment,{children:[m.jsxs(A,{enhanced:!0,variant:"elevated",children:[m.jsx("h2",{children:"My Habits"}),s.length>0?m.jsx("ul",{className:"habit-list",children:s.map(s=>{var t,a;return m.jsxs("li",{className:s.isCompletedToday?"habit-item completed":"habit-item",children:[m.jsxs("div",{className:"habit-info",children:[m.jsx("h4",{children:null==(t=e.find(e=>e.id===s.habitId))?void 0:t.name}),m.jsx("p",{children:null==(a=e.find(e=>e.id===s.habitId))?void 0:a.description})]}),m.jsxs("div",{className:"habit-streak",title:`Current Streak: ${s.currentStreak} days`,children:[m.jsx("span",{children:"ðŸ”¥"}),m.jsx("span",{children:s.currentStreak})]}),m.jsx(f,{variant:s.isCompletedToday?"success":"primary",onClick:()=>r(s.habitId),disabled:s.isCompletedToday,children:s.isCompletedToday?"Done!":"Complete"})]},s.habitId)})}):m.jsx("p",{children:"You're not tracking any habits yet. Add one from the list below to get started!"})]}),m.jsxs(A,{enhanced:!0,variant:"interactive",children:[m.jsx("h2",{children:"Discover New Habits"}),n.length>0?m.jsx("ul",{className:"habit-list",children:n.map(e=>m.jsxs("li",{className:"habit-item",children:[m.jsxs("div",{className:"habit-info",children:[m.jsx("h4",{children:e.name}),m.jsx("p",{children:e.description})]}),m.jsx(f,{enhanced:!0,variant:"secondary",size:"sm",onClick:()=>a(e.id),icon:m.jsx(I,{}),children:"Track"})]},e.id))}):m.jsx("p",{children:"You're tracking all available habits. Great job!"})]})]})},ps=()=>{const{journalEntries:e,postJournalEntry:s}=$e(),{addToast:t}=D(),[a,r]=d.useState(""),[n,i]=d.useState(!1);return m.jsxs(m.Fragment,{children:[m.jsxs(A,{enhanced:!0,variant:"glass",children:[m.jsx("h2",{children:"New Journal Entry"}),m.jsx("p",{children:"This is a private space for your thoughts. Only you can see these entries."}),m.jsx(J,{enhanced:!0,value:a,onChange:e=>r(e.target.value),placeholder:"What's on your mind today?",rows:5,maxLength:2e3}),m.jsx("div",{className:"form-actions",children:m.jsx(f,{enhanced:!0,size:"lg",onClick:()=>c(null,null,function*(){if(a.trim()){i(!0);try{yield s(a),r(""),t("Journal entry saved.","success")}catch(e){const s=ts(e)?e.message:"Failed to save journal entry.";t(s,"error")}finally{i(!1)}}}),isLoading:n,disabled:n||!a.trim(),children:"Save Entry"})})]}),m.jsxs("div",{className:"journal-history",children:[m.jsx("h2",{children:"Past Entries"}),e.length>0?e.map(e=>m.jsxs(A,{enhanced:!0,variant:"interactive",className:"journal-entry-card",children:[m.jsx("p",{className:"journal-entry-timestamp",children:new Date(e.timestamp).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),m.jsx("p",{className:"journal-entry-content",children:e.content})]},e.id)):m.jsx(A,{enhanced:!0,variant:"default",children:m.jsx("p",{children:"You have no journal entries yet."})})]})]})},us=()=>{const[e,s]=d.useState("mood"),{fetchHistory:t,fetchHabits:a,fetchJournalEntries:r}=$e(),[n,i]=d.useState(!1);h.useEffect(()=>{t(),a(),r()},[]);return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"\n                .wellness-slider { width: 100%; }\n                .mood-selector { display: flex; justify-content: space-around; margin-bottom: 1rem; }\n                .mood-emoji-btn { font-size: 2.5rem; cursor: pointer; transition: transform 0.2s; padding: 0.5rem; border-radius: 50%; border: 2px solid transparent; background: none; }\n                .mood-emoji-btn:hover { transform: scale(1.1); }\n                .mood-emoji-btn.selected { transform: scale(1.2); border-color: var(--accent-primary); background: color-mix(in srgb, var(--accent-primary) 15%, transparent); }\n                .tag-selector { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem; }\n                .wellness-chart { display: flex; gap: 1rem; height: 250px; margin-top: 2rem; }\n                .chart-y-axis { display: flex; flex-direction: column-reverse; justify-content: space-between; font-size: 1.25rem; }\n                .chart-bars { display: flex; flex-grow: 1; justify-content: space-around; border-left: 2px solid var(--border-color); border-bottom: 2px solid var(--border-color); padding-left: 0.5rem; }\n                .chart-bar-group { display: flex; flex-direction: column; align-items: center; justify-content: flex-end; width: 10%; }\n                .chart-bar-wrapper { flex-grow: 1; width: 100%; display: flex; align-items: flex-end; justify-content: center;}\n                .chart-bar { width: 60%; background-color: var(--accent-primary); border-radius: 4px 4px 0 0; transition: height 0.5s ease-out, background-color 0.5s; }\n                .chart-bar:hover { opacity: 0.8; }\n                .chart-label { margin-top: 0.5rem; font-weight: 600; color: var(--text-secondary); font-size: 0.875rem; }\n                .journal-history { margin-top: 1.5rem; display: flex; flex-direction: column; gap: 1rem; }\n                .journal-entry-card { padding: 1rem 1.5rem; }\n                .journal-entry-timestamp { font-weight: bold; color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.5rem; }\n                .journal-entry-content { white-space: pre-wrap; }\n            "}),m.jsx(N,{title:"My Wellness",subtitle:"Track your mood, build healthy habits, and reflect in your private journal."}),n&&m.jsx("div",{style:{marginBottom:"2rem"},children:m.jsx(G,{onComplete:()=>i(!1)})}),m.jsx("div",{style:{textAlign:"center",marginBottom:"1rem"},children:m.jsx("button",{onClick:()=>i(!n),style:{padding:"0.5rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"25px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.3s ease"},children:n?"âœ¨ Hide Breathing Exercise":"ðŸ§˜ Take a Mindful Moment"})}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsx(f,{className:"mood"===e?"active":"",onClick:()=>s("mood"),children:"Daily Mood"}),m.jsx(f,{className:"checkin"===e?"active":"",onClick:()=>s("checkin"),children:"Check-in"}),m.jsx(f,{className:"habits"===e?"active":"",onClick:()=>s("habits"),children:"Habits"}),m.jsx(f,{className:"journal"===e?"active":"",onClick:()=>s("journal"),children:"Journal"})]}),"mood"===e&&m.jsx("div",{className:"mood-tracker-container",children:m.jsx(Q,{onMoodSubmit:e=>{}})}),"checkin"===e&&m.jsx(hs,{}),"habits"===e&&m.jsx(xs,{}),"journal"===e&&m.jsx(ps,{})]})},gs=Object.freeze(Object.defineProperty({__proto__:null,WellnessView:us,default:us},Symbol.toStringTag,{value:"Module"})),js=[{id:"sample-1",content:"Today I practiced gratitude by writing down three things that made me smile. It's amazing how focusing on small joys can shift your entire perspective. ðŸŒŸ",timestamp:new Date(Date.now()-72e5).toISOString(),reactions:{heart:42,star:18,lightbulb:7},myReaction:void 0,userToken:"anon-token-001"},{id:"sample-2",content:"Meditation has become my morning anchor. Just 10 minutes of mindfulness sets a peaceful tone for the entire day. The chaos doesn't disappear, but I handle it better.",timestamp:new Date(Date.now()-18e6).toISOString(),reactions:{heart:67,star:23,lightbulb:15},myReaction:"heart",userToken:"anon-token-002"},{id:"sample-3",content:"Learned that it's okay to rest without guilt. Rest is not a reward for finishing everything; it's a necessity for being able to continue. Taking care of myself IS productive.",timestamp:new Date(Date.now()-432e5).toISOString(),reactions:{heart:89,star:31,lightbulb:22},myReaction:void 0,userToken:"anon-token-003"},{id:"sample-4",content:"Walking in nature today reminded me that growth takes time. Trees don't rush to bloom, and neither should I. Progress is progress, no matter how small.",timestamp:new Date(Date.now()-864e5).toISOString(),reactions:{heart:124,star:45,lightbulb:28},myReaction:"star",userToken:"anon-token-004"},{id:"sample-5",content:"Called an old friend today. Connection is medicine for the soul. We laughed, we cried, we remembered why friendship matters. Reach out to someone you miss.",timestamp:new Date(Date.now()-1296e5).toISOString(),reactions:{heart:156,star:52,lightbulb:34},myReaction:void 0,userToken:"anon-token-005"},{id:"sample-6",content:"Journaling breakthrough: I realized I've been so focused on who I should be that I forgot to appreciate who I am. Self-acceptance is a daily practice, not a destination.",timestamp:new Date(Date.now()-1728e5).toISOString(),reactions:{heart:203,star:71,lightbulb:48},myReaction:"lightbulb",userToken:"anon-token-006"},{id:"sample-7",content:"Boundaries are not walls; they're bridges to healthier relationships. Said no to something that didn't serve me today, and it felt liberating.",timestamp:new Date(Date.now()-2592e5).toISOString(),reactions:{heart:178,star:59,lightbulb:41},myReaction:void 0,userToken:"anon-token-007"},{id:"sample-8",content:"The sunset tonight was a reminder that endings can be beautiful too. Every day gets a fresh start tomorrow. What a gift.",timestamp:new Date(Date.now()-3456e5).toISOString(),reactions:{heart:145,star:67,lightbulb:19},myReaction:"heart",userToken:"anon-token-008"}],ys=["What made you smile today?","Share a moment of peace you experienced","What are you grateful for right now?","Describe a small victory from today","What lesson did today teach you?","Share something beautiful you noticed","What act of kindness did you witness or perform?","How did you take care of yourself today?"],bs=({userToken:e})=>{const{userToken:s}=Fe(),t=null!=e?e:s,[a,r]=d.useState([]),[n,i]=d.useState(""),[h,x]=d.useState(!0),[p,j]=d.useState(!1),[y,v]=d.useState("all"),[N,k]=d.useState(ys[0]),w=280,{setReflections:S}=Ue();d.useEffect(()=>{x(!0),Pe.reflections.getReflections().then(e=>{const s=e.length>0?e:js;r(s),S(s)}).catch(e=>{r(js),S(js)}).finally(()=>x(!1))},[]),d.useEffect(()=>{const e=setInterval(()=>{k(e=>{const s=ys.indexOf(e);return ys[(s+1)%ys.length]})},1e4);return()=>clearInterval(e)},[]);const C=(e,s)=>{t?(r(t=>t.map(t=>t.id!==e||t.myReaction?t:o(l({},t),{reactions:o(l({},t.reactions),{[s]:(t.reactions[s]||0)+1}),myReaction:s}))),Pe.reflections.addReaction(e,s,t).catch(t=>{r(t=>t.map(t=>t.id===e?o(l({},t),{reactions:o(l({},t.reactions),{[s]:t.reactions[s]-1}),myReaction:void 0}):t))})):alert("You must have a user token to react.")},T=(()=>{let e=[...a];switch(y){case"popular":return e.sort((e,s)=>{const t=Object.values(e.reactions).reduce((e,s)=>e+s,0);return Object.values(s.reactions).reduce((e,s)=>e+s,0)-t});case"recent":return e.sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime());default:return e}})();return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"\n                .reflections-container {\n                    max-width: 900px;\n                    margin: 0 auto;\n                    padding: 2rem;\n                    animation: fadeIn 0.5s ease-out;\n                }\n\n                @keyframes fadeIn {\n                    from {\n                        opacity: 0;\n                        transform: translateY(10px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n\n                .reflections-header {\n                    text-align: center;\n                    padding: 3rem 2rem;\n                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);\n                    border-radius: 20px;\n                    margin-bottom: 2rem;\n                    position: relative;\n                    overflow: hidden;\n                }\n\n                .reflections-header::before {\n                    content: '';\n                    position: absolute;\n                    top: -50%;\n                    right: -50%;\n                    width: 200%;\n                    height: 200%;\n                    background: radial-gradient(circle, rgba(168, 85, 247, 0.1) 0%, transparent 70%);\n                    animation: float 20s ease-in-out infinite;\n                }\n\n                @keyframes float {\n                    0%, 100% { transform: translate(0, 0) rotate(0deg); }\n                    33% { transform: translate(30px, -30px) rotate(120deg); }\n                    66% { transform: translate(-20px, 20px) rotate(240deg); }\n                }\n\n                .reflections-header h1 {\n                    font-size: 2.5rem;\n                    margin-bottom: 0.5rem;\n                    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);\n                    -webkit-background-clip: text;\n                    -webkit-text-fill-color: transparent;\n                    background-clip: text;\n                    position: relative;\n                    z-index: 1;\n                }\n\n                .reflections-header p {\n                    color: var(--text-secondary);\n                    font-size: 1.1rem;\n                    position: relative;\n                    z-index: 1;\n                }\n\n                .reflection-stats {\n                    display: flex;\n                    justify-content: center;\n                    gap: 2rem;\n                    margin-top: 1.5rem;\n                    position: relative;\n                    z-index: 1;\n                }\n\n                .stat-item {\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                }\n\n                .stat-number {\n                    font-size: 1.8rem;\n                    font-weight: bold;\n                    color: var(--text-primary);\n                }\n\n                .stat-label {\n                    font-size: 0.9rem;\n                    color: var(--text-secondary);\n                }\n\n                .compose-section {\n                    background: var(--card-bg);\n                    border-radius: 16px;\n                    padding: 2rem;\n                    margin-bottom: 2rem;\n                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n                    border: 1px solid var(--border-color);\n                }\n\n                .prompt-banner {\n                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);\n                    border-radius: 12px;\n                    padding: 1rem 1.5rem;\n                    margin-bottom: 1.5rem;\n                    display: flex;\n                    align-items: center;\n                    gap: 1rem;\n                    border: 1px solid rgba(168, 85, 247, 0.2);\n                }\n\n                .prompt-icon {\n                    color: #a855f7;\n                    font-size: 1.5rem;\n                }\n\n                .prompt-text {\n                    flex: 1;\n                    color: var(--text-primary);\n                    font-style: italic;\n                    animation: fadeInOut 10s ease-in-out infinite;\n                }\n\n                @keyframes fadeInOut {\n                    0%, 90% { opacity: 1; }\n                    95%, 100% { opacity: 0; }\n                }\n\n                .compose-form {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 1rem;\n                }\n\n                .textarea-wrapper {\n                    position: relative;\n                }\n\n                .character-count {\n                    position: absolute;\n                    bottom: 0.5rem;\n                    right: 0.5rem;\n                    font-size: 0.85rem;\n                    color: var(--text-secondary);\n                    background: var(--bg-primary);\n                    padding: 0.25rem 0.5rem;\n                    border-radius: 12px;\n                }\n\n                .character-count.warning {\n                    color: #f59e0b;\n                }\n\n                .character-count.error {\n                    color: #ef4444;\n                }\n\n                .filter-tabs {\n                    display: flex;\n                    gap: 0.5rem;\n                    margin-bottom: 2rem;\n                    padding: 0.5rem;\n                    background: var(--card-bg);\n                    border-radius: 12px;\n                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n                }\n\n                .filter-tab {\n                    flex: 1;\n                    padding: 0.75rem;\n                    border: none;\n                    background: transparent;\n                    color: var(--text-secondary);\n                    border-radius: 8px;\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    gap: 0.5rem;\n                    font-weight: 500;\n                }\n\n                .filter-tab:hover {\n                    background: var(--bg-secondary);\n                    color: var(--text-primary);\n                }\n\n                .filter-tab.active {\n                    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);\n                    color: white;\n                    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);\n                }\n\n                .reflections-grid {\n                    display: grid;\n                    gap: 1.5rem;\n                    animation: fadeInUp 0.5s ease-out;\n                }\n\n                @keyframes fadeInUp {\n                    from {\n                        opacity: 0;\n                        transform: translateY(20px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n\n                .reflection-card {\n                    background: var(--card-bg);\n                    border-radius: 16px;\n                    padding: 1.5rem;\n                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n                    border: 1px solid var(--border-color);\n                    transition: all 0.3s ease;\n                }\n\n                .reflection-card:hover {\n                    transform: translateY(-3px);\n                    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);\n                    border-color: rgba(168, 85, 247, 0.3);\n                }\n\n                .reflection-content {\n                    color: var(--text-primary);\n                    line-height: 1.6;\n                    margin-bottom: 1rem;\n                    font-size: 1.05rem;\n                }\n\n                .reflection-meta {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding-top: 1rem;\n                    border-top: 1px solid var(--border-color);\n                }\n\n                .reflection-time {\n                    color: var(--text-secondary);\n                    font-size: 0.9rem;\n                }\n\n                .reaction-buttons {\n                    display: flex;\n                    gap: 0.75rem;\n                }\n\n                .reaction-btn {\n                    display: flex;\n                    align-items: center;\n                    gap: 0.25rem;\n                    padding: 0.5rem 0.75rem;\n                    background: var(--bg-secondary);\n                    border: 1px solid var(--border-color);\n                    border-radius: 20px;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    color: var(--text-secondary);\n                }\n\n                .reaction-btn:hover {\n                    background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(236, 72, 153, 0.1) 100%);\n                    border-color: #a855f7;\n                    transform: scale(1.05);\n                }\n\n                .reaction-btn.active {\n                    background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);\n                    color: white;\n                    border-color: transparent;\n                }\n\n                .reaction-icon {\n                    font-size: 1.1rem;\n                }\n\n                .reaction-count {\n                    font-size: 0.9rem;\n                    font-weight: 500;\n                }\n\n                .empty-reflections {\n                    text-align: center;\n                    padding: 4rem 2rem;\n                    background: var(--card-bg);\n                    border-radius: 16px;\n                }\n\n                .empty-icon {\n                    font-size: 4rem;\n                    margin-bottom: 1rem;\n                    opacity: 0.5;\n                }\n\n                .empty-reflections h3 {\n                    color: var(--text-primary);\n                    margin-bottom: 0.5rem;\n                }\n\n                .empty-reflections p {\n                    color: var(--text-secondary);\n                }\n\n                @media (max-width: 768px) {\n                    .reflections-container {\n                        padding: 1rem;\n                    }\n\n                    .reflections-header {\n                        padding: 2rem 1rem;\n                    }\n\n                    .reflections-header h1 {\n                        font-size: 2rem;\n                    }\n\n                    .reflection-stats {\n                        gap: 1rem;\n                    }\n\n                    .filter-tabs {\n                        flex-direction: column;\n                    }\n\n                    .compose-section {\n                        padding: 1.5rem;\n                    }\n                }\n            "}),m.jsxs("div",{className:"reflections-container",children:[m.jsxs("div",{className:"reflections-header",children:[m.jsx("h1",{children:"Astral Reflections"}),m.jsx("p",{children:"A sanctuary for positive thoughts, gratitude, and shared wisdom"}),m.jsxs("div",{className:"reflection-stats",children:[m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-number",children:a.length}),m.jsx("span",{className:"stat-label",children:"Reflections"})]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-number",children:a.reduce((e,s)=>e+Object.values(s.reactions).reduce((e,s)=>e+s,0),0)}),m.jsx("span",{className:"stat-label",children:"Reactions"})]}),m.jsxs("div",{className:"stat-item",children:[m.jsx("span",{className:"stat-number",children:"âœ¨"}),m.jsx("span",{className:"stat-label",children:"Growing Daily"})]})]})]}),m.jsxs("div",{className:"compose-section",children:[m.jsxs("div",{className:"prompt-banner",children:[m.jsx("span",{className:"prompt-icon",children:"ðŸ’­"}),m.jsx("span",{className:"prompt-text",children:N})]}),m.jsxs("form",{onSubmit:e=>c(null,null,function*(){if(e.preventDefault(),n.trim()&&t){j(!0);try{const e=yield Pe.reflections.postReflection(t,n.trim());r(s=>[e,...s]),i("")}catch(s){alert("Could not post your reflection. Please try again.")}finally{j(!1)}}}),className:"compose-form",children:[m.jsxs("div",{className:"textarea-wrapper",children:[m.jsx(X,{label:"Share your reflection",placeholder:"Write something positive, inspiring, or grateful...",value:n,onChange:e=>i(e.target.value),maxLength:w,rows:4}),m.jsxs("span",{className:`character-count ${n.length>252?"warning":""} ${n.length>=w?"error":""}`,children:[n.length," / ",w]})]}),m.jsx("div",{className:"form-actions",style:{justifyContent:"flex-end"},children:m.jsxs(f,{type:"submit",onClick:()=>{},isLoading:p,disabled:p||!n.trim(),variant:"primary",enhanced:!0,children:[m.jsx(_,{}),"Share Reflection"]})})]})]}),m.jsxs("div",{className:"filter-tabs",children:[m.jsxs("button",{className:"all"===y?"filter-tab active":"filter-tab",onClick:()=>v("all"),children:[m.jsx(b,{}),"All Reflections"]}),m.jsxs("button",{className:"popular"===y?"filter-tab active":"filter-tab",onClick:()=>v("popular"),children:[m.jsx(u,{}),"Most Loved"]}),m.jsxs("button",{className:"recent"===y?"filter-tab active":"filter-tab",onClick:()=>v("recent"),children:[m.jsx(g,{}),"Recent"]})]}),m.jsx("div",{className:"reflections-grid",children:h?[...Array(3)].map((e,s)=>m.jsxs(A,{className:"reflection-card",children:[m.jsx("div",{className:"content-skeleton",style:{height:"60px",marginBottom:"1rem"}}),m.jsx("div",{className:"content-skeleton",style:{height:"20px",width:"30%"}})]},s)):T.length>0?T.map(e=>m.jsxs("div",{className:"reflection-card",children:[m.jsx("p",{className:"reflection-content",children:e.content}),m.jsxs("div",{className:"reflection-meta",children:[m.jsx("span",{className:"reflection-time",children:new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),m.jsxs("div",{className:"reaction-buttons",children:[m.jsxs("button",{className:"heart"===e.myReaction?"reaction-btn active":"reaction-btn",onClick:()=>C(e.id,"heart"),children:[m.jsx("span",{className:"reaction-icon",children:"â¤ï¸"}),m.jsx("span",{className:"reaction-count",children:e.reactions.heart||0})]}),m.jsxs("button",{className:"star"===e.myReaction?"reaction-btn active":"reaction-btn",onClick:()=>C(e.id,"star"),children:[m.jsx("span",{className:"reaction-icon",children:"â­"}),m.jsx("span",{className:"reaction-count",children:e.reactions.star||0})]}),m.jsxs("button",{className:"lightbulb"===e.myReaction?"reaction-btn active":"reaction-btn",onClick:()=>C(e.id,"lightbulb"),children:[m.jsx("span",{className:"reaction-icon",children:"ðŸ’¡"}),m.jsx("span",{className:"reaction-count",children:e.reactions.lightbulb||0})]})]})]})]},e.id)):m.jsxs("div",{className:"empty-reflections",children:[m.jsx("div",{className:"empty-icon",children:"ðŸŒŸ"}),m.jsx("h3",{children:"No reflections yet"}),m.jsx("p",{children:"Be the first to share a positive thought or moment of gratitude"})]})})]})]})},vs=Object.freeze(Object.defineProperty({__proto__:null,ReflectionsView:bs,default:bs},Symbol.toStringTag,{value:"Module"})),fs={triggers:"",copingStrategies:"",supportContacts:"",safePlaces:""},Ns={triggers:"Feeling overwhelmed or hopeless, Increased anxiety or panic, Difficulty sleeping, Isolating from others",copingStrategies:"ðŸŽµ Listen to calming music, ðŸš¶ Take a walk outside, ðŸ§˜ Practice deep breathing, ðŸ“ Write in a journal, ðŸ“ž Call a friend",supportContacts:"Best friend Sarah: (555) 123-4567\nTherapist Dr. Johnson: (555) 987-6543\nSister Emily: (555) 456-7890\nCrisis Hotline: 988",safePlaces:"Local library - quiet and peaceful\nCoffee shop on Main Street\nCity park walking trail\nBest friend's house"},ks=[{name:"988 Suicide & Crisis Lifeline",contact:"988",description:"24/7 support for crisis situations"},{name:"Crisis Text Line",contact:"Text HOME to 741741",description:"Free 24/7 text support"},{name:"SAMHSA National Helpline",contact:"1-800-662-4357",description:"Treatment referral and information"},{name:"NAMI HelpLine",contact:"1-800-950-6264",description:"Mon-Fri, 10am-10pm ET"}],ws=["ðŸŽµ Listen to calming music","ðŸš¶ Take a walk outside","ðŸ§˜ Practice deep breathing","ðŸ“ Write in a journal","ðŸŽ¨ Draw or create art","ðŸ• Spend time with pets","ðŸŒ± Garden or care for plants","ðŸ“ž Call a friend","ðŸ› Take a warm bath","â˜• Make a cup of tea","ðŸ§© Do a puzzle or game","ðŸ“– Read a favorite book"],Ss=["Feeling overwhelmed or hopeless","Increased anxiety or panic","Difficulty sleeping","Isolating from others","Changes in appetite","Increased irritability","Difficulty concentrating","Physical tension or pain"],Cs=({userToken:e})=>{const{userToken:s}=Fe(),t=null!=e?e:s,[a,r]=d.useState(fs),[n,i]=d.useState(!1),[h,p]=d.useState(!0),{addToast:j}=D();d.useEffect(()=>{t?(p(!0),Pe.safetyPlan.get(t).then(e=>{e?(r(e),i(!1)):i(!0)}).catch(e=>{j("Could not load your safety plan.","error")}).finally(()=>{p(!1)})):p(!1)},[j,t]);const y=e=>{r(o(l({},a),{[e.target.name]:e.target.value}))};return h?m.jsx("div",{className:"loading-spinner",style:{margin:"5rem auto"}}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"view-header",children:[m.jsx("h1",{children:"My Astral Safety Plan"}),m.jsx("p",{className:"view-subheader",children:"Your personalized crisis prevention toolkit - always here when you need it"})]}),m.jsxs(A,{className:"emergency-resources-card",children:[m.jsxs("div",{className:"emergency-header",children:[m.jsx(x,{}),m.jsx("h2",{children:"Immediate Help Available 24/7"})]}),m.jsx("div",{className:"hotlines-grid",children:ks.map(e=>m.jsxs("div",{className:"hotline-card",children:[m.jsx(ee,{}),m.jsxs("div",{className:"hotline-info",children:[m.jsx("h3",{children:e.name}),m.jsx("p",{className:"hotline-contact",children:e.contact}),m.jsx("p",{className:"hotline-description",children:e.description})]})]},e.name))})]}),m.jsxs(A,{className:"safety-plan-card",children:[!n&&m.jsxs("div",{className:"safety-plan-actions",children:[m.jsxs(f,{variant:"primary",onClick:()=>i(!0),children:[m.jsx(se,{}),m.jsx("span",{children:"Edit My Plan"})]}),m.jsx(f,{variant:"secondary",onClick:()=>window.print(),children:"Print Plan"})]}),n&&!a.triggers&&!a.copingStrategies&&!a.supportContacts&&!a.safePlaces&&m.jsxs("div",{className:"demo-data-prompt",style:{textAlign:"center",padding:"1rem",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%)",borderRadius:"12px",marginBottom:"1.5rem"},children:[m.jsx("p",{style:{marginBottom:"1rem",color:"#5a6c7d"},children:"New to safety planning? Start with our example template!"}),m.jsxs(f,{variant:"primary",onClick:()=>{r(Ns),j("Demo safety plan loaded! Feel free to customize it.","success")},children:[m.jsx(g,{}),m.jsx("span",{children:"Load Example Safety Plan"})]})]}),m.jsxs("div",{className:"safety-plan-section",children:[m.jsxs("h2",{children:[m.jsx(g,{}),m.jsx("span",{children:"Warning Signs"})]}),m.jsx("p",{className:"safety-plan-prompt",children:"What changes in thoughts, feelings, or behaviors signal that you might need to use your safety plan?"}),n?m.jsxs(m.Fragment,{children:[m.jsx(J,{name:"triggers",value:a.triggers,onChange:y,placeholder:"Describe warning signs that indicate you're struggling..."}),m.jsxs("div",{className:"suggestion-chips",children:[m.jsx("p",{className:"suggestion-label",children:"Common warning signs:"}),Ss.map((e,s)=>m.jsx("button",{className:"suggestion-chip",onClick:()=>r(o(l({},a),{triggers:a.triggers+(a.triggers?", ":"")+e})),children:e},s))]})]}):m.jsx("div",{className:"safety-plan-content",children:a.triggers||"No warning signs listed."})]}),m.jsxs("div",{className:"safety-plan-section",children:[m.jsxs("h2",{children:[m.jsx(u,{}),m.jsx("span",{children:"My Coping Strategies"})]}),m.jsx("p",{className:"safety-plan-prompt",children:"Healthy activities that help you feel better when you're struggling"}),n?m.jsxs(m.Fragment,{children:[m.jsx(J,{name:"copingStrategies",value:a.copingStrategies,onChange:y,placeholder:"List activities that help you cope with difficult emotions..."}),m.jsxs("div",{className:"suggestion-chips",children:[m.jsx("p",{className:"suggestion-label",children:"Try these coping strategies:"}),ws.map((e,s)=>m.jsx("button",{className:"suggestion-chip",onClick:()=>r(o(l({},a),{copingStrategies:a.copingStrategies+(a.copingStrategies?"\n":"")+e})),children:e},s))]})]}):m.jsx("div",{className:"safety-plan-content",children:a.copingStrategies||"No strategies listed."})]}),m.jsxs("div",{className:"safety-plan-section",children:[m.jsx("h2",{children:"My Support Team"}),m.jsx("p",{className:"safety-plan-prompt",children:"Who are some trusted people you can contact for support?"}),n?m.jsx(J,{name:"supportContacts",value:a.supportContacts,onChange:y,placeholder:"e.g., My friend Alex (555-1234), my sister Sarah, my therapist's office..."}):m.jsx("div",{className:"safety-plan-content",children:a.supportContacts||"No contacts listed."})]}),m.jsxs("div",{className:"safety-plan-section",children:[m.jsx("h2",{children:"My Safe Places"}),m.jsx("p",{className:"safety-plan-prompt",children:"Where can you go to feel safe and calm?"}),n?m.jsx(J,{name:"safePlaces",value:a.safePlaces,onChange:y,placeholder:"e.g., My bedroom, the local park, the library..."}):m.jsx("div",{className:"safety-plan-content",children:a.safePlaces||"No safe places listed."})]}),n&&m.jsx("div",{className:"safety-plan-actions",children:m.jsx(f,{variant:"success",onClick:()=>c(null,null,function*(){if(t){p(!0);try{yield Pe.safetyPlan.save(a,t),i(!1),j("Your safety plan has been saved!","success")}catch(e){j("Could not save your safety plan.","error")}finally{p(!1)}}else j("Cannot save plan without a user session.","error")}),isLoading:h,children:"Save My Plan"})})]})]})},Ts=Object.freeze(Object.defineProperty({__proto__:null,SafetyPlanView:Cs,default:Cs},Symbol.toStringTag,{value:"Module"})),As=[{name:"4-7-8 Breathing",description:"Calming technique for anxiety and sleep",phases:[{phase:"inhale",duration:4e3,text:"Inhale... 4"},{phase:"hold",duration:7e3,text:"Hold... 7"},{phase:"exhale",duration:8e3,text:"Exhale... 8"},{phase:"pause",duration:2e3,text:"Rest"}]},{name:"Box Breathing",description:"Navy SEAL technique for focus and calm",phases:[{phase:"inhale",duration:4e3,text:"Inhale... 4"},{phase:"hold",duration:4e3,text:"Hold... 4"},{phase:"exhale",duration:4e3,text:"Exhale... 4"},{phase:"pause",duration:4e3,text:"Hold... 4"}]},{name:"Coherent Breathing",description:"Balance your nervous system",phases:[{phase:"inhale",duration:5e3,text:"Inhale... 5"},{phase:"exhale",duration:5e3,text:"Exhale... 5"}]}],Ms=[{title:"Headspace",description:"Guided meditation and mindfulness",url:"https://www.headspace.com",icon:"ðŸ§˜"},{title:"Calm",description:"Sleep stories and relaxation",url:"https://www.calm.com",icon:"ðŸ˜´"},{title:"Insight Timer",description:"Free meditation community",url:"https://insighttimer.com",icon:"â°"},{title:"Progressive Muscle Relaxation",description:"Physical tension release technique",url:"https://www.healthline.com/health/progressive-muscle-relaxation",icon:"ðŸ’ª"},{title:"7 Cups",description:"Anonymous emotional support",url:"https://www.7cups.com",icon:"â˜•"},{title:"Nature Sounds",description:"Calming ambient sounds",url:"https://www.noisli.com",icon:"ðŸŒ¿"}],Ps=()=>{const[e,s]=d.useState(!1),[t,a]=d.useState(0),[r,n]=d.useState(!0),i=d.useRef(null),[l,o]=d.useState("pause"),[c,h]=d.useState("Begin"),[x,p]=d.useState(0),y=d.useRef(null),b=d.useRef(null),[v,N]=d.useState("ocean"),[k,w]=d.useState(!1);d.useEffect(()=>{if(!i.current&&"undefined"!=typeof AudioContext){const e=new(window.AudioContext||window.webkitAudioContext),s=()=>{const s=e.createOscillator(),t=e.createGain();s.connect(t),t.connect(e.destination),s.frequency.value=800,s.type="sine",t.gain.setValueAtTime(.3,e.currentTime),t.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),s.start(e.currentTime),s.stop(e.currentTime+.5)};window.playChime=s}return()=>{y.current&&clearInterval(y.current),b.current&&clearTimeout(b.current)}},[]);const S=()=>{y.current&&clearInterval(y.current),b.current&&clearTimeout(b.current),o("pause"),h("Begin"),p(0)},C=()=>{const e=As[t];let s=0;const a=()=>{const t=e.phases[s];o(t.phase),h(t.text),p(0),r&&window.playChime&&window.playChime();let n=0;const i=100/(t.duration/50);y.current=window.setInterval(()=>{n+=i,p(Math.min(n,100)),n>=100&&clearInterval(y.current)},50),b.current=window.setTimeout(()=>{s=(s+1)%e.phases.length,a()},t.duration)};a()};return m.jsxs("div",{className:"quiet-space-container",children:[m.jsx(te,{theme:v,intensity:.3}),m.jsxs("div",{className:"view-header",children:[m.jsx("h1",{children:"Astral Quiet Space"}),m.jsx("p",{className:"view-subheader",children:"Your sanctuary for calm and mindfulness"}),m.jsxs("div",{className:"theme-selector",style:{display:"flex",alignItems:"center",gap:"1rem",justifyContent:"center",marginTop:"1rem"},children:[m.jsx("span",{style:{color:"#7f8c8d",fontSize:"0.9rem"},children:"Ambiance:"}),m.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:[{theme:"ocean",emoji:"ðŸŒŠ",title:"Ocean waves"},{theme:"forest",emoji:"ðŸŒ²",title:"Forest"},{theme:"sky",emoji:"â˜ï¸",title:"Sky"},{theme:"aurora",emoji:"ðŸŒŒ",title:"Aurora"}].map(({theme:e,emoji:s,title:t})=>m.jsx("button",{className:"theme-btn "+(v===e?"active":""),onClick:()=>N(e),title:t,style:{width:"40px",height:"40px",borderRadius:"50%",border:v===e?"2px solid #667eea":"2px solid transparent",background:v===e?"white":"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:v===e?"0 4px 12px rgba(102, 126, 234, 0.3)":"none",transition:"all 0.3s ease"},children:s},e))})]})]}),k&&m.jsx(ae,{onComplete:()=>w(!1)}),m.jsx("div",{style:{textAlign:"center",marginBottom:"2rem"},children:m.jsx("button",{onClick:()=>w(!k),style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%)",color:"white",border:"none",borderRadius:"25px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s ease"},children:k?"ðŸ§˜ Hide Meditation Timer":"ðŸ§˜ Open Meditation Timer"})}),m.jsx("div",{style:{marginBottom:"2rem"},children:m.jsx(G,{})}),m.jsxs(A,{className:"breathing-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx(g,{}),m.jsx("span",{children:"Breathing Exercises"})]}),m.jsx("div",{className:"breathing-patterns",children:As.map((s,r)=>m.jsxs("button",{className:"pattern-card "+(t===r?"active":""),onClick:()=>{a(r),e&&S();const s=document.querySelectorAll(".pattern-card");s.forEach(e=>e.classList.add("transitioning")),setTimeout(()=>{s.forEach(e=>e.classList.remove("transitioning"))},300)},children:[m.jsx("h3",{children:s.name}),m.jsx("p",{children:s.description})]},r))}),m.jsx("div",{className:"breathing-circle-container",children:m.jsxs("div",{className:`breathing-circle ${l}`,children:[m.jsx("div",{className:"breathing-text",children:c}),m.jsx("div",{className:"phase-progress",style:{width:`${x}%`,transition:"width 0.1s linear"}})]})}),m.jsx("p",{className:"quiet-space-instructions",children:e?`Following ${As[t].name} pattern`:"Select a pattern and press start to begin"}),m.jsxs("div",{className:"breathing-controls",children:[m.jsxs(f,{className:"quiet-space-button",onClick:()=>{e?S():C(),s(!e)},variant:"primary",children:[e?m.jsx(re,{}):m.jsx(ne,{}),m.jsxs("span",{children:[e?"Stop":"Start"," Breathing"]})]}),m.jsxs("label",{className:"chime-toggle",children:[m.jsx("input",{type:"checkbox",checked:r,onChange:e=>n(e.target.checked)}),m.jsx("span",{children:"Play chimes"})]})]})]}),m.jsxs(A,{className:"resources-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx(u,{}),m.jsx("span",{children:"Stress Relief Resources"})]}),m.jsx("p",{className:"section-description",children:"Explore these helpful tools and communities for additional support"}),m.jsx("div",{className:"resource-grid",children:Ms.map((e,s)=>m.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"resource-card",children:[m.jsx("span",{className:"resource-icon",children:e.icon}),m.jsxs("div",{className:"resource-info",children:[m.jsx("h3",{children:e.title}),m.jsx("p",{children:e.description})]}),m.jsx("span",{className:"resource-arrow",children:"â†’"})]},s))})]}),m.jsxs(A,{className:"additional-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx(j,{}),m.jsx("span",{children:"Learn More"})]}),m.jsxs("div",{className:"learn-more-buttons",children:[m.jsx(f,{variant:"secondary",onClick:()=>window.open("https://www.healthline.com/health/breathing-exercises-for-anxiety","_blank"),children:"Breathing Techniques Guide"}),m.jsx(f,{variant:"secondary",onClick:()=>window.open("https://www.mindful.org/meditation/mindfulness-getting-started/","_blank"),children:"Mindfulness for Beginners"}),m.jsx(f,{variant:"secondary",onClick:()=>window.open("https://www.sleepfoundation.org/sleep-hygiene","_blank"),children:"Better Sleep Tips"})]})]})]})},Is=Object.freeze(Object.defineProperty({__proto__:null,QuietSpaceView:Ps,default:Ps},Symbol.toStringTag,{value:"Module"})),Ds=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,s]=d.useState(!1);return d.useEffect(()=>{},[]),m.jsx("div",{className:"min-h-screen bg-red-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-8",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(ie,{className:"w-8 h-8 text-red-600 dark:text-red-400 mr-3"}),m.jsx("h1",{className:"text-2xl font-bold text-red-800 dark:text-red-200",children:"Crisis Support Resources"})]}),m.jsx("p",{className:"text-red-700 dark:text-red-300 text-lg",children:"If you're experiencing a mental health crisis, you're not alone. Help is available 24/7."})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(x,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-2"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Immediate Support"})]}),m.jsx("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-3",children:[{id:"suicide-prevention",name:"988 Suicide & Crisis Lifeline",phone:"988",description:"Free and confidential emotional support 24/7",available24h:!0},{id:"crisis-text",name:"Crisis Text Line",phone:"Text HOME to 741741",description:"Text-based crisis support",available24h:!0},{id:"emergency",name:"Emergency Services",phone:"911",description:"For immediate medical emergencies",available24h:!0}].map(e=>m.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:e.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-3",children:e.description}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:e.phone}),m.jsxs("button",{onClick:()=>{var t;"911"===(t=e.phone)||"988"===t?(s(!0),window.open(`tel:${t}`,"_self")):t.includes("741741")&&window.open("sms:741741?body=HOME","_self")},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.phone.includes("Text")?m.jsx(P,{className:"w-4 h-4"}):m.jsx(ee,{className:"w-4 h-4"}),e.phone.includes("Text")?"Text":"Call"]})]}),e.available24h&&m.jsx("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400",children:"âœ“ Available 24/7"})]},e.id))})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(u,{className:"w-6 h-6 text-pink-600 dark:text-pink-400 mr-2"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Safety & Coping Strategies"})]}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Immediate Coping Techniques"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[m.jsx("li",{children:"â€¢ Take slow, deep breaths"}),m.jsx("li",{children:"â€¢ Ground yourself - notice 5 things you can see, 4 you can touch, 3 you can hear"}),m.jsx("li",{children:"â€¢ Call a trusted friend or family member"}),m.jsx("li",{children:"â€¢ Remove yourself from harmful situations"}),m.jsx("li",{children:"â€¢ Use ice or cold water on your face/hands"})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"When to Seek Emergency Help"}),m.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[m.jsx("li",{children:"â€¢ Thoughts of hurting yourself or others"}),m.jsx("li",{children:"â€¢ Unable to care for yourself"}),m.jsx("li",{children:"â€¢ Severe panic or anxiety attacks"}),m.jsx("li",{children:"â€¢ Hearing voices or seeing things"}),m.jsx("li",{children:"â€¢ Feeling completely hopeless"})]})]})]})]}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-blue-800 dark:text-blue-200 mb-4",children:"Follow-up Support"}),m.jsx("p",{className:"text-blue-700 dark:text-blue-300 mb-4",children:"After the immediate crisis passes, consider these ongoing support options:"}),m.jsxs("ul",{className:"space-y-2 text-blue-600 dark:text-blue-400",children:[m.jsx("li",{children:"â€¢ Schedule an appointment with a mental health professional"}),m.jsx("li",{children:"â€¢ Contact your primary care doctor"}),m.jsx("li",{children:"â€¢ Join a support group in your area"}),m.jsx("li",{children:"â€¢ Use the Astral Core wellness tracking features"}),m.jsx("li",{children:"â€¢ Create a safety plan with your support network"})]})]}),e&&m.jsx("div",{className:"fixed bottom-4 right-4 bg-green-500 text-white p-4 rounded-lg shadow-lg",children:"Help is on the way. Stay safe."})]})})}},Symbol.toStringTag,{value:"Module"})),Rs=["All","Emergency Help","Text Support","Youth & Students","Veterans","LGBTQ+","Coping Strategies"],Hs={"Youth & Students":{icon:oe,color:"#3B82F6",description:"Specialized support for young people and students"},Veterans:{icon:ce,color:"#10B981",description:"Resources specifically for military veterans"},"LGBTQ+":{icon:u,color:"#F59E0B",description:"Safe spaces and support for LGBTQ+ individuals"}},Os=[{name:"National Suicide Prevention Lifeline",number:"988",description:"24/7 free and confidential support",type:"crisis"},{name:"Crisis Text Line",number:"741741",description:"Text HOME for immediate support",type:"text"},{name:"Emergency Services",number:"911",description:"Life-threatening emergencies",type:"emergency"}],Es=({emergency:e})=>m.jsxs(A,{className:`emergency-card ${e.type}`,children:[m.jsxs("div",{className:"emergency-header",children:[m.jsx(ee,{className:"emergency-icon"}),m.jsxs("div",{className:"emergency-info",children:[m.jsx("h3",{children:e.name}),m.jsx("p",{children:e.description})]})]}),m.jsx("div",{className:"emergency-actions",children:m.jsx(f,{variant:"primary",className:"call-button",onClick:()=>{"text"===e.type?window.open(`sms:${e.number}?body=HOME`,"_blank"):window.open(`tel:${e.number}`,"_blank")},children:"text"===e.type?`Text ${e.number}`:`Call ${e.number}`})})]}),Ls=({resource:e,priority:s})=>{const t=Hs[e.category],a=(null==t?void 0:t.icon)||x;return m.jsxs(A,{className:`resource-card ${s?"priority-resource":""} ${e.category.toLowerCase().replace(/[^a-z0-9]/g,"-")}`,children:[m.jsxs("div",{className:"resource-header",children:[m.jsxs("div",{className:"resource-title-section",children:[t&&m.jsx(a,{className:"category-icon",style:{color:t.color}}),m.jsx("h3",{children:e.title})]}),s&&m.jsx("span",{className:"priority-badge",children:"Immediate Help"})]}),m.jsx("p",{className:"resource-description",children:e.description}),m.jsx("div",{className:"resource-contact",children:e.contact?m.jsxs("div",{className:"contact-info",children:[m.jsx(ee,{}),m.jsx("strong",{children:e.contact}),m.jsx(f,{variant:"secondary",size:"sm",onClick:()=>{var s;const t=null==(s=e.contact)?void 0:s.replace(/[^\d]/g,"");t&&window.open(`tel:${t}`,"_blank")},className:"quick-call-btn",children:"Call Now"})]}):m.jsx(f,{variant:"secondary",onClick:()=>window.open(e.link,"_blank"),className:"resource-button",children:"Learn More"})})]})},zs=()=>m.jsxs(A,{className:"safety-plan-card",children:[m.jsxs("div",{className:"safety-plan-header",children:[m.jsx(x,{className:"safety-icon"}),m.jsxs("div",{className:"safety-plan-info",children:[m.jsx("h3",{children:"Personal Safety Plan"}),m.jsx("p",{children:"Quick access to your personalized crisis management plan"})]})]}),m.jsxs("div",{className:"safety-plan-actions",children:[m.jsx(f,{variant:"primary",onClick:()=>window.location.href="#/safety-plan",className:"safety-plan-btn",children:"View My Safety Plan"}),m.jsx(f,{variant:"secondary",onClick:()=>window.location.href="#/create-safety-plan",className:"create-safety-plan-btn",children:"Create Safety Plan"})]})]}),Fs=()=>{const[e,s]=d.useState([]),[t,a]=d.useState([]),[r,n]=d.useState(!0),[i,l]=d.useState("All"),[o,c]=d.useState("");return d.useEffect(()=>{n(!0),Pe.resources.getResources().then(e=>{s(Array.isArray(e)?e:[]),a(Array.isArray(e)?e:[])}).catch(e=>{const t=[{id:"crisis-1",title:"National Suicide Prevention Lifeline",description:"24/7 free and confidential support for people in distress and prevention resources.",category:"Emergency Help",contact:"988",link:"https://suicidepreventionlifeline.org"},{id:"crisis-2",title:"Emergency Services",description:"For immediate life-threatening emergencies requiring police, fire, or medical response.",category:"Emergency Help",contact:"911",link:""},{id:"crisis-3",title:"SAMHSA National Helpline",description:"Treatment referral and information service for mental health and substance use disorders.",category:"Emergency Help",contact:"1-800-662-4357",link:"https://samhsa.gov"},{id:"text-1",title:"Crisis Text Line",description:"Free, 24/7 crisis support via text message. Trained counselors available immediately.",category:"Text Support",contact:"Text HOME to 741741",link:"https://crisistextline.org"},{id:"text-2",title:"Teen Line Text Support",description:"Text support specifically for teenagers, by trained teen volunteers.",category:"Text Support",contact:"Text TEEN to 839863",link:"https://teenlineonline.org"},{id:"youth-1",title:"National Suicide Prevention Lifeline (Youth)",description:"Specialized support for young people experiencing suicidal thoughts.",category:"Youth & Students",contact:"988",link:"https://suicidepreventionlifeline.org"},{id:"youth-2",title:"JED Campus Mental Health",description:"Mental health resources and support specifically designed for college students.",category:"Youth & Students",contact:"",link:"https://jedcampus.org"},{id:"veterans-1",title:"Veterans Crisis Line",description:"24/7 confidential support for Veterans and their families, even if not enrolled in VA.",category:"Veterans",contact:"1-800-273-8255 Press 1",link:"https://veteranscrisisline.net"},{id:"veterans-2",title:"Veterans Text Support",description:"Text support for Veterans experiencing crisis or emotional distress.",category:"Veterans",contact:"Text 838255",link:"https://veteranscrisisline.net"},{id:"lgbtq-1",title:"The Trevor Project",description:"24/7 crisis support services to LGBTQ young people under 25.",category:"LGBTQ+",contact:"1-866-488-7386",link:"https://thetrevorproject.org"},{id:"lgbtq-2",title:"Trans Lifeline",description:"Crisis hotline staffed by transgender people for transgender people.",category:"LGBTQ+",contact:"877-565-8860",link:"https://translifeline.org"},{id:"coping-1",title:"Breathing Techniques for Anxiety",description:"Learn the 4-7-8 breathing technique and box breathing to manage anxiety attacks.",category:"Coping Strategies",contact:"",link:"#/quiet-space"},{id:"coping-2",title:"Grounding Exercises (5-4-3-2-1)",description:"Use your senses to ground yourself: 5 things you see, 4 you touch, 3 you hear, 2 you smell, 1 you taste.",category:"Coping Strategies",contact:"",link:"#/quiet-space"},{id:"coping-3",title:"Progressive Muscle Relaxation",description:"Systematic tensing and relaxing of muscle groups to reduce physical tension.",category:"Coping Strategies",contact:"",link:"#/quiet-space"},{id:"coping-4",title:"Mindfulness Meditation",description:"Simple mindfulness exercises to help center yourself in the present moment.",category:"Coping Strategies",contact:"",link:"#/quiet-space"}];s(t),a(t)}).finally(()=>n(!1))},[]),d.useEffect(()=>{let s=e;if("All"!==i&&(s=s.filter(e=>e.category===i)),o){const e=o.toLowerCase();s=s.filter(s=>s.title.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))}a(s)},[i,o,e]),m.jsxs("div",{className:"crisis-resources-container",children:[m.jsxs("div",{className:"calm-header",children:[m.jsx("h1",{children:"Crisis Support & Resources"}),m.jsx("p",{children:"You're not alone. Here you'll find helpful resources and immediate support when you need it most."})]}),m.jsx(We,{}),m.jsxs("div",{className:"emergency-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx(ee,{className:"section-icon"}),m.jsx("span",{children:"Emergency Contact Numbers"})]}),m.jsx("div",{className:"emergency-grid",children:Os.map(e=>m.jsx(Es,{emergency:e},e.number))})]}),m.jsx("div",{className:"quick-access-section",children:m.jsxs("div",{className:"quick-access-grid",children:[m.jsxs(f,{variant:"primary",size:"lg",onClick:()=>window.location.href="#/quiet-space",className:"quick-access-btn breathing-btn",children:[m.jsx(u,{}),m.jsx("span",{children:"Quiet Space & Breathing"})]}),m.jsxs(f,{variant:"secondary",size:"lg",onClick:()=>window.location.href="#/crisis-chat",className:"quick-access-btn chat-btn",children:[m.jsx(x,{}),m.jsx("span",{children:"Crisis Chat Support"})]}),m.jsxs(f,{variant:"secondary",size:"lg",onClick:()=>window.location.href="#/safety-plan",className:"quick-access-btn safety-btn",children:[m.jsx(le,{}),m.jsx("span",{children:"My Safety Plan"})]})]})}),m.jsx("div",{style:{marginBottom:"2rem"},children:m.jsx(G,{embedded:!1})}),m.jsx(zs,{}),m.jsxs("div",{className:"search-section",children:[m.jsxs("div",{className:"search-wrapper",children:[m.jsx(S,{className:"search-icon"}),m.jsx("input",{type:"search",placeholder:"Search for specific topics or resources...",className:"search-input",value:o,onChange:e=>c(e.target.value)})]}),m.jsx("div",{className:"category-filters",children:Rs.map(e=>m.jsx("button",{className:"category-btn "+(i===e?"active":""),onClick:()=>l(e),children:e},e))})]}),r?m.jsxs("div",{className:"loading-state",children:[m.jsx(g,{className:"loading-icon"}),m.jsx("p",{children:"Loading resources..."})]}):m.jsx(m.Fragment,{children:t.length>0?m.jsxs("div",{className:"resources-section",children:[m.jsxs("h2",{className:"section-title",children:[m.jsx(oe,{className:"section-icon"}),m.jsx("span",{children:"All"===i?"All Resources":i})]}),m.jsx("div",{className:"resources-grid",children:t.map(e=>m.jsx(Ls,{resource:e,priority:"Emergency Help"===e.category},e.id))})]}):m.jsxs("div",{className:"empty-state",children:[m.jsx(u,{className:"empty-icon"}),m.jsx("h3",{children:"No resources found"}),m.jsx("p",{children:"Try adjusting your search or filters to find what you're looking for."}),m.jsx(f,{variant:"secondary",onClick:()=>{c(""),l("All")},children:"Clear Filters"})]})})]})},Bs=Object.freeze(Object.defineProperty({__proto__:null,CrisisResourcesView:Fs,default:Fs},Symbol.toStringTag,{value:"Module"})),_s=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=[{icon:u,title:"Wellness Tracking",description:"Monitor your mental health with daily check-ins and mood tracking"},{icon:p,title:"Peer Support",description:"Connect with trained helpers and supportive community members"},{icon:g,title:"AI Companion",description:"Get support from our intelligent mental health assistant"},{icon:x,title:"Crisis Support",description:"24/7 access to crisis resources and emergency contacts"}];return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4",children:"About Astral Core"}),m.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"A safe, anonymous platform dedicated to mental health support and peer-to-peer care"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 mb-8",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Our Mission"}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-lg leading-relaxed",children:"Astral Core exists to provide a safe, supportive space where people can seek help, share experiences, and support each other through mental health challenges. We believe that everyone deserves access to mental health resources and a community that cares."})]}),m.jsx("div",{className:"grid gap-8 md:grid-cols-2 mb-8",children:e.map(e=>{const s=e.icon;return m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[m.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:m.jsx(s,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),m.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:e.title})]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e.description})]},e.title)})}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-8 mb-8",children:[m.jsx("h2",{className:"text-2xl font-semibold text-blue-800 dark:text-blue-200 mb-4",children:"Privacy & Safety First"}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Anonymous by Design"}),m.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Your identity is protected at every level. No real names required, no identifying information stored."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Crisis Detection"}),m.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"Our AI systems monitor for crisis indicators and immediately connect users with appropriate resources."})]})]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 mb-8",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Our Values"}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[m.jsxs("div",{className:"text-center",children:[m.jsx(u,{className:"w-12 h-12 text-pink-500 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Compassion"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Every interaction is guided by empathy and understanding"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx(x,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Safety"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"User safety and privacy are our highest priorities"})]}),m.jsxs("div",{className:"text-center",children:[m.jsx(p,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Community"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Together, we create a supportive network of care"})]})]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Get Help or Get Involved"}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Need Immediate Help?"}),m.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[m.jsx("p",{children:"â€¢ Crisis Support: Available 24/7 in the app"}),m.jsx("p",{children:"â€¢ National Suicide Prevention Lifeline: 988"}),m.jsx("p",{children:"â€¢ Crisis Text Line: Text HOME to 741741"}),m.jsx("p",{children:"â€¢ Emergency Services: 911"})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-3",children:"Want to Help Others?"}),m.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[m.jsx("p",{children:"â€¢ Become a peer support helper"}),m.jsx("p",{children:"â€¢ Join our volunteer crisis response team"}),m.jsx("p",{children:"â€¢ Share your story to help others"}),m.jsx("p",{children:"â€¢ Provide feedback to improve the platform"})]})]})]})]}),m.jsxs("div",{className:"text-center mt-8 text-gray-500 dark:text-gray-400 text-sm",children:[m.jsx("p",{children:"Astral Core v1.0.0"}),m.jsx("p",{children:"Built with care for mental health support"})]})]})})}},Symbol.toStringTag,{value:"Module"})),qs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=[{title:"Getting Started",icon:u,topics:["Creating your anonymous profile","Taking your first wellness check-in","Understanding safety features","Navigating the community"]},{title:"Community Support",icon:P,topics:["How to find peer helpers","Posting in community feed","Joining support groups","Giving support to others"]},{title:"Crisis Resources",icon:x,topics:["When to use crisis support","Emergency contact numbers","Safety planning basics","Getting immediate help"]},{title:"Privacy & Safety",icon:j,topics:["How we protect your identity","Managing your privacy settings","Reporting inappropriate content","Understanding our safety features"]}];return m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Help & Support"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Find answers and learn how to make the most of Astral Core"})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-8",children:[m.jsxs("button",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-left hover:shadow-md transition-shadow",children:[m.jsx(x,{className:"w-8 h-8 text-red-600 dark:text-red-400 mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-2",children:"Crisis Support"}),m.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Get immediate help and crisis resources"})]}),m.jsxs("button",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 text-left hover:shadow-md transition-shadow",children:[m.jsx(P,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Contact Support"}),m.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Get help with technical issues"})]}),m.jsxs("button",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 text-left hover:shadow-md transition-shadow",children:[m.jsx(j,{className:"w-8 h-8 text-green-600 dark:text-green-400 mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-green-800 dark:text-green-200 mb-2",children:"User Guide"}),m.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Learn how to use all features"})]})]}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.map(e=>{const s=e.icon;return m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:m.jsx(s,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),m.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:e.title})]}),m.jsx("ul",{className:"space-y-2",children:e.topics.map(e=>m.jsx("li",{children:m.jsxs("button",{className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 text-sm text-left transition-colors",children:["â€¢ ",e]})},e))})]},e.title)})}),m.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Frequently Asked Questions"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Is Astral Core really anonymous?"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Yes, we're designed with privacy first. No real names required, no identifying information stored, and all conversations are encrypted."})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"What happens if I'm in crisis?"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Our AI monitors for crisis indicators and will immediately offer resources. You can also access 24/7 crisis support at any time through the crisis button."})]}),m.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"How are peer helpers trained?"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"All peer helpers complete mental health first aid training and ongoing education. They're volunteers with lived experience who want to help others."})]})]})]}),m.jsxs("div",{className:"mt-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6",children:[m.jsx("h2",{className:"text-lg font-semibold text-red-800 dark:text-red-200 mb-4",children:"Emergency Resources"}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"Suicide & Crisis Lifeline"}),m.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:"988"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"Crisis Text Line"}),m.jsx("p",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:"Text HOME to 741741"})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Ys=()=>m.jsxs(m.Fragment,{children:[m.jsx(N,{title:"Legal Information",subtitle:"Terms of Service, Privacy Policy, and Helper Agreement."}),m.jsxs(A,{className:"legal-card",children:[m.jsxs("section",{children:[m.jsx("h2",{children:"Terms of Service"}),m.jsx("p",{children:"Welcome to Peer Support Circle. By accessing or using our service, you agree to be bound by these terms. If you disagree with any part of the terms, then you may not access the service."}),m.jsxs("p",{children:[m.jsx("strong",{children:"Use of Service:"})," This service is intended for peer-to-peer support. It is not a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of your physician or other qualified health provider with any questions you may have regarding a medical condition."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"User Conduct:"})," You agree not to use the service to post any content that is unlawful, harmful, threatening, abusive, harassing, defamatory, vulgar, obscene, or otherwise objectionable. You are responsible for your own communications and for any consequences thereof."]})]}),m.jsx("hr",{}),m.jsxs("section",{children:[m.jsx("h2",{children:"Privacy Policy"}),m.jsx("p",{children:"Your privacy is critically important to us. This application is designed to be anonymous."}),m.jsxs("p",{children:[m.jsx("strong",{children:"Anonymous ID:"}),' We assign you a randomly generated identifier (your "User Token") which is stored only on your device. This token is not linked to any personal information. You can reset this token at any time in the Settings page.']}),m.jsxs("p",{children:[m.jsx("strong",{children:"Data We Don't Collect:"})," We do not collect your name, email address, IP address, or any other personally identifiable information for users seeking support."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Data Helpers Provide:"}),' Users who sign up to be "Helpers" will provide an email address for authentication purposes. This data is kept separate from the anonymous support system.']})]}),m.jsx("hr",{}),m.jsxs("section",{children:[m.jsx("h2",{children:"Helper Agreement"}),m.jsx("p",{children:'This agreement applies to users who voluntarily sign up for a "Helper" account.'}),m.jsxs("p",{children:[m.jsx("strong",{children:"Role of a Helper:"})," As a Helper, you agree to provide supportive and empathetic peer-to-peer communication. You acknowledge that you are not a licensed therapist or medical professional and will not provide medical advice, diagnoses, or crisis counseling."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Confidentiality:"})," You agree to respect the privacy and anonymity of all users. You will not attempt to identify users or share any information discussed within the platform."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Mandatory Reporting:"})," While maintaining privacy is paramount, if you believe a user is in imminent danger of harming themselves or others, you are encouraged to follow platform protocols for escalating the situation, which may involve alerting platform moderators."]})]})]})]}),$s=Object.freeze(Object.defineProperty({__proto__:null,LegalView:Ys,default:Ys},Symbol.toStringTag,{value:"Module"})),Us=({userToken:e})=>{const{userToken:s}=Fe(),t=null!=e?e:s,[a,r]=d.useState([]),[n,i]=d.useState(!0),[l,o]=d.useState(null),{addToast:h}=D();d.useEffect(()=>{g()},[]);const g=()=>c(null,null,function*(){try{i(!0);const e=[{id:"1",userToken:"peer-1",displayName:"Alex",bio:"Here to listen and share experiences about anxiety and stress management.",interests:["Anxiety","Stress","Mindfulness"],matchScore:.95,isOnline:!0,lastActive:(new Date).toISOString()},{id:"2",userToken:"peer-2",displayName:"Jordan",bio:"Recovered from depression and want to help others on their journey.",interests:["Depression","Recovery","Self-care"],matchScore:.87,isOnline:!1,lastActive:new Date(Date.now()-36e5).toISOString()},{id:"3",userToken:"peer-3",displayName:"Sam",bio:"Passionate about mental health awareness and breaking stigmas.",interests:["Mental Health","Support Groups","Wellness"],matchScore:.82,isOnline:!0,lastActive:(new Date).toISOString()}];r(e)}catch(e){h("Failed to load peer matches","error")}finally{i(!1)}});return n?m.jsxs("div",{className:"peer-support-view",children:[m.jsx(N,{title:"Peer Support",subtitle:"Connect with others who understand your journey"}),m.jsx("div",{className:"loading-spinner",style:{margin:"3rem auto"}})]}):m.jsxs("div",{className:"peer-support-view",children:[m.jsx(N,{title:"Peer Support",subtitle:"Connect with others who understand your journey"}),m.jsxs("div",{className:"peer-support-content",children:[m.jsxs(A,{className:"safety-notice",children:[m.jsxs("div",{className:"safety-notice-header",children:[m.jsx(x,{}),m.jsx("h3",{children:"Peer Support Guidelines"})]}),m.jsxs("ul",{className:"safety-guidelines",children:[m.jsx("li",{children:"Peers are not professional therapists or counselors"}),m.jsx("li",{children:"Share only what you're comfortable sharing"}),m.jsx("li",{children:"Respect boundaries and privacy"}),m.jsx("li",{children:"Report any inappropriate behavior"}),m.jsx("li",{children:'For crisis support, use "Get Help Now" resources'})]})]}),m.jsxs("div",{className:"peer-matches-section",children:[m.jsx("h2",{children:"Suggested Peers"}),0===a.length?m.jsx(de,{icon:m.jsx(p,{}),title:"No matches available",message:"Check back later for new peer connections"}):m.jsx("div",{className:"peer-matches-grid",children:a.map(e=>m.jsxs(A,{className:"peer-match-card",children:[m.jsxs("div",{className:"peer-match-header",children:[m.jsxs("div",{className:"peer-avatar",children:[m.jsx(p,{}),e.isOnline&&m.jsx("span",{className:"online-indicator"})]}),m.jsxs("div",{className:"peer-info",children:[m.jsx("h3",{children:e.displayName}),m.jsx("p",{className:"peer-status",children:e.isOnline?"Online now":`Last seen ${new Date(e.lastActive).toLocaleTimeString()}`})]}),m.jsxs("div",{className:"match-score",children:[m.jsx(b,{}),m.jsxs("span",{children:[Math.round(100*e.matchScore),"% match"]})]})]}),m.jsx("p",{className:"peer-bio",children:e.bio}),m.jsx("div",{className:"peer-interests",children:e.interests.map(e=>m.jsx("span",{className:"interest-tag",children:e},e))}),m.jsxs("div",{className:"peer-actions",children:[m.jsxs(f,{onClick:()=>(e=>c(null,null,function*(){try{h(`Connecting with ${e.displayName}...`,"info");const s=yield fetch("/api/peer-support/connect",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({peerId:e.id,message:`Hi ${e.displayName}, I'd like to connect with you for peer support.`})});if(!s.ok)throw new Error("Connection request failed");{const t=yield s.json();o(e),h(`Connected with ${e.displayName}!`,"success"),sessionStorage.setItem("activePeerConnection",JSON.stringify({peer:e,connectionId:t.connectionId,timestamp:(new Date).toISOString()}))}}catch(s){h("Failed to connect with peer","error")}}))(e),variant:"primary",size:"sm",disabled:!e.isOnline,children:[m.jsx(P,{}),e.isOnline?"Connect Now":"Offline"]}),m.jsxs(f,{variant:"secondary",size:"sm",onClick:()=>{},children:[m.jsx(u,{}),"Save"]})]})]},e.id))})]}),m.jsxs("div",{className:"active-connections-section",children:[m.jsx("h2",{children:"Your Connections"}),m.jsx(de,{icon:m.jsx(P,{}),title:"No active connections",message:"Connect with a peer to start supporting each other"})]})]})]})},Ws=Object.freeze(Object.defineProperty({__proto__:null,PeerSupportView:Us,default:Us},Symbol.toStringTag,{value:"Module"})),Vs=Object.freeze(Object.defineProperty({__proto__:null,default:({userToken:e,setActiveView:s})=>{const{user:t,userToken:a}=Fe(),r=null!=e?e:a,{addToast:n}=D(),i=d.useRef(Oe()),[h,g]=d.useState(null),[j,y]=d.useState([]),[b,k]=d.useState([]),[w,S]=d.useState({vibrationPattern:"heartbeat",colorTheme:"aurora",comfortMessages:["I'm here","You're safe","Breathe with me"],autoEscalationMinutes:5,silentMode:!1,breathingPattern:"4-7-8"}),[C,T]=d.useState(!1),[M,P]=d.useState(!1),[I,R]=d.useState(!1),[H,O]=d.useState(!1),[E,L]=d.useState(""),[z,F]=d.useState("medium"),[B,_]=d.useState(""),[q,Y]=d.useState("inhale"),[$,U]=d.useState(0),W=d.useRef();d.useEffect(()=>(G(),Q(),K(),()=>{W.current&&cancelAnimationFrame(W.current),i.current.removeAllListeners()}),[]);const G=()=>c(null,null,function*(){try{const e=yield fetch("/api/tether/circle",{headers:{Authorization:`Bearer ${r}`}});if(e.ok){const s=yield e.json();y(s.members||[])}}catch(e){}}),Q=()=>c(null,null,function*(){try{const e=yield fetch("/api/tether/requests/pending",{headers:{Authorization:`Bearer ${r}`}});if(e.ok){const s=yield e.json();k(s.requests||[])}}catch(e){}}),K=()=>{const e=i.current;e.on("tetherRequest",e=>{k(s=>[...s,e]),n(`New tether request from ${e.fromName}`,"info"),"vibrate"in navigator&&!w.silentMode&&navigator.vibrate([200,100,200])}),e.on("tetherAccepted",e=>{g({id:e.id,partnerId:e.partnerId,partnerName:e.partnerName,startTime:new Date,connectionStrength:0,isBreathingSynced:!1,isHapticEnabled:!0,status:"connecting"}),n("Tether connection established!","success")}),e.on("connectionStrengthChanged",({strength:e})=>{g(s=>s?o(l({},s),{connectionStrength:e}):null)}),e.on("breathingSync",e=>{e&&"object"==typeof e&&"phase"in e&&"progress"in e&&(Y(e.phase),U(e.progress))})},Z=e=>{if(!h)return;const s=Math.max(0,Math.min(1,h.connectionStrength+e));i.current.updateConnectionStrength(h.id,s)},X=()=>c(null,null,function*(){if(h){g(e=>e?o(l({},e),{status:"ending"}):null);try{yield i.current.endTether(h.id,(null==t?void 0:t.sub)||""),setTimeout(()=>{window.confirm("Would you like to send a thank you message to your tether partner?")&&ee()},2e3),g(null),n("Tether session ended","info")}catch(e){}}}),ee=()=>c(null,null,function*(){const e=prompt("Write a thank you message:");if(e)try{yield fetch("/api/tether/gratitude",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({sessionId:null==h?void 0:h.id,message:e})}),n("Thank you message sent","success")}catch(s){}}),se=()=>{n("No response received. Escalating to emergency contacts...","warning"),i.current.emit("emergencyEscalation",{userId:null==t?void 0:t.sub,reason:"No response to high urgency tether request"}),"critical"===z&&(null==s||s({view:"crisis"}))},te=()=>{h&&(g(e=>e?o(l({},e),{isBreathingSynced:!e.isBreathingSynced}):null),h.isBreathingSynced||ae())},ae=()=>{const e={"4-7-8":{inhale:4e3,hold:7e3,exhale:8e3,pause:1e3},box:{inhale:4e3,hold:4e3,exhale:4e3,pause:4e3},coherent:{inhale:5e3,hold:0,exhale:5e3,pause:0}}[w.breathingPattern];let s="inhale",t=Date.now();const a=()=>{const r=Date.now()-t,n=e[s];if(n>0){const e=Math.min(r/n,1);if(U(e),e>=1){const e=["inhale","hold","exhale","pause"],a=e.indexOf(s);s=e[(a+1)%4],Y(s),t=Date.now()}}else{const e=["inhale","hold","exhale","pause"],t=e.indexOf(s);s=e[(t+1)%4],Y(s)}(null==h?void 0:h.isBreathingSynced)&&(W.current=requestAnimationFrame(a))};W.current=requestAnimationFrame(a)},re=e=>{const s=Math.floor(e/1e3),t=Math.floor(s/60),a=Math.floor(t/60);return a>0?`${a}h ${t%60}m`:t>0?`${t}m ${s%60}s`:`${s}s`},ne=e=>{const s=Date.now()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(t/60),r=Math.floor(a/24);return r>0?`${r}d ago`:a>0?`${a}h ago`:t>0?`${t}m ago`:"just now"},ie=e=>e<.3?"#ff6b6b":e<.7?"#ffd93d":"#6bcf7f",[oe,ce]=d.useState(!0);return m.jsxs("div",{className:"tether-view",children:[m.jsx(N,{title:"Astral Tether",subtitle:"Create meaningful connections during difficult moments"}),m.jsxs("div",{className:"tether-mode-toggle",children:[m.jsx(f,{variant:oe?"primary":"ghost",onClick:()=>ce(!0),children:"Demo Experience"}),m.jsx(f,{variant:oe?"ghost":"primary",onClick:()=>ce(!1),children:"Live Tether"})]}),oe?m.jsx(me,{}):m.jsxs("div",{className:"tether-content",children:[m.jsxs(A,{className:"safety-notice",children:[m.jsxs("div",{className:"notice-header",children:[m.jsx(x,{}),m.jsx("h3",{children:"Tether Guidelines"})]}),m.jsxs("ul",{children:[m.jsx("li",{children:"Tether connects you with trusted support during difficult times"}),m.jsx("li",{children:"Either person can initiate or end the connection"}),m.jsx("li",{children:'For emergencies, use "Get Help Now" or call emergency services'}),m.jsx("li",{children:"Connections are private and encrypted"})]})]}),m.jsx(A,{className:"guided-experiences-section",children:m.jsx(he,{partnerName:null==h?void 0:h.partnerName,isConnected:!!h,onExperienceComplete:e=>{n(`Completed ${e} experience!`,"success")}})}),h&&(h?m.jsxs(A,{className:"active-tether-card",children:[m.jsxs("div",{className:"tether-header",children:[m.jsxs("div",{className:"tether-status",children:[m.jsx(xe,{className:"pulse-animation"}),m.jsxs("span",{children:["Connected with ",h.partnerName]})]}),m.jsxs("div",{className:"tether-timer",children:[m.jsx(le,{}),m.jsx("span",{children:re(Date.now()-h.startTime.getTime())})]})]}),m.jsxs("div",{className:"connection-strength",children:[m.jsx("label",{children:"Connection Strength"}),m.jsx("div",{className:"strength-bar",children:m.jsx("div",{className:"strength-fill",style:{width:100*h.connectionStrength+"%",backgroundColor:ie(h.connectionStrength)}})}),m.jsxs("div",{className:"strength-controls",children:[m.jsx(f,{variant:"ghost",size:"sm",onClick:()=>Z(-.1),children:"Lighter"}),m.jsx(f,{variant:"ghost",size:"sm",onClick:()=>Z(.1),children:"Stronger"})]})]}),m.jsxs("div",{className:"breathing-sync-section",children:[m.jsxs("div",{className:"breathing-header",children:[m.jsx("h3",{children:"Synchronized Breathing"}),m.jsx(f,{variant:h.isBreathingSynced?"primary":"secondary",size:"sm",onClick:te,children:h.isBreathingSynced?"Synced":"Start Sync"})]}),h.isBreathingSynced&&m.jsxs("div",{className:"breathing-visualization",children:[m.jsx("div",{className:`breathing-circle ${q}`,children:m.jsx("div",{className:"breathing-progress",style:{transform:`scale(${.5+.5*$})`}})}),m.jsxs("p",{className:"breathing-instruction",children:["inhale"===q&&"Breathe In","hold"===q&&"Hold","exhale"===q&&"Breathe Out","pause"===q&&"Rest"]})]})]}),m.jsxs("div",{className:"comfort-messages",children:[m.jsx("h3",{children:"Comfort Messages"}),m.jsx("div",{className:"message-bubbles",children:w.comfortMessages.map((e,s)=>m.jsx("div",{className:"comfort-bubble",children:e},s))})]}),m.jsxs("div",{className:"tether-actions",children:[m.jsxs(f,{variant:"secondary",onClick:()=>{"vibrate"in navigator&&navigator.vibrate([200,100,200,100,200]),n("Sending comfort vibration...","info")},children:[m.jsx(u,{}),"Send Warmth"]}),m.jsx(f,{variant:"danger",onClick:X,children:"End Tether"})]})]}):null),!h&&(0===b.length?null:m.jsxs(A,{className:"pending-requests-card",children:[m.jsx("h2",{children:"Pending Tether Requests"}),m.jsx("div",{className:"requests-list",children:b.map(e=>m.jsxs("div",{className:"tether-request",children:[m.jsxs("div",{className:"request-info",children:[m.jsx("h4",{children:e.fromName}),m.jsx("p",{children:e.message}),m.jsx("span",{className:`urgency-badge ${e.urgency}`,children:e.urgency})]}),m.jsxs("div",{className:"request-actions",children:[m.jsxs(f,{variant:"primary",size:"sm",onClick:()=>{return s=e.id,c(null,null,function*(){try{(yield i.current.acceptTether(s,(null==t?void 0:t.sub)||""))&&(k(e=>e.filter(e=>e.id!==s)),n("Tether connection started","success"))}catch(e){n("Failed to accept tether request","error")}});var s},children:[m.jsx(pe,{}),"Accept"]}),m.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{k(s=>s.filter(s=>s.id!==e.id))},children:[m.jsx(ue,{}),"Decline"]})]})]},e.id))})]})),!h&&m.jsxs(A,{className:"quick-actions-card",children:[m.jsx("h2",{children:"Quick Actions"}),m.jsxs("div",{className:"action-buttons",children:[m.jsxs(f,{variant:"primary",onClick:()=>T(!0),disabled:!!h,children:[m.jsx(ge,{}),"Request Tether"]}),m.jsxs(f,{variant:"secondary",onClick:()=>{F("critical"),T(!0)},disabled:!!h,children:[m.jsx(je,{}),"Crisis Tether"]}),m.jsxs(f,{variant:"ghost",onClick:()=>O(!0),children:[m.jsx(xe,{}),"View Insights"]}),m.jsxs(f,{variant:"ghost",onClick:()=>P(!0),children:[m.jsx(ye,{}),"Settings"]})]})]}),!h&&m.jsxs(A,{className:"tether-circle-card",children:[m.jsxs("div",{className:"card-header",children:[m.jsx("h2",{children:"Your Tether Circle"}),m.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>R(!0),children:[m.jsx(ye,{}),"Manage"]})]}),0===j.length?m.jsx(de,{icon:m.jsx(p,{}),title:"No circle members yet",message:"Add trusted friends and family to your tether circle",action:m.jsx(f,{onClick:()=>R(!0),children:"Add Members"})}):m.jsx("div",{className:"circle-members",children:j.map(e=>m.jsxs("div",{className:"circle-member",children:[m.jsxs("div",{className:"member-avatar",children:[e.profilePicture?m.jsx("img",{src:e.profilePicture,alt:e.displayName}):m.jsx(p,{}),e.isAvailable&&m.jsx("span",{className:"availability-indicator online"})]}),m.jsxs("div",{className:"member-info",children:[m.jsx("h4",{children:e.displayName}),m.jsx("p",{className:"member-status",children:e.isAvailable?"Available":`Last seen ${ne(e.lastActive)}`}),m.jsx("span",{className:`trust-badge ${e.trustLevel}`,children:e.trustLevel})]}),m.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>{_(e.id),T(!0)},disabled:!e.isAvailable,children:[m.jsx(ge,{}),"Tether"]})]},e.id))})]})]}),m.jsx(v,{isOpen:C,onClose:()=>T(!1),title:"Request Tether Support",children:m.jsxs("div",{className:"tether-request-form",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Select Circle Member (Optional)"}),m.jsxs("select",{value:B,onChange:e=>_(e.target.value),className:"form-select",children:[m.jsx("option",{value:"",children:"Any available member"}),j.filter(e=>e.isAvailable).map(e=>m.jsx("option",{value:e.id,children:e.displayName},e.id))]})]}),m.jsx(J,{label:"Message",value:E,onChange:e=>L(e.target.value),placeholder:"Let them know how you're feeling or what you need...",rows:4}),m.jsxs("div",{className:"urgency-selector",children:[m.jsx("label",{children:"Urgency Level"}),m.jsx("div",{className:"urgency-options",children:["low","medium","high","critical"].map(e=>m.jsx("button",{className:`urgency-option ${e} ${z===e?"selected":""}`,onClick:()=>F(e),children:e},e))})]}),m.jsxs("div",{className:"modal-actions",children:[m.jsx(f,{variant:"primary",onClick:()=>c(null,null,function*(){if(E.trim())try{yield i.current.initiateTether({fromUserId:(null==t?void 0:t.sub)||"",toUserId:B,tetherType:"conversation",message:E,urgency:z}),n("Tether request sent","success"),T(!1),L(""),"high"!==z&&"critical"!==z||setTimeout(()=>{h||se()},60*w.autoEscalationMinutes*1e3)}catch(e){n("Failed to send tether request","error")}else n("Please add a message for your tether request","error")}),children:"Send Request"}),m.jsx(f,{variant:"ghost",onClick:()=>T(!1),children:"Cancel"})]})]})}),m.jsx(v,{isOpen:M,onClose:()=>P(!1),title:"Tether Settings",children:m.jsxs("div",{className:"tether-settings",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Vibration Pattern"}),m.jsxs("select",{value:w.vibrationPattern,onChange:e=>S(s=>o(l({},s),{vibrationPattern:e.target.value})),className:"form-select",children:[m.jsx("option",{value:"heartbeat",children:"Heartbeat"}),m.jsx("option",{value:"wave",children:"Wave"}),m.jsx("option",{value:"pulse",children:"Pulse"}),m.jsx("option",{value:"custom",children:"Custom"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Color Theme"}),m.jsx("div",{className:"color-options",children:["aurora","sunset","ocean","forest"].map(e=>m.jsx("button",{className:`color-option ${e} ${w.colorTheme===e?"selected":""}`,onClick:()=>S(s=>o(l({},s),{colorTheme:e})),children:e},e))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Breathing Pattern"}),m.jsxs("select",{value:w.breathingPattern,onChange:e=>S(s=>o(l({},s),{breathingPattern:e.target.value})),className:"form-select",children:[m.jsx("option",{value:"4-7-8",children:"4-7-8 Breathing"}),m.jsx("option",{value:"box",children:"Box Breathing"}),m.jsx("option",{value:"coherent",children:"Coherent Breathing"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Auto-Escalation (minutes)"}),m.jsx(V,{type:"number",value:w.autoEscalationMinutes.toString(),onChange:e=>S(s=>o(l({},s),{autoEscalationMinutes:parseInt(e.target.value)||5})),min:"1",max:"30"})]}),m.jsx("div",{className:"form-group",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:w.silentMode,onChange:e=>S(s=>o(l({},s),{silentMode:e.target.checked}))}),"Silent Mode (no sounds or vibrations)"]})}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Comfort Messages"}),w.comfortMessages.map((e,s)=>m.jsx(V,{value:e,onChange:e=>{const t=[...w.comfortMessages];t[s]=e.target.value,S(e=>o(l({},e),{comfortMessages:t}))},placeholder:"Enter comfort message"},s)),m.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S(e=>o(l({},e),{comfortMessages:[...e.comfortMessages,""]})),children:"Add Message"})]}),m.jsx("div",{className:"modal-actions",children:m.jsx(f,{variant:"primary",onClick:()=>{i.current.saveComfortProfile((null==t?void 0:t.sub)||"",w),P(!1),n("Settings saved","success")},children:"Save Settings"})})]})})]})}},Symbol.toStringTag,{value:"Module"})),Gs=[{id:"local-1",title:"Be Yourself",description:"Inspirational message from Ted Lasso about being authentic",videoUrl:"/Videos/Be%20Yourself%20%20Ted%20Lasso.mp4",thumbnailUrl:"",duration:"0:30",category:"Inspiration",tags:["motivation","authenticity","self-love"],uploadedBy:"Local Content",uploadedAt:(new Date).toISOString(),views:0,likes:0},{id:"local-2",title:"The Best Quote Ever",description:"A powerful quote to inspire and motivate",videoUrl:"/Videos/The%20Best%20Quote%20Ever.mp4",thumbnailUrl:"",duration:"0:45",category:"Inspiration",tags:["quotes","wisdom","motivation"],uploadedBy:"Local Content",uploadedAt:(new Date).toISOString(),views:0,likes:0},{id:"local-3",title:"Wellness Video 1",description:"Calming content for mental wellness",videoUrl:"/Videos/videoplayback%20(2).mp4",thumbnailUrl:"",duration:"1:00",category:"Wellness",tags:["calm","relaxation","peace"],uploadedBy:"Local Content",uploadedAt:(new Date).toISOString(),views:0,likes:0},{id:"local-4",title:"Wellness Video 2",description:"Mindfulness and meditation guidance",videoUrl:"/Videos/videoplayback%20(3).mp4",thumbnailUrl:"",duration:"1:00",category:"Meditation",tags:["mindfulness","meditation","breathing"],uploadedBy:"Local Content",uploadedAt:(new Date).toISOString(),views:0,likes:0},{id:"local-5",title:"Wellness Video 3",description:"Stress relief and relaxation techniques",videoUrl:"/Videos/videoplayback%20(4).mp4",thumbnailUrl:"",duration:"1:00",category:"Stress Relief",tags:["stress","relaxation","techniques"],uploadedBy:"Local Content",uploadedAt:(new Date).toISOString(),views:0,likes:0}],Qs=({setActiveView:e})=>{const[s,t]=d.useState([]),[a,r]=d.useState(0),[n,i]=d.useState(!0),[l,o]=d.useState(null),[h,x]=d.useState(!0),[p,j]=d.useState(!1),[y,b]=d.useState(new Set),[v,f]=d.useState(new Set),[N,k]=d.useState(!1),w=d.useRef([]),S=d.useRef(null),C=d.useRef(0),{addToast:T}=D(),A=d.useCallback(()=>c(null,null,function*(){i(!0),o(null);try{t(Gs)}catch(e){t(Gs)}finally{i(!1)}}),[]);d.useEffect(()=>{A()},[A]);const P=d.useCallback(e=>{const t=e.currentTarget,n=t.scrollTop,i=t.clientHeight,l=Math.round(n/i);l!==a&&l>=0&&l<s.length&&(r(l),w.current.forEach(e=>{e&&(e.pause(),e.currentTime=0)}),setTimeout(()=>{const e=w.current[l];e&&h&&e.play().catch(e=>{})},100))},[a,s.length,h]),I=e=>{e>=0&&e<s.length&&S.current&&(r(e),S.current.scrollTo({top:e*S.current.clientHeight,behavior:"smooth"}))},R=()=>{const e=w.current[a];e&&(h?(e.pause(),x(!1)):(e.play().catch(e=>{}),x(!0)))},O=()=>{const e=w.current[a];e&&(e.muted=!p,j(!p))};d.useEffect(()=>{const e=w.current[a];e&&h&&e.play().catch(e=>{})},[a,h]),d.useEffect(()=>{const e=e=>{switch(e.key){case"Escape":E();break;case"ArrowUp":e.preventDefault(),a>0&&I(a-1);break;case"ArrowDown":e.preventDefault(),a<s.length-1&&I(a+1);break;case" ":e.preventDefault(),R();break;case"m":case"M":e.preventDefault(),O()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,s.length]);const E=()=>{w.current.forEach(e=>{e&&(e.pause(),e.currentTime=0)}),null==e||e("wellness-tracking")};return m.jsxs("div",{className:"tiktok-video-container",children:[m.jsx("div",{ref:S,className:"tiktok-video-scroll",onScroll:P,onTouchStart:e=>{C.current=e.touches[0].clientY},onTouchEnd:e=>{const t=e.changedTouches[0].clientY,r=C.current-t;Math.abs(r)>50&&(r>0&&a<s.length-1?I(a+1):r<0&&a>0&&I(a-1))},children:s.map((e,t)=>m.jsxs("div",{className:"tiktok-video-item",children:[m.jsx("video",{ref:e=>w.current[t]=e,src:e.videoUrl,className:"tiktok-video-player",loop:!0,muted:p,playsInline:!0,autoPlay:0===t,onClick:R,onLoadedData:()=>{var e;t===a&&h&&(null==(e=w.current[t])||e.play().catch(e=>{}))},onError:e=>{T("Video temporarily unavailable","warning")},onLoadStart:()=>{}}),m.jsxs("div",{className:"tiktok-video-overlay",children:[m.jsx("button",{className:"video-back-button",onClick:E,"aria-label":"Go back to wellness videos",children:m.jsx(H,{})}),!h&&t===a&&m.jsx("div",{className:"tiktok-play-indicator",children:m.jsx(ne,{})}),m.jsx("div",{className:"tiktok-top-controls",children:m.jsx("button",{className:"tiktok-control-btn",onClick:O,children:p?m.jsx(be,{}):m.jsx(ve,{})})}),m.jsx("div",{className:"tiktok-bottom-info",children:m.jsxs("div",{className:"tiktok-video-info",children:[m.jsxs("div",{className:"tiktok-creator",children:[m.jsx(g,{}),m.jsxs("span",{children:["@",e.userToken]})]}),m.jsx("h3",{className:"tiktok-video-title",children:e.description.split(":")[0]}),m.jsx("p",{className:"tiktok-video-description",children:e.description.split(":")[1]||e.description})]})}),m.jsxs("div",{className:"tiktok-actions-sidebar",children:[m.jsxs("button",{className:"tiktok-action-btn "+(y.has(e.id)?"liked":""),onClick:()=>(e=>{const s=new Set(y);s.has(e)?(s.delete(e),T("Removed from liked videos","info")):(s.add(e),T("Added to liked videos! ðŸ’œ","success")),b(s)})(e.id),children:[m.jsx("div",{className:"tiktok-action-icon",children:m.jsx(u,{})}),m.jsx("span",{className:"tiktok-action-count",children:e.likes+(y.has(e.id)?1:0)})]}),m.jsxs("button",{className:"tiktok-action-btn",onClick:()=>T("Comments coming soon!","info"),children:[m.jsx("div",{className:"tiktok-action-icon",children:m.jsx(fe,{})}),m.jsx("span",{className:"tiktok-action-count",children:e.comments})]}),m.jsxs("button",{className:"tiktok-action-btn",onClick:()=>(e=>{navigator.share?navigator.share({title:e.description.split(":")[0],text:e.description,url:window.location.href}).catch(()=>{T("Share cancelled","info")}):(navigator.clipboard.writeText(window.location.href),T("Link copied to clipboard!","success"))})(e),children:[m.jsx("div",{className:"tiktok-action-icon",children:m.jsx(Ne,{})}),m.jsx("span",{className:"tiktok-action-count",children:e.shares})]}),m.jsxs("button",{className:"tiktok-action-btn "+(v.has(e.id)?"saved":""),onClick:()=>(e=>{const s=new Set(v);s.has(e)?(s.delete(e),T("Removed from saved videos","info")):(s.add(e),T("Video saved! ðŸŒŸ","success")),f(s)})(e.id),children:[m.jsx("div",{className:"tiktok-action-icon",children:m.jsx(se,{})}),m.jsx("span",{className:"tiktok-action-count",children:"Save"})]})]}),m.jsx("div",{className:"tiktok-progress-indicators",children:s.map((e,s)=>m.jsx("div",{className:"tiktok-progress-dot "+(s===a?"active":""),onClick:()=>I(s)},s))})]})]},e.id))}),n&&m.jsx("div",{className:"tiktok-loading-overlay",children:m.jsx(ke,{size:"large",message:"Loading wellness videos"})}),l&&m.jsx("div",{className:"tiktok-error-overlay",children:m.jsx(M,{message:l,onRetry:A})})]})},Js=Object.freeze(Object.defineProperty({__proto__:null,WellnessVideosView:Qs,default:Qs},Symbol.toStringTag,{value:"Module"})),Ks={HeartIcon:u,PostsIcon:Ce,KudosIcon:Se},Zs=({setActiveView:e})=>{const{helperProfile:s,updateHelperProfile:t}=Fe(),{allDilemmas:a,acceptDilemma:r,summarizeDilemma:n,declineRequest:i}=_e(),{helpSessions:l,generateHelperPerformanceSummary:o,startVideoChat:h}=Ye(),{startChat:x}=qe(),[p,g]=d.useState("forYou"),[j,y]=d.useState(0),[b,N]=d.useState(!0),[k,w]=d.useState([]),[S,C]=d.useState([]),[A,M]=d.useState(!1),[P,I]=d.useState(!1),[D,R]=d.useState(""),H=null==s?void 0:s.id,O=(null==s?void 0:s.isAvailable)||!1,L=e=>c(null,null,function*(){yield n(e)});d.useEffect(()=>{H&&"stats"===p&&(N(!0),Pe.feedback.getFeedbackForHelper(H).then(e=>y(e.length)).catch(e=>{}).finally(()=>N(!1)))},[H,p]),d.useEffect(()=>{H&&"achievements"===p&&(M(!0),Pe.helpers.getHelperAchievements(H).then(C).catch(e=>{}).finally(()=>M(!1)))},[H,p]);const z=d.useCallback(()=>c(null,null,function*(){if(s&&O)try{const e=yield Pe.ai.getAiMatchedDilemmas(s,a);w(e)}catch(e){}else w([])}),[s,O,a]);d.useEffect(()=>{"forYou"===p&&z()},[p,z]);const F=d.useMemo(()=>a.filter(e=>"direct_request"===e.status&&e.requestedHelperId===H).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()),[a,H]),B=d.useMemo(()=>a.filter(e=>"active"===e.status&&!e.isReported&&!e.assignedHelperId).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()),[a]),_=d.useMemo(()=>a.filter(e=>e.assignedHelperId===H&&"in_progress"===e.status).sort((e,s)=>new Date(s.timestamp).getTime()-new Date(e.timestamp).getTime()),[a,H]),q=d.useMemo(()=>l.filter(e=>e.helperId===H&&e.endedAt).sort((e,s)=>new Date(s.endedAt).getTime()-new Date(e.endedAt).getTime()),[l,H]),Y=d.useMemo(()=>l.filter(e=>e.helperId===H).length,[l,H]);if(!s)return m.jsx("div",{className:"loading-spinner",style:{margin:"5rem auto"}});return m.jsxs(m.Fragment,{children:[m.jsx(v,{isOpen:P,onClose:()=>I(!1),title:"Your Private Performance Feedback",children:m.jsx("div",{className:"markdown-content",children:m.jsx(E,{autoLoad:!0,children:D})})}),m.jsxs("div",{className:"view-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[m.jsxs("div",{children:[m.jsx("h1",{children:"Helper Dashboard"}),m.jsxs("p",{className:"view-subheader",children:["Welcome, ",s.displayName,". Your current level is ",s.level,"."]})]}),m.jsx(f,{onClick:()=>e({view:"helper-profile"}),children:"Edit Profile"})]}),m.jsx(we,{currentXp:s.xp,nextLevelXp:s.nextLevelXp,level:s.level}),m.jsxs("div",{className:"card setting-item",style:{marginBottom:"1.5rem"},children:[m.jsx("label",{htmlFor:"availability-toggle",style:{fontWeight:700,fontSize:"1.1rem",color:O?"var(--accent-success)":"var(--text-secondary)"},children:O?"You are Online":"You are Offline"}),m.jsxs("div",{className:"theme-toggle",children:[m.jsx("input",{type:"checkbox",id:"availability-toggle",checked:O,onChange:e=>{return a=e.target.checked,c(null,null,function*(){if(null==s?void 0:s.id)try{const e=yield Pe.helpers.setAvailability(s.id,a);t(e)}catch(e){}});var a}}),m.jsx("label",{htmlFor:"availability-toggle",className:"slider"})]})]}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsx(f,{className:"forYou"===p?"active":"",onClick:()=>g("forYou"),children:"For You"}),m.jsxs(f,{className:"requests"===p?"active":"",onClick:()=>g("requests"),children:["Requests (",F.length,")"]}),m.jsxs(f,{className:"available"===p?"active":"",onClick:()=>g("available"),children:["Available (",B.length,")"]}),m.jsxs(f,{className:"myDilemmas"===p?"active":"",onClick:()=>g("myDilemmas"),children:["My Active (",_.length,")"]}),m.jsx(f,{className:"history"===p?"active":"",onClick:()=>g("history"),children:"Session History"}),m.jsx(f,{className:"stats"===p?"active":"",onClick:()=>g("stats"),children:"My Stats"}),m.jsx(f,{className:"achievements"===p?"active":"",onClick:()=>g("achievements"),children:"Achievements"})]}),m.jsx("div",{className:"dashboard-content",children:(()=>{if(!O&&["forYou","requests","available"].includes(p))return m.jsx("div",{className:"card",children:m.jsx(de,{title:"You are Offline",message:"Go online to see and accept new dilemmas from the community."})});switch(p){case"forYou":return m.jsx("ul",{className:"posts-list",children:k.length>0?k.map(e=>m.jsx(T,{dilemma:e,isHelperView:!0,onAcceptDilemma:r,aiMatchReason:e.aiMatchReason,onSummarize:L},e.id)):m.jsx("div",{className:"card",children:m.jsx(de,{title:"No Matches Found",message:"No specific dilemmas match your expertise right now. Check the 'Available' tab for all posts."})})});case"requests":return m.jsx("ul",{className:"posts-list",children:F.length>0?F.map(e=>m.jsx(T,{dilemma:e,isHelperView:!0,onAcceptDilemma:r,onDeclineRequest:i,onSummarize:L},e.id)):m.jsx("div",{className:"card",children:m.jsx(de,{title:"No Direct Requests",message:"You have no direct requests from seekers right now."})})});case"available":return m.jsx("ul",{className:"posts-list",children:B.length>0?B.map(e=>m.jsx(T,{dilemma:e,isHelperView:!0,onAcceptDilemma:r,onSummarize:L},e.id)):m.jsx("div",{className:"card",children:m.jsx(de,{title:"All Caught Up!",message:"No dilemmas currently need support. Great job, team!"})})});case"myDilemmas":return m.jsx("ul",{className:"posts-list",children:_.length>0?_.map(e=>m.jsx(T,{dilemma:e,isHelperView:!0,onStartChat:()=>x(e.id,"helper"),onStartVideoChat:h},e.id)):m.jsx("div",{className:"card",children:m.jsx(de,{title:"No Active Dilemmas",message:'Accept one from the "Available" tab to start a conversation!'})})});case"history":return m.jsx("div",{className:"card",children:m.jsx("ul",{style:{listStyle:"none",padding:0},children:q.length>0?q.map(e=>m.jsxs("li",{className:"setting-item",style:{padding:"1rem",borderBottom:"1px solid var(--border-color)"},children:[m.jsxs("div",{children:[m.jsxs("p",{style:{fontWeight:"bold"},children:["Chat with Seeker (",Ee(e.seekerId,12),")"]}),m.jsxs("small",{children:["Ended on ",new Date(e.endedAt).toLocaleDateString()]})]}),m.jsx("div",{className:"form-actions-group",children:e.helperSummaryLoading?m.jsx("div",{className:"loading-spinner",style:{width:"16px",height:"16px",margin:"0 0.5rem"}}):e.helperSummary?m.jsx(f,{variant:"secondary",className:"btn-sm",onClick:()=>{return s=e.helperSummary,R(s),void I(!0);var s},children:"View Feedback"}):m.jsx(f,{variant:"ghost",className:"btn-sm",onClick:()=>o(e.id),children:"Get AI Feedback"})})]},e.id)):m.jsx("p",{children:"You have no completed sessions yet."})})});case"stats":return m.jsxs("div",{className:"stats-grid",children:[m.jsxs("div",{className:"card stat-card",children:[m.jsxs("div",{className:"stat-header",children:[m.jsx(Te,{}),m.jsx("h3",{children:"Reputation Score"})]}),m.jsxs("div",{className:"stat-number",children:[m.jsx(Ae,{value:s.reputation}),m.jsx("span",{style:{fontSize:"1.5rem",color:"var(--text-secondary)"},children:"/ 5.0"})]}),m.jsxs("p",{children:["Based on ",j," user feedback ratings."]})]}),m.jsxs("div",{className:"card stat-card",children:[m.jsxs("div",{className:"stat-header",children:[m.jsx(Ce,{}),m.jsx("h3",{children:"Posts Supported"})]}),m.jsx("div",{className:"stat-number",children:m.jsx(Ae,{value:Y})}),m.jsx("p",{children:"Total posts you've engaged with."})]}),m.jsxs("div",{className:"card stat-card",children:[m.jsxs("div",{className:"stat-header",children:[m.jsx(Se,{}),m.jsx("h3",{children:"Kudos Received"})]}),m.jsx("div",{className:"stat-number",children:m.jsx(Ae,{value:s.kudosCount||0})}),m.jsx("p",{children:'Total "Kudos" from seekers you\'ve helped.'})]}),m.jsxs("div",{className:"card stat-card",children:[m.jsxs("div",{className:"stat-header",children:[m.jsx(Me,{}),m.jsx("h3",{children:"Tier"})]}),m.jsx("div",{className:"stat-number text",children:s.helperType}),m.jsx("p",{children:"Completed training & verification"})]})]});case"achievements":return m.jsxs("div",{className:"card",children:[m.jsx("h2",{children:"My Achievements"}),A?m.jsx("div",{className:"loading-spinner"}):S.length>0?m.jsx("div",{className:"stats-grid",children:S.map(e=>{const s=Ks[e.icon]||u;return m.jsxs("div",{className:"card stat-card",children:[m.jsxs("div",{className:"stat-header",children:[m.jsx(s,{}),m.jsx("h3",{children:e.name})]}),m.jsx("p",{children:e.description})]},e.id)})}):m.jsx("p",{children:"You haven't earned any achievements yet. Keep supporting the community!"})]});default:return null}})()})]})},Xs=["Anxiety & Stress","Depression","Grief & Loss","Relationships","Family Issues","Loneliness","Self-Esteem","Academic/Work Stress"],et=({onProfileUpdated:e,setActiveView:s})=>{const{helperProfile:t,reloadProfile:a}=Fe(),[r,n]=d.useState(!1),[i,l]=d.useState(""),[o,h]=d.useState([]),[x,p]=d.useState(""),[u,g]=d.useState(!1),[j,y]=d.useState("");d.useEffect(()=>{t&&(l(t.displayName),h(t.expertise||[]),p(t.bio||""))},[t]);return t?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"view-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[m.jsxs("div",{children:[m.jsx("h1",{children:"My Helper Profile"}),m.jsx("p",{className:"view-subheader",children:"Manage your public information."})]}),!r&&m.jsx(f,{onClick:()=>n(!0),children:"Edit Profile"})]}),"Certified"!==t.helperType&&m.jsxs(A,{className:"setting-item",style:{marginBottom:"1.5rem"},children:[m.jsxs("div",{children:[m.jsx("h3",{style:{margin:"0 0 0.25rem 0"},children:"Become a Certified Helper"}),m.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginRight:"1rem"},children:"Complete our training to build trust within the community and qualify to help with more sensitive cases."})]}),m.jsx(f,{variant:"success",onClick:()=>s("helper-application"),children:"View Application"})]}),m.jsx(A,{children:m.jsxs("form",{children:[m.jsx(V,{label:"Public Display Name",id:"displayName",type:"text",value:i,onChange:e=>l(e.target.value),disabled:!r}),m.jsx(J,{label:"Public Bio",id:"bio",value:x,onChange:e=>p(e.target.value),disabled:!r,rows:4,maxLength:500}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Areas of Expertise"}),m.jsx("div",{className:"expertise-options",style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:Xs.map(e=>m.jsxs("div",{className:"radio-group",children:[m.jsx("input",{type:"checkbox",id:`expertise-edit-${e}`,name:"expertise",value:e,checked:o.includes(e),onChange:()=>r&&(e=>{h(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(e),disabled:!r}),m.jsx("label",{htmlFor:`expertise-edit-${e}`,children:e})]},e))})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Helper Tier"}),m.jsx("p",{style:{padding:"0.8rem 1rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-tertiary)"},children:t.helperType})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Reputation Score"}),m.jsx("p",{style:{padding:"0.8rem 1rem",border:"1px solid var(--border-color)",borderRadius:"8px",backgroundColor:"var(--bg-tertiary)"},children:t.reputation.toFixed(2)})]}),j&&m.jsx("p",{className:"api-error",style:{marginBottom:"1rem"},children:j}),r&&m.jsxs("div",{className:"form-actions",children:[m.jsx(f,{variant:"secondary",onClick:()=>{t&&(l(t.displayName),h(t.expertise),p(t.bio||"")),n(!1),y("")},disabled:u,children:"Cancel"}),m.jsx("div",{className:"form-actions-group",children:m.jsx(f,{type:"submit",onClick:s=>c(null,null,function*(){if(s.preventDefault(),t)if(y(""),i.trim()){g(!0);try{yield Pe.helpers.updateProfile(t.id,{displayName:i,expertise:o,bio:x}),yield a(),e(),n(!1)}catch(r){const e=ts(r)?r.message:"Failed to update profile.";y(e)}finally{g(!1)}}else y("Display name cannot be empty.")}),isLoading:u,disabled:u,children:"Save Changes"})})]})]})})]}):m.jsx("div",{className:"loading-spinner",style:{margin:"5rem auto"}})},st=[{title:"Lesson 1: The Role of a Peer Supporter",content:"Your role is to listen, validate, and support. You are not a therapist. Avoid giving advice or trying to 'fix' someone's problem. Your presence and empathy are the most powerful tools you have."},{title:"Lesson 2: Active Listening",content:"Active listening means focusing completely on what is being said. Paraphrase what you hear to show you understand (e.g., 'It sounds like you're feeling...'). Ask open-ended questions to encourage sharing (e.g., 'How did that make you feel?')."},{title:"Lesson 3: Maintaining Boundaries & Anonymity",content:"Never ask for or share personal identifying information (names, locations, social media). Keep the focus on the seeker's experience. If a conversation becomes inappropriate or you feel uncomfortable, you have the right to end it and report the user."},{title:"Lesson 4: Crisis Recognition",content:"While you are not a crisis counselor, it's important to recognize signs of immediate danger, such as direct threats of self-harm. If you see this, use the 'Alert Moderator' tool immediately. Do not try to handle the crisis yourself."}],tt=[{question:"What is your primary role as a peer supporter?",options:["To give advice","To fix their problem","To listen and validate feelings","To act as a therapist"],correctAnswer:"To listen and validate feelings"},{question:"A user says 'I feel so alone.' What is the BEST response?",options:["'You should try going out more.'","'I know exactly how you feel, one time I...'","'It sounds incredibly difficult to feel so alone. I'm here to listen.'","'Don't worry, you'll be fine.'"],correctAnswer:"'It sounds incredibly difficult to feel so alone. I'm here to listen.'"},{question:"A user says they are going to harm themselves right now. What should you do?",options:["Try to talk them out of it yourself.","Ask for their location so you can call for help.","Ignore it, they are probably not serious.","Use the 'Alert Moderator' tool and disengage."],correctAnswer:"Use the 'Alert Moderator' tool and disengage."}],at=({onTrainingComplete:e})=>{const{helperProfile:s}=Fe(),{addToast:t,showConfirmationModal:a}=D(),[r,n]=d.useState(0),[i,l]=d.useState(Array(tt.length).fill(null)),[o,h]=d.useState(!1);if(r<st.length){const e=st[r];return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"view-header",children:m.jsx("h1",{children:"Helper Training"})}),m.jsxs(A,{children:[m.jsx("h2",{children:e.title}),m.jsx("p",{children:e.content}),m.jsxs("div",{className:"form-actions",children:[r>0&&m.jsx(f,{variant:"secondary",onClick:()=>n(r-1),children:"Previous Lesson"}),m.jsx(f,{onClick:()=>n(r+1),children:r===st.length-1?"Start Quiz":"Next Lesson"})]})]})]})}return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"view-header",children:m.jsx("h1",{children:"Training Quiz"})}),m.jsxs(A,{children:[tt.map((e,s)=>m.jsxs("div",{className:"form-group",style:{marginBottom:"2rem"},children:[m.jsxs("label",{style:{fontSize:"1.1rem",marginBottom:"1rem"},children:[s+1,". ",e.question]}),m.jsx("div",{className:"radio-group",style:{flexDirection:"column",alignItems:"stretch",gap:"0.5rem"},children:e.options.map(e=>m.jsxs("div",{children:[m.jsx("input",{type:"radio",id:`q${s}-${e}`,name:`question-${s}`,value:e,checked:i[s]===e,onChange:()=>((e,s)=>{const t=[...i];t[e]=s,l(t)})(s,e)}),m.jsx("label",{htmlFor:`q${s}-${e}`,children:e})]},e))})]},s)),m.jsx("div",{className:"form-actions",children:m.jsx(f,{variant:"success",onClick:()=>c(null,null,function*(){const r=i.reduce((e,s,t)=>s===tt[t].correctAnswer?e+1:e,0);if(r/tt.length>=.75){h(!0);try{s&&(yield Pe.helpers.submitTrainingQuiz(s.id,r),a({title:"Quiz Passed!",message:`Congratulations! You scored ${r}/${tt.length}. You can now apply for certification from your profile page.`,confirmText:"Continue",onConfirm:e}))}catch(o){const e=ts(o)?o.message:"Failed to submit quiz results.";t(e,"error")}finally{h(!1)}}else a({title:"Quiz Results",message:`You scored ${r}/${tt.length}. You did not meet the passing score (75%). Please review the lessons and try again.`,confirmText:"Try Again",onConfirm:()=>{l(Array(tt.length).fill(null)),n(0)}})}),isLoading:o,children:"Submit Quiz"})})]})]})},rt=({setActiveView:e})=>{const{helperProfile:s,reloadProfile:t}=Fe(),[a,r]=d.useState(!1),{addToast:n}=D(),i=()=>c(null,null,function*(){if(s){r(!0);try{yield Pe.helpers.submitApplication(s.id),yield t(),n("Your application has been submitted for review! You'll be notified of the outcome.","info")}catch(e){const s=ts(e)?e.message:"Failed to submit application.";n(s,"error")}finally{r(!1)}}});if(!s)return m.jsx("div",{className:"loading-spinner",style:{margin:"5rem auto"}});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"view-header",children:[m.jsx("h1",{children:"Helper Certification"}),m.jsx("p",{className:"view-subheader",children:"Check your application status and complete the required steps to become a Certified Helper."})]}),"Certified"===s.helperType||"approved"===s.applicationStatus?m.jsxs(A,{className:"empty-state",children:[m.jsx("div",{style:{color:"var(--accent-success)",width:"60px",height:"60px",margin:"0 auto 1rem auto"},children:m.jsx(Me,{})}),m.jsx("h2",{children:"You are a Certified Helper!"}),m.jsx("p",{children:"Thank you for your commitment to supporting our community."})]}):"pending"===s.applicationStatus?m.jsxs(A,{className:"empty-state",style:{background:"var(--bg-tertiary)"},children:[m.jsx("h2",{children:"Application Pending Review"}),m.jsx("p",{children:"Your application has been received and is currently being reviewed by our team. Thank you for your patience."})]}):"rejected"===s.applicationStatus?m.jsxs(A,{className:"empty-state",style:{background:"color-mix(in srgb, var(--accent-danger) 10%, transparent)"},children:[m.jsx("h2",{style:{color:"var(--accent-danger)"},children:"Application Not Approved"}),m.jsx("p",{children:"Unfortunately, your application was not approved at this time. Please review the feedback below and our community guidelines."}),s.applicationNotes&&m.jsxs("p",{style:{fontWeight:"bold",marginTop:"1rem"},children:['Feedback: "',s.applicationNotes,'"']})]}):s.trainingCompleted?s.trainingCompleted&&"none"===s.applicationStatus?m.jsxs(A,{className:"empty-state",children:[m.jsx("h2",{children:"Step 2: Submit Your Application"}),m.jsx("p",{children:"You have successfully completed the training. The final step is to submit your application for review by our team."}),m.jsx(f,{variant:"success",onClick:i,isLoading:a,children:"Apply for Certification"})]}):m.jsx(A,{children:m.jsx("p",{children:"There was an issue loading your application status. Please try again later."})}):m.jsxs(A,{className:"empty-state",children:[m.jsx("h2",{children:"Step 1: Complete Mandatory Training"}),m.jsx("p",{children:"To become a Certified Helper, you must first complete our mandatory training and quiz on peer support best practices."}),m.jsx(f,{variant:"primary",onClick:()=>e("helper-training"),children:"Start Training"})]})]})},nt=()=>{var e;const{helperProfile:s}=Fe(),[t,a]=d.useState("forum"),[r,n]=d.useState([]),[i,h]=d.useState([]),[x,p]=d.useState(null),[u,g]=d.useState(""),[j,y]=d.useState(""),[b,v]=d.useState([]),[N,k]=d.useState(""),[w,S]=d.useState(""),[C,T]=d.useState(!0),[A,M]=d.useState(!1),P=(null!=(e=null==s?void 0:s.reputation)?e:0)>=4;d.useEffect(()=>{T(!0),"forum"===t?Pe.helperCommunity.getThreads().then(e=>{n(e),T(!1)}):"proposals"===t&&Pe.helperCommunity.getProposals().then(e=>{v(e),T(!1)})},[t]),d.useEffect(()=>{x&&(T(!0),Pe.helperCommunity.getPosts(x.id).then(e=>{h(e),T(!1)}))},[x]);const I=()=>c(null,null,function*(){if(u.trim()&&j.trim()&&s){M(!0);try{const e=yield Pe.helperCommunity.createThread({title:u.trim(),authorId:s.id,authorName:s.displayName},j.trim());n(s=>[e,...s].sort((e,s)=>new Date(s.lastReply).getTime()-new Date(e.lastReply).getTime())),g(""),y("")}catch(e){alert("Failed to create thread.")}finally{M(!1)}}}),D=()=>c(null,null,function*(){if(j.trim()&&s&&x){M(!0);try{const e=yield Pe.helperCommunity.createPost({threadId:x.id,authorId:s.id,authorName:s.displayName,content:j.trim()});h(s=>[...s,e]),y(""),n(e=>e.map(e=>e.id===x.id?o(l({},e),{postCount:e.postCount+1,lastReply:(new Date).toISOString()}):e).sort((e,s)=>new Date(s.lastReply).getTime()-new Date(e.lastReply).getTime()))}catch(e){alert("Failed to create post.")}finally{M(!1)}}}),R=()=>c(null,null,function*(){if(N.trim()&&w.trim()&&s){M(!0);try{const e=yield Pe.helperCommunity.createProposal({title:N.trim(),description:w.trim(),authorId:s.id,authorName:s.displayName});v(s=>[e,...s]),k(""),S("")}catch(e){alert("Failed to create proposal.")}finally{M(!1)}}}),H=(e,t)=>c(null,null,function*(){if(s)try{const a=yield Pe.helperCommunity.voteOnProposal(e,s.id,t);v(s=>s.map(s=>s.id===e?a:s))}catch(a){alert("Failed to cast vote.")}});return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"view-header",children:[m.jsx("h1",{children:"Helper Community"}),m.jsx("p",{className:"view-subheader",children:"A private space to connect, share experiences, and shape the community."})]}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsx(f,{className:"forum"===t?"active":"",onClick:()=>a("forum"),children:"Forum"}),m.jsx(f,{className:"proposals"===t?"active":"",onClick:()=>a("proposals"),children:"Proposals"})]}),m.jsx("div",{className:"dashboard-content",children:C?m.jsx("div",{className:"loading-spinner",style:{margin:"5rem auto"}}):"forum"===t?x?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"view-header",style:{position:"relative",paddingBottom:"1rem"},children:[m.jsx(f,{variant:"secondary",onClick:()=>p(null),style:{position:"absolute",top:0,left:0},children:"Back to Threads"}),m.jsx("h1",{children:x.title}),m.jsxs("p",{className:"view-subheader",children:["Started by ",x.authorName]})]}),m.jsx("div",{className:"posts-list",style:{listStyle:"none"},children:i.map(e=>m.jsxs("div",{className:"card",style:{marginBottom:"1rem"},children:[m.jsx("p",{children:e.content}),m.jsxs("small",{children:["by ",m.jsx("strong",{children:e.authorName})," â€¢ ",Le(e.timestamp)]})]},e.id))}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Reply to this thread"}),m.jsx(J,{value:j,onChange:e=>y(e.target.value),placeholder:"Share your thoughts...",rows:4}),m.jsx("div",{className:"form-actions",children:m.jsx(f,{onClick:D,isLoading:A,children:"Post Reply"})})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Start a New Discussion"}),m.jsx(V,{label:"Thread Title",value:u,onChange:e=>g(e.target.value),placeholder:"What's your discussion about?"}),m.jsx(J,{label:"Your first post",value:j,onChange:e=>y(e.target.value),placeholder:"Start the conversation...",rows:4}),m.jsx("div",{className:"form-actions",children:m.jsx(f,{onClick:I,isLoading:A,children:"Create Thread"})})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Active Threads"}),r.map(e=>m.jsxs("div",{style:{borderBottom:"1px solid var(--border-color)",padding:"1rem 0",cursor:"pointer"},onClick:()=>p(e),children:[m.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"0.25rem"},children:e.title}),m.jsxs("small",{children:["by ",m.jsx("strong",{children:e.authorName})," â€¢ ",e.postCount," posts â€¢ Last reply ",Le(e.lastReply)]})]},e.id)),0===r.length&&m.jsx("p",{children:"No threads yet. Be the first to start a discussion!"})]})]}):m.jsxs(m.Fragment,{children:[P&&m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Submit a New Proposal"}),m.jsx(V,{label:"Proposal Title",value:N,onChange:e=>k(e.target.value),placeholder:"e.g., Change to Helper Onboarding"}),m.jsx(J,{label:"Proposal Description",value:w,onChange:e=>S(e.target.value),placeholder:"Explain your proposal in detail...",rows:5}),m.jsx("div",{className:"form-actions",children:m.jsx(f,{onClick:R,isLoading:A,children:"Submit Proposal"})})]}),m.jsxs("div",{className:"card",children:[m.jsx("h3",{children:"Open Proposals"}),b.map(e=>m.jsxs("div",{className:"card",style:{border:"1px solid var(--border-color)",marginBottom:"1rem"},children:[m.jsx("h4",{children:e.title}),m.jsx("p",{children:e.description}),m.jsxs("small",{children:["Proposed by ",m.jsx("strong",{children:e.authorName})," â€¢ Ends ",Le(e.endsAt)]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",borderTop:"1px solid var(--border-color)",paddingTop:"1rem"},children:[m.jsxs("div",{style:{display:"flex",gap:"1.5rem"},children:[m.jsxs("span",{children:["For: ",m.jsx("strong",{children:e.votes.for})]}),m.jsxs("span",{children:["Against: ",m.jsx("strong",{children:e.votes.against})]}),m.jsxs("span",{children:["Abstain: ",m.jsx("strong",{children:e.votes.abstain})]})]}),m.jsxs("div",{className:"form-actions-group",children:[m.jsx(f,{variant:"success",onClick:()=>H(e.id,"for"),children:"For"}),m.jsx(f,{variant:"danger",onClick:()=>H(e.id,"against"),children:"Against"}),m.jsx(f,{variant:"secondary",onClick:()=>H(e.id,"abstain"),children:"Abstain"})]})]})]},e.id)),0===b.length&&m.jsx("p",{children:"No open proposals."})]})]})})]})},it=Object.freeze(Object.defineProperty({__proto__:null,HelperCommunityView:nt,default:nt},Symbol.toStringTag,{value:"Module"})),lt=({onUpdateApplicationStatus:e})=>{var s,t,a,r;const[n,i]=d.useState("overview"),[l,o]=d.useState([]),[h,x]=d.useState(null),[p,u]=d.useState(null),[g,j]=d.useState(!0),[y,b]=d.useState(null),[N,k]=d.useState(null),[w,S]=d.useState(!1),[C,T]=d.useState(""),M=d.useCallback(()=>c(null,null,function*(){j(!0);try{const e=ze.getDemoData("admin");x(e),o(e.helperApplications||[]),u(e.communityStats)}catch(e){alert("Failed to load admin data.")}finally{j(!1)}}),[]);d.useEffect(()=>{M()},[M]);return m.jsxs(m.Fragment,{children:[m.jsx(v,{isOpen:w,onClose:()=>S(!1),title:`Review Application: ${null==y?void 0:y.displayName}`,children:N?m.jsxs("div",{children:[m.jsx("h3",{children:"Applicant Details"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Bio:"})," ",N.bio]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Expertise:"})," ",(null==(s=N.expertise)?void 0:s.join(", "))||"Not specified"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Joined:"})," ",Le(N.joinDate)]}),m.jsx("hr",{style:{margin:"1rem 0"}}),m.jsx("h3",{children:"Performance Stats"}),m.jsxs("p",{children:[m.jsx("strong",{children:"Training Completed:"})," ",N.trainingCompleted?"Yes":"No"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Reputation:"})," ",(null==(t=N.reputation)?void 0:t.toFixed(2))||"N/A"," / 5.0"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Training Quiz Score:"})," ",N.quizScore||0,"%"]}),m.jsx("hr",{style:{margin:"1rem 0"}}),m.jsx("h3",{children:"Actions"}),m.jsx(J,{label:"Rejection Notes (if rejecting)",value:C,onChange:e=>T(e.target.value),rows:3}),m.jsxs("div",{className:"modal-actions",children:[m.jsx(f,{variant:"danger",onClick:()=>{y&&C.trim()?(e(y.id,"rejected",C),S(!1),T(""),M()):alert("Please provide rejection notes.")},children:"Reject"}),m.jsx(f,{variant:"success",onClick:()=>{y&&(e(y.id,"approved"),S(!1),M())},children:"Approve"})]})]}):m.jsx("div",{className:"loading-spinner"})}),m.jsxs("div",{className:"view-header",children:[m.jsx("h1",{children:"ðŸ›¡ï¸ Astral Admin Dashboard"}),m.jsx("p",{className:"view-subheader",children:"Platform oversight, safety management, and community health monitoring."})]}),m.jsxs("div",{className:"dashboard-tabs",children:[m.jsx(f,{className:"overview"===n?"active":"",onClick:()=>i("overview"),children:"ðŸ“Š Overview"}),m.jsxs(f,{className:"applications"===n?"active":"",onClick:()=>i("applications"),children:["ðŸ“ Applications ",(null==(r=null==(a=null==h?void 0:h.profile)?void 0:a.helperApplications)?void 0:r.length)>0?`(${h.profile.helperApplications.length})`:l.length>0?`(${l.length})`:""]}),m.jsx(f,{className:"moderation"===n?"active":"",onClick:()=>i("moderation"),children:"ðŸš¨ Moderation"}),m.jsx(f,{className:"analytics"===n?"active":"",onClick:()=>i("analytics"),children:"ðŸ“ˆ Analytics"}),m.jsx(f,{className:"system"===n?"active":"",onClick:()=>i("system"),children:"âš™ï¸ System"})]}),m.jsxs("div",{className:"dashboard-content",children:["overview"===n&&m.jsxs("div",{className:"admin-overview",children:[(null==h?void 0:h.profile)&&m.jsxs(A,{className:"admin-profile-card",children:[m.jsxs("h3",{children:["ðŸ‘¨â€ðŸ’¼ ",h.profile.name]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Role:"})," ",h.profile.role]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Department:"})," ",h.profile.department]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Clearance:"})," ",h.profile.clearanceLevel]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Experience:"})," ",h.profile.yearsWithPlatform," years"]})]}),m.jsx("div",{className:"overview-metrics",children:(null==h?void 0:h.analytics)&&m.jsxs(m.Fragment,{children:[m.jsxs(A,{className:"metric-card",children:[m.jsx("h4",{children:"ðŸ‘¥ Platform Users"}),m.jsx("div",{className:"metric-number",children:h.analytics.userMetrics.totalActiveUsers.toLocaleString()}),m.jsxs("small",{children:["+",h.analytics.userMetrics.newRegistrationsToday," today"]})]}),m.jsxs(A,{className:"metric-card",children:[m.jsx("h4",{children:"ðŸŒŸ Active Helpers"}),m.jsx("div",{className:"metric-number",children:h.analytics.helperMetrics.totalActiveHelpers}),m.jsxs("small",{children:[h.analytics.helperMetrics.helpersOnline," online now"]})]}),m.jsxs(A,{className:"metric-card crisis",children:[m.jsx("h4",{children:"ðŸš¨ Crisis Alerts Today"}),m.jsx("div",{className:"metric-number",children:h.analytics.crisisMetrics.crisisAlertsToday}),m.jsxs("small",{children:[h.analytics.crisisMetrics.crisisResolutionRate,"% resolved"]})]}),m.jsxs(A,{className:"metric-card",children:[m.jsx("h4",{children:"ðŸ“Š System Health"}),m.jsxs("div",{className:"metric-number",children:[h.analytics.platformHealth.systemUptime,"%"]}),m.jsxs("small",{children:["Uptime â€¢ ",h.analytics.platformHealth.performanceScore,"/100 score"]})]})]})}),(null==h?void 0:h.escalatedCases)&&h.escalatedCases.length>0&&m.jsxs(A,{className:"urgent-alerts",children:[m.jsx("h3",{children:"ðŸš¨ Urgent Items Requiring Attention"}),h.escalatedCases.filter(e=>"urgent_intervention"===e.status||"urgent"===e.priority).map(e=>m.jsxs("div",{className:"urgent-item",children:[m.jsx("strong",{children:e.type.replace(/_/g," ").toUpperCase()}),m.jsx("p",{children:e.description}),m.jsxs("small",{children:["Escalated: ",new Date(e.escalationTime).toLocaleString()]})]},e.id))]}),(null==h?void 0:h.recentActions)&&m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸ“‹ Recent Administrative Actions"}),h.recentActions.slice(0,5).map(e=>m.jsxs("div",{className:"action-item",children:[m.jsx("strong",{children:e.type.replace(/_/g," ")}),": ",e.description,m.jsx("small",{children:new Date(e.timestamp).toLocaleString()})]},e.id))]})]}),"applications"===n&&m.jsxs(A,{children:[m.jsx("h3",{children:"Helper Applications Review"}),g?m.jsx("div",{className:"loading-spinner"}):(null==(I=null==(P=null==h?void 0:h.profile)?void 0:P.helperApplications)?void 0:I.length)>0?m.jsx("div",{className:"applications-grid",children:h.profile.helperApplications.map(e=>m.jsxs(A,{className:`application-card ${e.priority}`,children:[m.jsxs("div",{className:"app-header",children:[m.jsx("h4",{children:e.applicantName}),m.jsx("span",{className:`status-badge ${e.status}`,children:e.status.replace(/_/g," ")})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Type:"})," ",e.applicationType]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Specialties:"})," ",e.specialties.join(", ")]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Background Check:"})," ",m.jsx("span",{className:`status ${e.backgroundCheckStatus}`,children:e.backgroundCheckStatus})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"References:"})," ",e.referencesVerified?"âœ… Verified":"â³ Pending"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Risk:"})," ",m.jsx("span",{className:`risk ${e.riskAssessment}`,children:e.riskAssessment})]}),e.reviewNotes&&m.jsxs("p",{children:[m.jsx("strong",{children:"Notes:"})," ",e.reviewNotes]}),m.jsxs("small",{children:["Submitted: ",new Date(e.submissionDate).toLocaleDateString()]}),m.jsxs("div",{className:"app-actions",children:["pending_review"===e.status&&m.jsxs(m.Fragment,{children:[m.jsx(f,{variant:"success",className:"btn-sm",onClick:()=>{},children:"Approve"}),m.jsx(f,{variant:"danger",className:"btn-sm",onClick:()=>{},children:"Reject"})]}),m.jsx(f,{className:"btn-sm",onClick:()=>{},children:"View Details"})]})]},e.id))}):l.length>0?m.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[m.jsx("thead",{children:m.jsxs("tr",{style:{borderBottom:"2px solid var(--border-color)"},children:[m.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Display Name"}),m.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Application Date"}),m.jsx("th",{style:{padding:"0.75rem",textAlign:"left"},children:"Actions"})]})}),m.jsx("tbody",{children:l.map(e=>m.jsxs("tr",{style:{borderBottom:"1px solid var(--border-color)"},children:[m.jsx("td",{style:{padding:"0.75rem"},children:e.displayName}),m.jsx("td",{style:{padding:"0.75rem"},children:new Date(e.joinDate).toLocaleDateString()}),m.jsx("td",{style:{padding:"0.75rem"},children:m.jsx(f,{className:"btn-sm",onClick:()=>{return s=e,c(null,null,function*(){b(s),S(!0),k(s)});var s},children:"Review"})})]},e.id))})]}):m.jsx("p",{children:"No pending applications."})]}),"moderation"===n&&(()=>{var e;return m.jsxs("div",{className:"moderation-section",children:[(null==(e=null==h?void 0:h.profile)?void 0:e.escalatedCases)&&m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸš¨ Escalated Moderation Cases"}),m.jsx("div",{className:"cases-grid",children:h.profile.escalatedCases.map(e=>m.jsxs(A,{className:`case-card ${e.status}`,children:[m.jsxs("div",{className:"case-header",children:[m.jsx("h4",{children:e.type.replace(/_/g," ")}),m.jsx("span",{className:`status-badge ${e.status}`,children:e.status.replace(/_/g," ")})]}),m.jsx("p",{children:e.description}),m.jsxs("p",{children:[m.jsx("strong",{children:"Reported by:"})," ",e.reportedBy]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Escalated:"})," ",new Date(e.escalationTime).toLocaleString()]}),e.actionsTaken.length>0&&m.jsxs("div",{children:[m.jsx("strong",{children:"Actions Taken:"}),m.jsx("ul",{children:e.actionsTaken.map((s,t)=>m.jsx("li",{children:s},`${e.id}-action-${t}`))})]}),m.jsxs("div",{className:"case-actions",children:[m.jsx(f,{className:"btn-sm",onClick:()=>{},children:"View Details"}),e.followUpRequired&&m.jsx(f,{variant:"secondary",className:"btn-sm",onClick:()=>{},children:"Follow Up"})]})]},e.id))})]}),(null==h?void 0:h.communityHealth)&&m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸ“Š Community Health Metrics"}),m.jsxs("div",{className:"health-metrics",children:[m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Total Posts:"}),m.jsx("strong",{children:h.communityHealth.totalPosts})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Flagged Content:"}),m.jsx("strong",{className:"warning",children:h.communityHealth.flaggedContent})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Positive Sentiment:"}),m.jsxs("strong",{className:"success",children:[h.communityHealth.positiveSentimentRate,"%"]})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Engagement Rate:"}),m.jsxs("strong",{children:[h.communityHealth.engagementRate,"%"]})]})]})]})]})})(),"analytics"===n&&((null==h?void 0:h.analytics)?m.jsxs("div",{className:"analytics-section",children:[m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸ‘¥ User Analytics"}),m.jsxs("div",{className:"analytics-grid",children:[m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Total Active Users"}),m.jsx("strong",{children:h.analytics.userMetrics.totalActiveUsers.toLocaleString()})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Daily Active Users"}),m.jsx("strong",{children:h.analytics.userMetrics.dailyActiveUsers.toLocaleString()})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Weekly Active Users"}),m.jsx("strong",{children:h.analytics.userMetrics.weeklyActiveUsers.toLocaleString()})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"User Retention Rate"}),m.jsxs("strong",{children:[h.analytics.userMetrics.userRetentionRate,"%"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Avg Session Duration"}),m.jsxs("strong",{children:[h.analytics.userMetrics.averageSessionDuration," min"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"New Today"}),m.jsx("strong",{children:h.analytics.userMetrics.newRegistrationsToday})]})]})]}),m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸŒŸ Helper Analytics"}),m.jsxs("div",{className:"analytics-grid",children:[m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Total Active Helpers"}),m.jsx("strong",{children:h.analytics.helperMetrics.totalActiveHelpers})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Average Response Time"}),m.jsxs("strong",{children:[h.analytics.helperMetrics.averageResponseTime," min"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Helpers Online"}),m.jsx("strong",{children:h.analytics.helperMetrics.helpersOnline})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Sessions Today"}),m.jsx("strong",{children:h.analytics.helperMetrics.totalSessionsToday})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Satisfaction Rating"}),m.jsxs("strong",{children:[h.analytics.helperMetrics.helperSatisfactionRating,"/5.0"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Utilization Rate"}),m.jsxs("strong",{children:[h.analytics.helperMetrics.helperUtilizationRate,"%"]})]})]})]}),m.jsxs(A,{className:"crisis-analytics",children:[m.jsx("h3",{children:"ðŸš¨ Crisis Support Analytics"}),m.jsxs("div",{className:"analytics-grid",children:[m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Crisis Alerts Today"}),m.jsx("strong",{className:"crisis",children:h.analytics.crisisMetrics.crisisAlertsToday})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Avg Response Time"}),m.jsxs("strong",{children:[h.analytics.crisisMetrics.averageResponseTimeToCrisis," min"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Resolution Rate"}),m.jsxs("strong",{className:"success",children:[h.analytics.crisisMetrics.crisisResolutionRate,"%"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Prevention Success"}),m.jsxs("strong",{className:"success",children:[h.analytics.crisisMetrics.preventionSuccessRate,"%"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Escalation Rate"}),m.jsxs("strong",{className:"warning",children:[h.analytics.crisisMetrics.escalationRate,"%"]})]}),m.jsxs("div",{className:"analytic-item",children:[m.jsx("span",{children:"Emergency Contacts"}),m.jsx("strong",{children:h.analytics.crisisMetrics.emergencyContactsActivated})]})]})]})]}):g?m.jsx("div",{className:"loading-spinner"}):m.jsxs("div",{className:"stats-grid",children:[m.jsxs(A,{className:"stat-card",children:[m.jsx("h3",{children:"Active Dilemmas"}),m.jsx("div",{className:"stat-number",children:null==p?void 0:p.activeDilemmas})]}),m.jsxs(A,{className:"stat-card",children:[m.jsx("h3",{children:"Avg. Time to Support"}),m.jsx("div",{className:"stat-number text",children:null==p?void 0:p.avgTimeToFirstSupport})]}),m.jsxs(A,{className:"stat-card",children:[m.jsx("h3",{children:"Total Helpers"}),m.jsx("div",{className:"stat-number",children:null==p?void 0:p.totalHelpers})]}),m.jsxs(A,{className:"stat-card",children:[m.jsx("h3",{children:"Most Common Category"}),m.jsx("div",{className:"stat-number text",children:null==p?void 0:p.mostCommonCategory})]})]})),"system"===n&&(()=>{var e,s;return m.jsxs("div",{className:"system-section",children:[(null==(e=null==h?void 0:h.analytics)?void 0:e.platformHealth)&&m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸ”§ System Health"}),m.jsxs("div",{className:"health-grid",children:[m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"System Uptime"}),m.jsxs("strong",{className:"success",children:[h.analytics.platformHealth.systemUptime,"%"]})]}),m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"Avg Page Load"}),m.jsxs("strong",{children:[h.analytics.platformHealth.averagePageLoadTime,"s"]})]}),m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"Error Rate"}),m.jsxs("strong",{className:"success",children:[h.analytics.platformHealth.errorRate,"%"]})]}),m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"Performance Score"}),m.jsxs("strong",{children:[h.analytics.platformHealth.performanceScore,"/100"]})]}),m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"Security Incidents"}),m.jsx("strong",{className:"success",children:h.analytics.platformHealth.securityIncidents})]}),m.jsxs("div",{className:"health-item",children:[m.jsx("span",{children:"Backup Status"}),m.jsx("strong",{className:"success",children:h.analytics.platformHealth.dataBackupStatus})]})]})]}),(null==(s=null==h?void 0:h.profile)?void 0:s.systemAlerts)&&m.jsxs(A,{children:[m.jsx("h3",{children:"âš ï¸ System Alerts"}),h.profile.systemAlerts.map(e=>m.jsxs("div",{className:`alert-item ${e.severity}`,children:[m.jsxs("div",{className:"alert-header",children:[m.jsx("strong",{children:e.type.toUpperCase()}),m.jsx("span",{className:`severity-badge ${e.severity}`,children:e.severity})]}),m.jsx("p",{children:e.message}),m.jsxs("small",{children:[new Date(e.timestamp).toLocaleString()," â€¢ Status: ",m.jsx("span",{className:`status ${e.status}`,children:e.status})]})]},e.id))]}),(null==h?void 0:h.qualityMetrics)&&m.jsxs(A,{children:[m.jsx("h3",{children:"ðŸ“ˆ Quality Metrics"}),m.jsxs("div",{className:"quality-metrics",children:[m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"User Satisfaction"}),m.jsxs("strong",{children:[h.qualityMetrics.userSatisfactionScore,"/5.0"]})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Helper Reviews"}),m.jsx("strong",{children:h.qualityMetrics.helperPerformanceReviews})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Completed Audits"}),m.jsx("strong",{children:h.qualityMetrics.completedAudits})]}),m.jsxs("div",{className:"metric-item",children:[m.jsx("span",{children:"Pending Audits"}),m.jsx("strong",{className:"warning",children:h.qualityMetrics.pendingAudits})]})]}),m.jsx("h4",{children:"Feature Usage"}),m.jsx("div",{className:"feature-usage",children:Object.entries(h.qualityMetrics.platformFeatureUsage).map(([e,s])=>m.jsxs("div",{className:"usage-item",children:[m.jsx("span",{children:e.replace(/([A-Z])/g," $1").toLowerCase()}),m.jsx("div",{className:"usage-bar",children:m.jsx("div",{className:"usage-fill",style:{width:`${s}%`}})}),m.jsxs("strong",{children:[s,"%"]})]},e))})]})]})})()]})]});var P,I},ot=Object.freeze(Object.defineProperty({__proto__:null,default:()=>m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Community Moderation"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Help keep our community safe and supportive"})]}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(ie,{className:"w-8 h-8 text-yellow-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Pending Reports"})]}),m.jsx("p",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400 mb-2",children:"3"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Require review"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(x,{className:"w-8 h-8 text-green-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Actions Taken"})]}),m.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:"12"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This week"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(p,{className:"w-8 h-8 text-blue-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Community Health"})]}),m.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"98%"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Positive interactions"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Moderation Dashboard"}),m.jsxs("div",{className:"text-center py-12",children:[m.jsx(x,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Advanced moderation tools coming soon"}),m.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Report system, AI content filtering, and community guidelines enforcement"})]})]})]})})},Symbol.toStringTag,{value:"Module"})),ct=Object.freeze(Object.defineProperty({__proto__:null,default:()=>m.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Your Wellness Analytics"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Track your mental health progress and insights"})]}),m.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-8",children:[m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(y,{className:"w-8 h-8 text-green-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Mood Trend"})]}),m.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mb-2",children:"â†— Improving"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"7.2/10 average this week"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(u,{className:"w-8 h-8 text-pink-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Check-in Streak"})]}),m.jsx("p",{className:"text-3xl font-bold text-pink-600 dark:text-pink-400 mb-2",children:"14 days"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Personal best: 21 days"})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx(p,{className:"w-8 h-8 text-blue-500"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Support Given"})]}),m.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"8 people"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"This month"})]})]}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-6",children:"Weekly Progress"}),m.jsx("div",{className:"h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:m.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Analytics charts coming soon"})})]})]})})},Symbol.toStringTag,{value:"Module"}));export{lt as A,as as C,Ve as D,es as F,Zs as H,$s as L,ot as M,Ge as P,Is as Q,vs as R,Ze as S,Vs as T,gs as W,et as a,at as b,rt as c,ss as d,is as e,os as f,Ts as g,Ds as h,Bs as i,_s as j,qs as k,Ws as l,Js as m,it as n,ct as o};
